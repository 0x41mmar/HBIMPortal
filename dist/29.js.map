{"version":3,"sources":["webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?1a41*************","webpack:///./src/client/viewer.components/Viewer.Toolkit/index.js?3d64*****************","webpack:///./~/babel-runtime/helpers/get.js?a320****************","webpack:///./src/client/components/Label/Label.scss?d194***********","webpack:///./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js?9bfb*****************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js?88e8***********","webpack:///./src/client/components/WidgetContainer/index.js?87e1*************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js?6fc5***********","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js?bbdf*************","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?2530**************","webpack:///./~/dompurify/src/purify.js?f974*************","webpack:///./src/client/components/Label/index.js?d0bb***********","webpack:///./src/client/components/Label/Label.js?7c58***********","webpack:///./src/client/components/Label/Label.scss?2314************","webpack:///./~/react-contenteditable/lib/react-contenteditable.js?23ef********","webpack:///./~/lodash/_baseForOwn.js?f659********","webpack:///./~/lodash/_baseFlatten.js?a3c3*******","webpack:///./~/lodash/sortBy.js?2be6******","webpack:///./~/lodash/_isFlattenable.js?0a54*******","webpack:///./~/lodash/_baseEach.js?08a1******","webpack:///./~/lodash/_baseMap.js?e43e******","webpack:///./~/lodash/_baseOrderBy.js?45d1******","webpack:///./~/lodash/_baseSortBy.js?8b72******","webpack:///./~/lodash/_compareAscending.js?1e2c******","webpack:///./~/lodash/_compareMultiple.js?e80d******","webpack:///./~/lodash/_createBaseEach.js?843d******","webpack:///./src/client/components/Image/Image.scss?952d**","webpack:///./src/client/components/Image/index.js?5be9**","webpack:///./src/client/components/Image/Image.js?b32c**","webpack:///./src/client/components/Image/Image.scss?6b5a***","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.scss","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.scss?63f5"],"names":["Toolkit","format","d","Date","getTime","guid","replace","c","r","Math","random","floor","toString","urn","resolve","reject","paramUrn","startsWith","Autodesk","Viewing","Document","load","doc","error","roles","rootItem","getRootItem","items","roleArray","Array","isArray","forEach","role","getSubItemsWithProperties","type","id","className","tooltip","handler","button","UI","Button","icon","style","fontSize","setToolTip","onClick","viewer","ctrlGroupName","viewerToolbar","getToolbar","ctrlGroup","ControlGroup","addControl","model","dbIds","instanceTree","getData","getRootId","dbIdArray","leafIds","getLeafNodesRec","childCount","enumNodeChildren","childId","push","i","length","ex","getLeafNodes","fragIds","enumNodeFragments","fragId","leafId","dbId","getFragIds","fragList","getFragmentList","fragbBox","THREE","Box3","nodebBox","getWorldBounds","union","requestedProps","dbIdInt","parseInt","isNaN","propTasks","map","displayName","getProperty","all","then","properties","getProperties","result","defaultValue","prop","displayValue","Error","activeModel","propertyTasks","propertyResults","propertyResult","indexOf","sort","propFilter","propRes","filteredRes","filter","res","propFilterArray","getBulkProperties","components","defaultProp","getBulkPropertiesAsync","results","componentsMap","value","split","root","taskFunc","tasks","runTaskOnDataTreeRec","node","parent","children","childNode","task","min","max","material","overlayId","geometry","Geometry","vertices","Vector3","x","y","z","lines","Line","LinePieces","impl","addOverlay","invalidate","setMaterial","createNodeFunc","_buildModelTreeRec","name","getNodeName","rootId","rootNode","taskResults","_executeTaskOnModelTreeRec","hide","targetIds","visibilityManager","setNodeOff","show","isolate","targetLeafIds","leafTasks","resolveLeaf","axis","angle","center","quaternion","Quaternion","setFromAxisAngle","fragProxy","getFragmentProxy","getAnimTransform","position","applyQuaternion","add","multiplyQuaternions","updateAnimTransform","state","immediate","onStateRestored","removeEventListener","VIEWER_STATE_RESTORED_EVENT","pivot","viewport","pivotPoint","setTimeout","navigation","setPivotPoint","addEventListener","restoreState","parentId","nodeName","faceFilter","vertexArray","getLeafFragIds","matrixWorld","meshGeometry","renderProxy","getRenderProxy","attributes","positions","vb","array","indices","index","ib","stride","vbstride","offsets","count","start","oi","ol","il","a","b","vA","vB","vC","fromArray","faceIdx","face","Face3","faces","applyMatrix","computeFaceNormals","computeVertexNormals","mesh","Mesh","scale","excludedFragIds","svf","mc","getVisibleBounds","pt","nodeAccess","nodeBoxes","scaledExplodeDepth","maxDepth","explodeDepth","currentSegmentFraction","it","tmpBox","Float32Array","explodeRec","nodeId","depth","cx","cy","cz","ox","oy","oz","oscale","getNodeBox","mycx","mycy","mycz","dx","dy","dz","boxes","fragments","nbFrags","getCount","box_offset","getUserAgent","navigator","userAgent","isAndroid","match","isBlackBerry","isIOS","isOpera","isWindows","isWindowsDesktop","isWindowsMobile","isAny","MultiModelExtensionBase","options","defaultOptions","onModelCompletedLoad","bind","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","event","eventSink","off","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","on","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventIdArray","eventTasks","__handler","Composer","Extension","WidgetContainer","props","showTitle","renderTitle","title","dimensions","Children","child","newProps","cloneElement","classNames","height","join","renderChildren","Component","propTypes","string","bool","defaultProps","Label","width","textAlign","sanitize","text","Image","onError","onLoad","src","setState","ModelLoaderExtension","dialogSvc","getService","modelSvc","react","container","classList","loader","firstFileType","getFileType","pushRenderExtension","transformerReactOptions","popRenderExtension","transformerOptions","fullTransform","hideControls","transformer","loadDynamicExtension","modelTransformer","setModel","console","log","unloadExtension","popViewerPanel","showOK","search","content","open","database","dbModelsByName","dbModels","setDlgItems","window","atob","pop","dbModel","fileType","loadOptions","placementTransform","buildPlacementTransform","env","lmvProxy","proxy","endpoint","setEndpointAndApi","location","origin","loadDocument","getViewableItems","path","getViewablePath","loadModel","dbModelId","_id","emit","getState","onClose","filteredModels","nextActiveModel","unloadModel","setActiveModel","source","msg","__html","Matrix4","zOriented","makeRotationX","PI","fitToView","remove","selections","selection","params","activeGuid","fitModelToView","setStructure","modelstructure","e","keyCode","stopPropagation","preventDefault","target","toLowerCase","filteredDbModels","modelDlgItems","thumbnailUrl","getThumbnailUrl","onSearchChanged","onKeyDown","docked","ExtensionId","pushViewerPanel","spanClass","setDocking","modelItems","idx","modelName","showModelDlg","render","opts","renderControls","renderTransformer","theExtensionManager","registerExtension"],"mappings":"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ACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACpBA,mCAAC;AACD;AACA;AACA;;AAEA;AACA,qDAA0B,sBAAsB,EAAE;AAAA;AAClD,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,EAAE,iBAAiB,EAAE;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA,0CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB,gEAAgE;AAChE,gEAAgE;AAChE,uEAAuE;AACvE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;;AAEhE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,8BAA8B;;AAEzD;AACA;AACA,2CAA2C,oBAAoB;;AAE/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iCAAiC,EAAE;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE,+EAA+E;AAC/E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iCAAiC;AACzE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uCAAuC;AACvC,0BAA0B,QAAQ;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,KAAK;AACrB;AACA;AACA,iCAAiC,QAAQ;;AAEzC;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,yBAAyB;AACpC;AACA,aAAa,MAAM;AACnB;AACA;AACA;AACA,MAAM,8BAA8B;AACpC,MAAM,8BAA8B;AACpC,MAAM,8BAA8B;AACpC,MAAM;AACN;AACA;AACA,iCAAiC,eAAe,EAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;AC/CA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACnBA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,aAAa;AAC1B;AACA;;AAEA;;;;;;;;ACbA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,6BAA6B;AACxC,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA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","file":"29.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  background-color: white;\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/WidgetContainer/WidgetContainer.scss\n// module id = 1020\n// module chunks = 0 10 11 12 13 14 15 16 19 21 24 25 26 28 29 31 32 33 35 36 37 39 40","import ViewerToolkit from './Viewer.Toolkit'\r\n\r\nexport default ViewerToolkit\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/index.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 1022\n// module chunks = 0 10 11 12 13 14 15 16 20 21 22 23 24 25 26 27 28 29 30 31 32 33 35 36 37 42 45 46 47 50 51 54","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".label-container {\\n  position: relative;\\n  overflow: hidden;\\n  font-size: 100%;\\n  color: #343434;\\n  height: 100%;\\n  float: left; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/Label/Label.scss\n// module id = 1023\n// module chunks = 1 10 11 14 15 16 17 18 19 24 25 28 29 31 32 38 39 41","\r\n\r\nexport default class Toolkit {\r\n\r\n  ///////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime();\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\r\n      });\r\n\r\n    return guid;\r\n  }\r\n\r\n  /////////////////////////////////////////////\r\n  //mobile detection\r\n  //\r\n  /////////////////////////////////////////////\r\n  static get mobile() {\r\n\r\n    return {\r\n\r\n      getUserAgent: function () {\r\n        return navigator.userAgent;\r\n      },\r\n      isAndroid: function () {\r\n        return this.getUserAgent().match(/Android/i);\r\n      },\r\n      isBlackBerry: function () {\r\n        return this.getUserAgent().match(/BlackBerry/i);\r\n      },\r\n      isIOS: function () {\r\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i);\r\n      },\r\n      isOpera: function () {\r\n        return this.getUserAgent().match(/Opera Mini/i);\r\n      },\r\n      isWindows: function () {\r\n        return this.isWindowsDesktop() || this.isWindowsMobile();\r\n      },\r\n      isWindowsMobile: function () {\r\n        return this.getUserAgent().match(/IEMobile/i);\r\n      },\r\n      isWindowsDesktop: function () {\r\n        return this.getUserAgent().match(/WPDesktop/i);\r\n      },\r\n      isAny: function () {\r\n\r\n        return this.isAndroid() ||\r\n          this.isBlackBerry() ||\r\n          this.isIOS() ||\r\n          this.isWindowsMobile();\r\n      }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load a document from URN\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static loadDocument (urn) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const paramUrn = !urn.startsWith('urn:')\r\n        ? 'urn:' + urn\r\n        : urn\r\n\r\n      Autodesk.Viewing.Document.load(paramUrn, (doc) => {\r\n\r\n        resolve (doc)\r\n\r\n      }, (error) => {\r\n\r\n        reject (error)\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Return viewables\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getViewableItems (doc, roles = ['3d', '2d']) {\r\n\r\n    const rootItem = doc.getRootItem()\r\n\r\n    let items = []\r\n\r\n    const roleArray = roles\r\n      ? (Array.isArray(roles) ? roles : [roles])\r\n      : []\r\n\r\n    roleArray.forEach((role) => {\r\n\r\n      items = [ ...items,\r\n        ...Autodesk.Viewing.Document.getSubItemsWithProperties(\r\n          rootItem, { type: 'geometry', role }, true) ]\r\n    })\r\n\r\n    return items\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Toolbar button\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createButton(id, className, tooltip, handler) {\r\n\r\n    var button = new Autodesk.Viewing.UI.Button(id)\r\n\r\n    button.icon.style.fontSize = '24px'\r\n\r\n    button.icon.className = className\r\n\r\n    button.setToolTip(tooltip)\r\n\r\n    button.onClick = handler\r\n\r\n    return button\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Control group\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createControlGroup (viewer, ctrlGroupName) {\r\n\r\n    var viewerToolbar = viewer.getToolbar(true)\r\n\r\n    if (viewerToolbar) {\r\n\r\n      var ctrlGroup =  new Autodesk.Viewing.UI.ControlGroup(\r\n        ctrlGroupName)\r\n\r\n      viewerToolbar.addControl(ctrlGroup)\r\n\r\n      return ctrlGroup\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafNodes (model, dbIds) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n        let leafIds = []\r\n\r\n        const getLeafNodesRec = (id) => {\r\n\r\n          var childCount = 0;\r\n\r\n          instanceTree.enumNodeChildren(id, (childId) => {\r\n\r\n              getLeafNodesRec(childId)\r\n\r\n              ++childCount\r\n            })\r\n\r\n          if (childCount == 0) {\r\n\r\n            leafIds.push(id)\r\n          }\r\n        }\r\n\r\n        for (var i = 0; i < dbIdArray.length; ++i) {\r\n\r\n          getLeafNodesRec(dbIdArray[i])\r\n        }\r\n\r\n        return resolve(leafIds)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getFragIds (model, dbIds) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds)\r\n          ? dbIds : [dbIds]\r\n\r\n        const leafIds =\r\n          await Toolkit.getLeafNodes(\r\n            model, dbIdArray)\r\n\r\n        const fragIds = []\r\n\r\n        for(var i=0; i< leafIds.length; ++i) {\r\n\r\n          instanceTree.enumNodeFragments(\r\n            leafIds[i], (fragId) => {\r\n              fragIds.push(fragId)\r\n            })\r\n        }\r\n\r\n        return resolve(fragIds)\r\n\r\n      } catch(ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get leaf node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafFragIds (model, leafId) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const fragIds = []\r\n\r\n    instanceTree.enumNodeFragments(\r\n      leafId, (fragId) => {\r\n        fragIds.push(fragId)\r\n      })\r\n\r\n    return fragIds\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Node bounding box\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getWorldBoundingBox (model, dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var fragIds =\r\n          await Toolkit.getFragIds(\r\n            model, dbId)\r\n\r\n        if (!fragIds.length) {\r\n\r\n          return reject('No geometry, invalid dbId?')\r\n        }\r\n\r\n        var fragList = model.getFragmentList()\r\n\r\n        var fragbBox = new THREE.Box3()\r\n        var nodebBox = new THREE.Box3()\r\n\r\n        fragIds.forEach(function(fragId) {\r\n\r\n          fragList.getWorldBounds(fragId, fragbBox)\r\n          nodebBox.union(fragbBox)\r\n        })\r\n\r\n        return resolve(nodebBox)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets properties from component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperties (model, dbId, requestedProps = null) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const dbIdInt = parseInt(dbId)\r\n\r\n        if (isNaN(dbIdInt)) {\r\n\r\n          return reject(dbId + ' is not a valid integer')\r\n        }\r\n\r\n        if (requestedProps) {\r\n\r\n          const propTasks = requestedProps.map((displayName) => {\r\n\r\n            return Toolkit.getProperty(\r\n              model, dbIdInt, displayName, 'Not Available')\r\n          })\r\n\r\n          Promise.all(propTasks).then((properties) => {\r\n\r\n            resolve(properties)\r\n          })\r\n\r\n        } else {\r\n\r\n          model.getProperties(dbIdInt, (result) => {\r\n\r\n            if (result.properties) {\r\n\r\n              return resolve(\r\n                result.properties)\r\n            }\r\n\r\n            return reject('No Properties')\r\n          })\r\n        }\r\n\r\n      } catch (ex) {\r\n\r\n          return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperty (model, dbId, displayName, defaultValue) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model.getProperties(dbId, (result) => {\r\n\r\n          if (result.properties) {\r\n\r\n            result.properties.forEach((prop) => {\r\n\r\n              prop.dbId = dbId\r\n\r\n              if (typeof displayName === 'function') {\r\n\r\n                if (displayName (prop.displayName)){\r\n\r\n                  resolve(prop)\r\n                }\r\n\r\n              } else if (displayName === prop.displayName) {\r\n\r\n                resolve(prop)\r\n              }\r\n            })\r\n\r\n            if (defaultValue) {\r\n\r\n              return resolve({\r\n                displayValue: defaultValue,\r\n                displayName,\r\n                dbId\r\n              })\r\n            }\r\n\r\n            reject(new Error('Not Found'))\r\n\r\n          } else {\r\n\r\n            reject(new Error('Error getting properties'));\r\n          }\r\n        })\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets all existing properties from component  dbIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getPropertyList (viewer, dbIds, model = null) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model = model || viewer.activeModel || viewer.model\r\n\r\n        var propertyTasks = dbIds.map((dbId) => {\r\n\r\n          return Toolkit.getProperties(model, dbId)\r\n        })\r\n\r\n        var propertyResults = await Promise.all(\r\n          propertyTasks)\r\n\r\n        var properties = []\r\n\r\n        propertyResults.forEach((propertyResult) => {\r\n\r\n          propertyResult.forEach((prop) => {\r\n\r\n            if (properties.indexOf(prop.displayName) < 0){\r\n\r\n              properties.push(prop.displayName)\r\n            }\r\n          })\r\n        })\r\n\r\n        return resolve(properties.sort())\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getBulkPropertiesAsync (model, dbIds, propFilter) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      if (typeof propFilter === 'function') {\r\n\r\n        const propTasks = dbIds.map((dbId) => {\r\n\r\n          return this.getProperty(\r\n            model, dbId, propFilter, 'Not Found')\r\n        })\r\n\r\n        const propRes = await Promise.all(propTasks)\r\n\r\n        const filteredRes = propRes.filter((res) => {\r\n\r\n          return res.displayValue !== 'Not Found'\r\n        })\r\n\r\n        resolve(filteredRes.map((res) => {\r\n\r\n          return {\r\n            properties: [res],\r\n            dbId: res.dbId\r\n          }\r\n        }))\r\n\r\n      } else {\r\n\r\n        const propFilterArray = Array.isArray (propFilter)\r\n          ? propFilter :[propFilter]\r\n\r\n\r\n        model.getBulkProperties(dbIds, propFilterArray, (result) => {\r\n\r\n          resolve (result)\r\n\r\n        }, (error) => {\r\n\r\n          reject(error)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Maps components by property\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static mapComponentsByProp (model, propFilter, components, defaultProp) {\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const results = await Toolkit.getBulkPropertiesAsync(\r\n          model, components, propFilter)\r\n\r\n        const propertyResults = results.map((result) => {\r\n\r\n          const prop = result.properties[0]\r\n\r\n          return Object.assign({}, prop, {\r\n            dbId: result.dbId\r\n          })\r\n        })\r\n\r\n        var componentsMap = {};\r\n\r\n        propertyResults.forEach((result) => {\r\n\r\n          var value = result.displayValue;\r\n\r\n          if (typeof value == 'string') {\r\n\r\n            value = value.split(':')[0]\r\n          }\r\n\r\n          if (!componentsMap[value]) {\r\n\r\n            componentsMap[value] = []\r\n          }\r\n\r\n          componentsMap[value].push(result.dbId)\r\n        })\r\n\r\n        return resolve(componentsMap)\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // Runs recursively the argument task on each node\r\n  // of the data tree\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  static runTaskOnDataTree(root, taskFunc) {\r\n\r\n    var tasks = [];\r\n\r\n    var runTaskOnDataTreeRec = (node, parent=null)=> {\r\n\r\n      if (node.children) {\r\n\r\n        node.children.forEach((childNode)=> {\r\n\r\n          runTaskOnDataTreeRec(childNode, node);\r\n        });\r\n      }\r\n\r\n      var task = taskFunc(node, parent);\r\n\r\n      tasks.push(task);\r\n    }\r\n\r\n    runTaskOnDataTreeRec(root);\r\n\r\n    return Promise.all(tasks);\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static drawBox (viewer, min, max, material, overlayId) {\r\n\r\n    const geometry = new THREE.Geometry()\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    const lines = new THREE.Line(geometry,\r\n      material, THREE.LinePieces)\r\n\r\n    viewer.impl.addOverlay(overlayId, lines)\r\n\r\n    viewer.impl.invalidate(\r\n      true, true, true)\r\n\r\n    return lines\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Set component material\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async setMaterial(model, dbId, material) {\r\n\r\n    const fragIds = await Toolkit.getFragIds(\r\n      model, dbId)\r\n\r\n    const fragList = model.getFragmentList()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      fragList.setMaterial(fragId, material)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively builds the model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildModelTree (model, createNodeFunc = null){\r\n\r\n    //builds model tree recursively\r\n    function _buildModelTreeRec(node){\r\n\r\n      instanceTree.enumNodeChildren(node.dbId,\r\n        function(childId) {\r\n\r\n          var childNode = null;\r\n\r\n          if(createNodeFunc){\r\n\r\n            childNode = createNodeFunc(childId);\r\n\r\n          } else {\r\n\r\n            node.children = node.children || [];\r\n\r\n            childNode = {\r\n              dbId: childId,\r\n              name: instanceTree.getNodeName(childId)\r\n            }\r\n\r\n            node.children.push(childNode)\r\n          }\r\n\r\n          _buildModelTreeRec(childNode)\r\n        })\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree\r\n\r\n    var rootId = instanceTree.getRootId()\r\n\r\n    var rootNode = {\r\n      dbId: rootId,\r\n      name: instanceTree.getNodeName(rootId)\r\n    }\r\n\r\n    _buildModelTreeRec(rootNode)\r\n\r\n    return rootNode\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively execute task on model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static executeTaskOnModelTree (model, task) {\r\n\r\n    var taskResults = [];\r\n\r\n    function _executeTaskOnModelTreeRec(dbId){\r\n\r\n      instanceTree.enumNodeChildren(dbId,\r\n        function(childId) {\r\n\r\n          taskResults.push(task(model, childId));\r\n\r\n          _executeTaskOnModelTreeRec(childId);\r\n        });\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree;\r\n\r\n    var rootId = instanceTree.getRootId();\r\n\r\n    _executeTaskOnModelTreeRec(rootId);\r\n\r\n    return taskResults;\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static hide (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.hide (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const tasks = targetIds.map((dbId) => {\r\n\r\n        return new Promise((resolve) => {\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, true)\r\n\r\n          resolve()\r\n        })\r\n      })\r\n\r\n      return Promise.all(tasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static show (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.show (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      targetIds.forEach((dbId) => {\r\n\r\n        viewer.impl.visibilityManager.setNodeOff(\r\n          dbId, false)\r\n      })\r\n\r\n      return Promise.resolve()\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async isolateFull (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.isolate(dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const targetLeafIds = await Toolkit.getLeafNodes(\r\n        model, targetIds)\r\n\r\n      const leafIds = await Toolkit.getLeafNodes (model)\r\n\r\n      const leafTasks = leafIds.map((dbId) => {\r\n\r\n        return new Promise((resolveLeaf) => {\r\n\r\n          const show = !targetLeafIds.length  ||\r\n            targetLeafIds.indexOf(dbId) > -1\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, !show)\r\n\r\n          resolveLeaf()\r\n        })\r\n      })\r\n\r\n      return Promise.all(leafTasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Rotate selected fragments\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  static rotateFragments (viewer, fragIds, axis, angle, center, model = null) {\r\n\r\n    var quaternion = new THREE.Quaternion()\r\n\r\n    quaternion.setFromAxisAngle(axis, angle)\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      var fragProxy = viewer.impl.getFragmentProxy(\r\n        model, fragId)\r\n\r\n      fragProxy.getAnimTransform()\r\n\r\n      var position = new THREE.Vector3(\r\n        fragProxy.position.x - center.x,\r\n        fragProxy.position.y - center.y,\r\n        fragProxy.position.z - center.z)\r\n\r\n      position.applyQuaternion(quaternion)\r\n\r\n      position.add(center)\r\n\r\n      fragProxy.position = position\r\n\r\n      fragProxy.quaternion.multiplyQuaternions(\r\n        quaternion, fragProxy.quaternion)\r\n\r\n      fragProxy.updateAnimTransform()\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // A fix for viewer.restoreState\r\n  // that also restores pivotPoint\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static restoreStateWithPivot (\r\n    viewer, state, filter = null, immediate = false) {\r\n\r\n    const onStateRestored = () => {\r\n\r\n      viewer.removeEventListener(\r\n        Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n        onStateRestored)\r\n\r\n      const pivot = state.viewport.pivotPoint\r\n\r\n      setTimeout(() => {\r\n\r\n        viewer.navigation.setPivotPoint(\r\n          new THREE.Vector3(\r\n            pivot[0], pivot[1], pivot[2]))\r\n      }, immediate ? 0 : 1250)\r\n    }\r\n\r\n    viewer.addEventListener(\r\n      Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n      onStateRestored)\r\n\r\n    viewer.restoreState(state, filter, immediate)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getComponentsByParentName (name, model) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const rootId = instanceTree.getRootId()\r\n\r\n    let parentId = 0\r\n\r\n    instanceTree.enumNodeChildren(rootId,\r\n      (childId) => {\r\n\r\n        const nodeName = instanceTree.getNodeName(childId)\r\n\r\n        if (nodeName.indexOf(name) > -1) {\r\n\r\n          parentId = childId\r\n        }\r\n      })\r\n\r\n    return parentId > 0\r\n      ? Toolkit.getLeafNodes(model, parentId)\r\n      : []\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Creates a standard THREE.Mesh out of a Viewer\r\n  // component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildComponentMesh (\r\n    viewer, model, dbId, faceFilter, material) {\r\n\r\n    const vertexArray = []\r\n\r\n    // first we assume the component dbId is a leaf\r\n    // component: ie has no child so contains\r\n    // geometry. This util method will return all fragIds\r\n    // associated with that specific dbId\r\n    const fragIds = Toolkit.getLeafFragIds(model, dbId)\r\n\r\n    let matrixWorld = null\r\n\r\n    const meshGeometry = new THREE.Geometry()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      // for each fragId, get the proxy in order to access\r\n      // THREE geometry\r\n      const renderProxy =\r\n        viewer.impl.getRenderProxy(\r\n          model, fragId)\r\n\r\n      matrixWorld = matrixWorld ||\r\n      renderProxy.matrixWorld\r\n\r\n      const geometry = renderProxy.geometry\r\n\r\n      const attributes = geometry.attributes\r\n\r\n      const positions = geometry.vb\r\n        ? geometry.vb\r\n        : attributes.position.array\r\n\r\n      const indices = attributes.index.array || geometry.ib\r\n\r\n      const stride = geometry.vb ? geometry.vbstride : 3\r\n\r\n      const offsets = [{\r\n        count: indices.length,\r\n        index: 0,\r\n        start: 0\r\n      }]\r\n\r\n      for (var oi = 0, ol = offsets.length; oi < ol; ++oi) {\r\n\r\n        var start = offsets[oi].start\r\n        var count = offsets[oi].count\r\n        var index = offsets[oi].index\r\n\r\n        for (var i = start, il = start + count; i < il; i += 3) {\r\n\r\n          const a = index + indices[i]\r\n          const b = index + indices[i + 1]\r\n          const c = index + indices[i + 2]\r\n\r\n          const vA = new THREE.Vector3()\r\n          const vB = new THREE.Vector3()\r\n          const vC = new THREE.Vector3()\r\n\r\n          vA.fromArray(positions, a * stride)\r\n          vB.fromArray(positions, b * stride)\r\n          vC.fromArray(positions, c * stride)\r\n\r\n          if (!faceFilter || faceFilter(vA, vB, vC)) {\r\n\r\n            const faceIdx = meshGeometry.vertices.length\r\n\r\n            meshGeometry.vertices.push(vA)\r\n            meshGeometry.vertices.push(vB)\r\n            meshGeometry.vertices.push(vC)\r\n\r\n            const face = new THREE.Face3(\r\n              faceIdx, faceIdx + 1, faceIdx + 2)\r\n\r\n            meshGeometry.faces.push(face)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    meshGeometry.applyMatrix(matrixWorld)\r\n    meshGeometry.computeFaceNormals()\r\n    meshGeometry.computeVertexNormals()\r\n\r\n    // creates THREE.Mesh\r\n    const mesh = new THREE.Mesh(\r\n      meshGeometry, material)\r\n\r\n    mesh.dbId = dbId\r\n\r\n    return mesh\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static selectiveExplode (viewer, scale, excludedFragIds, model = null) {\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    var svf = model.getData();\r\n\r\n    var mc = model.getVisibleBounds(true).center();\r\n\r\n    var fragList = model.getFragmentList();\r\n\r\n    var pt = new THREE.Vector3();\r\n\r\n    //Input scale is in the range 0-1, where 0\r\n    //means no displacement, and 1 maximum reasonable displacement.\r\n    scale *= 2;\r\n\r\n    //If we have a full part hierarchy we can use a\r\n    //better grouping strategy when exploding\r\n    if (svf.instanceTree && svf.instanceTree.nodeAccess.nodeBoxes && scale !== 0) {\r\n\r\n      var scaledExplodeDepth = scale * (svf.instanceTree.maxDepth - 1) + 1;\r\n      var explodeDepth = 0 | scaledExplodeDepth;\r\n      var currentSegmentFraction = scaledExplodeDepth - explodeDepth;\r\n\r\n      var it = svf.instanceTree;\r\n      var tmpBox = new Float32Array(6);\r\n\r\n      (function explodeRec(nodeId, depth, cx, cy, cz, ox, oy, oz) {\r\n\r\n        var oscale = scale * 2;\r\n\r\n        // smooth transition of this tree depth\r\n        // from non-exploded to exploded state\r\n        if (depth == explodeDepth)\r\n          oscale *= currentSegmentFraction;\r\n\r\n        it.getNodeBox(nodeId, tmpBox);\r\n\r\n        var mycx = 0.5 * (tmpBox[0] + tmpBox[3]);\r\n        var mycy = 0.5 * (tmpBox[1] + tmpBox[4]);\r\n        var mycz = 0.5 * (tmpBox[2] + tmpBox[5]);\r\n\r\n        if (depth > 0 && depth <= explodeDepth) {\r\n          var dx = (mycx - cx) * oscale;\r\n          var dy = (mycy - cy) * oscale;\r\n          var dz = (mycz - cz) * oscale;\r\n\r\n          //var omax = Math.max(dx, Math.max(dy, dz));\r\n          ox += dx;\r\n          oy += dy;\r\n          oz += dz;\r\n        }\r\n\r\n        svf.instanceTree.enumNodeChildren(nodeId, function(dbId) {\r\n\r\n          explodeRec(dbId, depth+1, mycx, mycy, mycz, ox, oy, oz);\r\n\r\n        }, false);\r\n\r\n        svf.instanceTree.enumNodeFragments(nodeId, function(fragId) {\r\n\r\n          if (excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n            pt.x = ox;\r\n            pt.y = oy;\r\n            pt.z = oz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n\r\n        }, false);\r\n\r\n      })(svf.instanceTree.getRootId(), 0, mc.x, mc.y, mc.x, 0, 0, 0);\r\n\r\n    } else {\r\n\r\n      var boxes = fragList.fragments.boxes;\r\n\r\n      var nbFrags = fragList.getCount()\r\n\r\n      for (var fragId = 0; fragId < nbFrags; ++fragId) {\r\n\r\n        if(excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n          if (scale == 0) {\r\n\r\n            fragList.updateAnimTransform(fragId);\r\n\r\n          } else {\r\n\r\n            var box_offset = fragId * 6;\r\n\r\n            var cx = 0.5 * (boxes[box_offset] + boxes[box_offset + 3]);\r\n            var cy = 0.5 * (boxes[box_offset + 1] + boxes[box_offset + 4]);\r\n            var cz = 0.5 * (boxes[box_offset + 2] + boxes[box_offset + 5]);\r\n\r\n            cx = scale * (cx - mc.x);\r\n            cy = scale * (cy - mc.y);\r\n            cz = scale * (cz - mc.z);\r\n\r\n            pt.x = cx;\r\n            pt.y = cy;\r\n            pt.z = cz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\r\n\r\nexport default MultiModelExtensionBase\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js","import WidgetContainer from './WidgetContainer'\r\n\r\nexport default WidgetContainer\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/WidgetContainer/index.js","import EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class MultiModelExtensionBase extends\r\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}, defaultOptions = {}) {\r\n\r\n    super (viewer)\r\n\r\n    // bindings\r\n\r\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\r\n    this.onObjectTreeCreated  = this.onObjectTreeCreated.bind(this)\r\n    this.onModelRootLoaded    = this.onModelRootLoaded.bind(this)\r\n    this.onExtensionLoaded    = this.onExtensionLoaded.bind(this)\r\n    this.onModelActivated     = this.onModelActivated.bind(this)\r\n    this.onGeometryLoaded     = this.onGeometryLoaded.bind(this)\r\n    this.onToolbarCreated     = this.onToolbarCreated.bind(this)\r\n    this.onModelBeginLoad     = this.onModelBeginLoad.bind(this)\r\n    this.onModelUnloaded      = this.onModelUnloaded.bind(this)\r\n    this.onSelection          = this.onSelection.bind(this)\r\n\r\n    this.__onModelActivated   = this.__onModelActivated.bind(this)\r\n    this.__onModelUnloaded    = this.__onModelUnloaded.bind(this)\r\n    this.__onModelLoaded      = this.__onModelLoaded.bind(this)\r\n\r\n    this.defaultOptions = defaultOptions\r\n\r\n    this.options = Object.assign({},\r\n      defaultOptions,\r\n      options)\r\n\r\n    this.viewer = viewer\r\n\r\n    // read the modelQueue to detect currently loaded models\r\n    // when the extension gets loaded\r\n    const models = viewer.impl.modelQueue().getModels()\r\n\r\n    this.models = models.map((model) => {\r\n\r\n      model.guid = model.guid || this.guid()\r\n\r\n      return model\r\n    })\r\n\r\n    this.initializeEvents ()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.MultiModelExtensionBase'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewer.removeEventListener(\r\n        event.id, this[event.handler])\r\n    })\r\n\r\n    if (this.eventSink) {\r\n\r\n      this.eventSink.off('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.off('model.unloaded',\r\n        this.__onModelUnloaded)\r\n\r\n      this.eventSink.off('model.loaded',\r\n        this.__onModelLoaded)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Reload callback, in case the extension is re-loaded\r\n  // more than once\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  reload (options = {}) {\r\n\r\n    this.options = Object.assign({},\r\n      this.defaultOptions,\r\n      this.options,\r\n      options)\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when extension gets loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onExtensionLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onExtensionLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when the model starts to load\r\n  // The geometry and instanceTree may not be available\r\n  // at this time\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelBeginLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelBeginLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model is\r\n  // selected in a multi-model environment\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelActivated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelActivated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when model root node has been loaded\r\n  // Extensions that do not require access to full\r\n  // model geometry or component tree may use that\r\n  // event to know a new model has been loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelRootLoaded (event) {\r\n\r\n    this.viewerEvent([\r\n\r\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\r\n\r\n    ]).then((args) => {\r\n\r\n      this.onModelCompletedLoad (args[0])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when object tree is fully loaded.\r\n  // Extensions that are interested in using the\r\n  // instanceTree need to use that event to make sure\r\n  // it is available\r\n  //\r\n  ////////////////////////////////////////////////////////\r\n  onObjectTreeCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onObjectTreeCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when geometry is fully loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onGeometryLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onGeometryLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\r\n  // have both been fired\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelCompletedLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelCompletedLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked once the viewer toolbar has been created\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onToolbarCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onToolbarCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model has\r\n  // been unloaded as per user request\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelUnloaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelUnloaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when a model is being selected\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSelection (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onSelection')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //Sink Events\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  __onModelLoaded (event) {\r\n\r\n    this.models = [...this.models, event.model]\r\n\r\n    this.onModelBeginLoad (event)\r\n  }\r\n\r\n  __onModelActivated (event) {\r\n\r\n    this.onModelActivated (event)\r\n  }\r\n\r\n  __onModelUnloaded (event) {\r\n\r\n    this.models = this.models.filter((model) => {\r\n\r\n      return model.guid !== event.model.guid\r\n    })\r\n\r\n    this.onModelUnloaded(event)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Initialize all events for the extension\r\n  // Each event will invoke a predefined handler\r\n  // implemented or not by the derived extension\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  initializeEvents () {\r\n\r\n    if (this.options.eventSink) {\r\n\r\n      // event object passed in options\r\n      this.eventSink = this.options.eventSink\r\n\r\n      this.eventSink.on('model.loaded',\r\n        this.__onModelLoaded)\r\n\r\n      this.eventSink.on('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.on('model.unloaded',\r\n        this.__onModelUnloaded)\r\n    }\r\n\r\n    this.viewerEvents = [\r\n      {\r\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\r\n        handler: 'onExtensionLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n        handler: 'onObjectTreeCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\r\n        handler: 'onModelRootLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\r\n        handler: 'onGeometryLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\r\n        handler: 'onToolbarCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n        handler: 'onSelection'\r\n      }\r\n    ]\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewerEvent(event.id, this[event.handler])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Async viewer event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  viewerEvent (eventId, handler) {\r\n\r\n    if (handler) {\r\n\r\n      this.viewer.addEventListener (eventId, handler)\r\n      return\r\n    }\r\n\r\n    const eventIdArray = Array.isArray(eventId)\r\n      ? eventId : [eventId]\r\n\r\n    const eventTasks = eventIdArray.map((id) => {\r\n      return new Promise ((resolve) => {\r\n        const __handler = (args) => {\r\n          this.viewer.removeEventListener (id, __handler)\r\n          resolve (args)\r\n        }\r\n        this.viewer.addEventListener (id, __handler)\r\n      })\r\n    })\r\n\r\n    return Promise.all (eventTasks)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","import PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport './WidgetContainer.scss'\r\nimport React from 'react'\r\n\r\nclass WidgetContainer extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    showTitle: PropTypes.bool\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static defaultProps = {\r\n    showTitle: true,\r\n    className: ''\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderTitle () {\r\n\r\n    if (!this.props.showTitle) {\r\n\r\n      return <div/>\r\n    }\r\n\r\n    if (this.props.renderTitle) {\r\n\r\n      return this.props.renderTitle()\r\n    }\r\n\r\n    return (\r\n      <div className=\"title\">\r\n        <label>\r\n          { this.props.title }\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  renderChildren() {\r\n\r\n    if (this.props.dimensions) {\r\n\r\n      return React.Children.map(this.props.children, (child) => {\r\n\r\n        const newProps = Object.assign({},\r\n          child.props, {\r\n            dimensions: this.props.dimensions\r\n          })\r\n\r\n        return React.cloneElement(child, newProps)\r\n      })\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  render() {\r\n\r\n    const classNames = [\r\n      'widget-container',\r\n      ...this.props.className.split(' ')\r\n    ]\r\n\r\n    const height = this.props.showTitle\r\n      ? 'calc(100% - 40px)'\r\n      : '100%'\r\n\r\n    return (\r\n      <div className={classNames.join(' ')} style={this.props.style}>\r\n         { this.renderTitle() }\r\n        <div className=\"content\" style={{height}}>\r\n          {this.renderChildren()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WidgetContainer\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/WidgetContainer/WidgetContainer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/WidgetContainer/WidgetContainer.scss\n// module id = 1031\n// module chunks = 0 10 11 12 13 14 15 16 19 21 24 25 26 28 29 31 32 33 35 36 37 39 40",";(function(factory) {\n    'use strict';\n    /* global window: false, define: false, module: false */\n    var root = typeof window === 'undefined' ? null : window;\n\n    if (typeof define === 'function' && define.amd) {\n        define(function(){ return factory(root); });\n    } else if (typeof module !== 'undefined') {\n        module.exports = factory(root);\n    } else {\n        root.DOMPurify = factory(root);\n    }\n}(function factory(window) {\n    'use strict';\n\n    var DOMPurify = function(window) {\n        return factory(window);\n    };\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '0.8.9';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n\n    if (!window || !window.document || window.document.nodeType !== 9) {\n        // not running in a browser, provide a factory function\n        // so that you can pass your own Window\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n    }\n\n    var document = window.document;\n    var originalDocument = document;\n    var DocumentFragment = window.DocumentFragment;\n    var HTMLTemplateElement = window.HTMLTemplateElement;\n    var Node = window.Node;\n    var NodeFilter = window.NodeFilter;\n    var NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap;\n    var Text = window.Text;\n    var Comment = window.Comment;\n    var DOMParser = window.DOMParser;\n    var useDOMParser = false; // See comment below\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n            document = template.content.ownerDocument;\n        }\n    }\n    var implementation = document.implementation;\n    var createNodeIterator = document.createNodeIterator;\n    var getElementsByTagName = document.getElementsByTagName;\n    var createDocumentFragment = document.createDocumentFragment;\n    var importNode = originalDocument.importNode;\n\n    var hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported =\n        typeof implementation.createHTMLDocument !== 'undefined' &&\n        document.documentMode !== 9;\n\n    /* Add properties to a lookup table */\n    var _addToSet = function(set, array) {\n        var l = array.length;\n        while (l--) {\n            if (typeof array[l] === 'string') {\n                array[l] = array[l].toLowerCase();\n            }\n            set[array[l]] = true;\n        }\n        return set;\n    };\n\n    /* Shallow clone an object */\n    var _cloneObj = function(object) {\n        var newObject = {};\n        var property;\n        for (property in object) {\n            if (object.hasOwnProperty(property)) {\n                newObject[property] = object[property];\n            }\n        }\n        return newObject;\n    };\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n    var ALLOWED_TAGS = null;\n    var DEFAULT_ALLOWED_TAGS = _addToSet({}, [\n\n        // HTML\n        'a','abbr','acronym','address','area','article','aside','audio','b',\n        'bdi','bdo','big','blink','blockquote','body','br','button','canvas',\n        'caption','center','cite','code','col','colgroup','content','data',\n        'datalist','dd','decorator','del','details','dfn','dir','div','dl','dt',\n        'element','em','fieldset','figcaption','figure','font','footer','form',\n        'h1','h2','h3','h4','h5','h6','head','header','hgroup','hr','html','i',\n        'img','input','ins','kbd','label','legend','li','main','map','mark',\n        'marquee','menu','menuitem','meter','nav','nobr','ol','optgroup',\n        'option','output','p','pre','progress','q','rp','rt','ruby','s','samp',\n        'section','select','shadow','small','source','spacer','span','strike',\n        'strong','style','sub','summary','sup','table','tbody','td','template',\n        'textarea','tfoot','th','thead','time','tr','track','tt','u','ul','var',\n        'video','wbr',\n\n        // SVG\n        'svg','altglyph','altglyphdef','altglyphitem','animatecolor',\n        'animatemotion','animatetransform','circle','clippath','defs','desc',\n        'ellipse','filter','font','g','glyph','glyphref','hkern','image','line',\n        'lineargradient','marker','mask','metadata','mpath','path','pattern',\n        'polygon','polyline','radialgradient','rect','stop','switch','symbol',\n        'text','textpath','title','tref','tspan','view','vkern',\n\n        // SVG Filters\n        'feBlend','feColorMatrix','feComponentTransfer','feComposite',\n        'feConvolveMatrix','feDiffuseLighting','feDisplacementMap',\n        'feFlood','feFuncA','feFuncB','feFuncG','feFuncR','feGaussianBlur',\n        'feMerge','feMergeNode','feMorphology','feOffset',\n        'feSpecularLighting','feTile','feTurbulence',\n\n        //MathML\n        'math','menclose','merror','mfenced','mfrac','mglyph','mi','mlabeledtr',\n        'mmuliscripts','mn','mo','mover','mpadded','mphantom','mroot','mrow',\n        'ms','mpspace','msqrt','mystyle','msub','msup','msubsup','mtable','mtd',\n        'mtext','mtr','munder','munderover',\n\n        //Text\n        '#text'\n    ]);\n\n    /* Allowed attribute names */\n    var ALLOWED_ATTR = null;\n    var DEFAULT_ALLOWED_ATTR = _addToSet({}, [\n\n        // HTML\n        'accept','action','align','alt','autocomplete','background','bgcolor',\n        'border','cellpadding','cellspacing','checked','cite','class','clear','color',\n        'cols','colspan','coords','datetime','default','dir','disabled',\n        'download','enctype','face','for','headers','height','hidden','high','href',\n        'hreflang','id','ismap','label','lang','list','loop', 'low','max',\n        'maxlength','media','method','min','multiple','name','noshade','novalidate',\n        'nowrap','open','optimum','pattern','placeholder','poster','preload','pubdate',\n        'radiogroup','readonly','rel','required','rev','reversed','role','rows',\n        'rowspan','spellcheck','scope','selected','shape','size','span',\n        'srclang','start','src','step','style','summary','tabindex','title',\n        'type','usemap','valign','value','width','xmlns',\n\n        // SVG\n        'accent-height','accumulate','additivive','alignment-baseline',\n        'ascent','attributename','attributetype','azimuth','basefrequency',\n        'baseline-shift','begin','bias','by','clip','clip-path','clip-rule',\n        'color','color-interpolation','color-interpolation-filters','color-profile',\n        'color-rendering','cx','cy','d','dx','dy','diffuseconstant','direction',\n        'display','divisor','dur','edgemode','elevation','end','fill','fill-opacity',\n        'fill-rule','filter','flood-color','flood-opacity','font-family','font-size',\n        'font-size-adjust','font-stretch','font-style','font-variant','font-weight',\n        'fx', 'fy','g1','g2','glyph-name','glyphref','gradientunits','gradienttransform',\n        'image-rendering','in','in2','k','k1','k2','k3','k4','kerning','keypoints',\n        'keysplines','keytimes','lengthadjust','letter-spacing','kernelmatrix',\n        'kernelunitlength','lighting-color','local','marker-end','marker-mid',\n        'marker-start','markerheight','markerunits','markerwidth','maskcontentunits',\n        'maskunits','max','mask','mode','min','numoctaves','offset','operator',\n        'opacity','order','orient','orientation','origin','overflow','paint-order',\n        'path','pathlength','patterncontentunits','patterntransform','patternunits',\n        'points','preservealpha','r','rx','ry','radius','refx','refy','repeatcount',\n        'repeatdur','restart','result','rotate','scale','seed','shape-rendering',\n        'specularconstant','specularexponent','spreadmethod','stddeviation','stitchtiles',\n        'stop-color','stop-opacity','stroke-dasharray','stroke-dashoffset','stroke-linecap',\n        'stroke-linejoin','stroke-miterlimit','stroke-opacity','stroke','stroke-width',\n        'surfacescale','targetx','targety','transform','text-anchor','text-decoration',\n        'text-rendering','textlength','u1','u2','unicode','values','viewbox',\n        'visibility','vert-adv-y','vert-origin-x','vert-origin-y','word-spacing',\n        'wrap','writing-mode','xchannelselector','ychannelselector','x','x1','x2',\n        'y','y1','y2','z','zoomandpan',\n\n        // MathML\n        'accent','accentunder','bevelled','close','columnsalign','columnlines',\n        'columnspan','denomalign','depth','display','displaystyle','fence',\n        'frame','largeop','length','linethickness','lspace','lquote',\n        'mathbackground','mathcolor','mathsize','mathvariant','maxsize',\n        'minsize','movablelimits','notation','numalign','open','rowalign',\n        'rowlines','rowspacing','rowspan','rspace','rquote','scriptlevel',\n        'scriptminsize','scriptsizemultiplier','selection','separator',\n        'separators','stretchy','subscriptshift','supscriptshift','symmetric',\n        'voffset',\n\n        // XML\n        'xlink:href','xml:id','xlink:title','xml:space','xmlns:xlink'\n    ]);\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    var FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    var FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    var ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    var ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Output should be safe for jQuery's $() factory? */\n    var SAFE_FOR_JQUERY = false;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    var SAFE_FOR_TEMPLATES = false;\n\n    /* Specify template detection regex for SAFE_FOR_TEMPLATES mode */\n    var MUSTACHE_EXPR = /\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm;\n    var ERB_EXPR = /<%[\\s\\S]*|[\\s\\S]*%>/gm;\n\n    /* Decide if document with <html>... should be returned */\n    var WHOLE_DOCUMENT = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    var FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html string.\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    var RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html string */\n    var RETURN_DOM_FRAGMENT = false;\n\n    /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n     * `Node` is imported into the current `Document`. If this flag is not enabled the\n     * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n     * DOMPurify. */\n    var RETURN_DOM_IMPORT = false;\n\n    /* Output should be free from DOM clobbering attacks? */\n    var SANITIZE_DOM = true;\n\n    /* Keep element content when removing element? */\n    var KEEP_CONTENT = true;\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    var FORBID_CONTENTS = _addToSet({}, [\n        'audio', 'head', 'math', 'script', 'style', 'template', 'svg', 'video'\n    ]);\n\n    /* Tags that are safe for data: URIs */\n    var DATA_URI_TAGS = _addToSet({}, [\n        'audio', 'video', 'img', 'source', 'image'\n    ]);\n\n    /* Attributes safe for values like \"javascript:\" */\n    var URI_SAFE_ATTRIBUTES = _addToSet({}, [\n        'alt','class','for','id','label','name','pattern','placeholder',\n        'summary','title','value','style','xmlns'\n    ]);\n\n    /* Keep a reference to config to pass to hooks */\n    var CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    var formElement = document.createElement('form');\n\n    /**\n     * _parseConfig\n     *\n     * @param  optional config literal\n     */\n    var _parseConfig = function(cfg) {\n        /* Shield configuration object from tampering */\n        if (typeof cfg !== 'object') {\n            cfg = {};\n        }\n\n        /* Set configuration parameters */\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ?\n            _addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ?\n            _addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ?\n            _addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ?\n            _addToSet({}, cfg.FORBID_ATTR) : {};\n        ALLOW_ARIA_ATTR     = cfg.ALLOW_ARIA_ATTR     !== false; // Default true\n        ALLOW_DATA_ATTR     = cfg.ALLOW_DATA_ATTR     !== false; // Default true\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n        SAFE_FOR_JQUERY     = cfg.SAFE_FOR_JQUERY     ||  false; // Default false\n        SAFE_FOR_TEMPLATES  = cfg.SAFE_FOR_TEMPLATES  ||  false; // Default false\n        WHOLE_DOCUMENT      = cfg.WHOLE_DOCUMENT      ||  false; // Default false\n        RETURN_DOM          = cfg.RETURN_DOM          ||  false; // Default false\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT ||  false; // Default false\n        RETURN_DOM_IMPORT   = cfg.RETURN_DOM_IMPORT   ||  false; // Default false\n        FORCE_BODY          = cfg.FORCE_BODY          ||  false; // Default false\n        SANITIZE_DOM        = cfg.SANITIZE_DOM        !== false; // Default true\n        KEEP_CONTENT        = cfg.KEEP_CONTENT        !== false; // Default true\n\n        if (SAFE_FOR_TEMPLATES) {\n            ALLOW_DATA_ATTR = false;\n        }\n\n        if (RETURN_DOM_FRAGMENT) {\n            RETURN_DOM = true;\n        }\n\n        /* Merge configuration parameters */\n        if (cfg.ADD_TAGS) {\n            if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n                ALLOWED_TAGS = _cloneObj(ALLOWED_TAGS);\n            }\n            _addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n            if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n                ALLOWED_ATTR = _cloneObj(ALLOWED_ATTR);\n            }\n            _addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n            _addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n\n        /* Add #text in case KEEP_CONTENT is set to true */\n        if (KEEP_CONTENT) { ALLOWED_TAGS['#text'] = true; }\n\n        // Prevent further manipulation of configuration.\n        // Not available in IE8, Safari 5, etc.\n        if (Object && 'freeze' in Object) { Object.freeze(cfg); }\n\n        CONFIG = cfg;\n    };\n\n   /**\n     * _forceRemove\n     *\n     * @param  a DOM node\n     */\n    var _forceRemove = function(node) {\n        DOMPurify.removed.push({element: node});\n        try {\n            node.parentNode.removeChild(node);\n        } catch (e) {\n            node.outerHTML = '';\n        }\n    };\n\n   /**\n     * _removeAttribute\n     *\n     * @param  an Attribute name\n     * @param  a DOM node\n     */\n    var _removeAttribute = function(name, node) {\n        DOMPurify.removed.push({\n            attribute: node.getAttributeNode(name),\n            from: node\n        });\n        node.removeAttribute(name);\n    };\n\n   /**\n     * _initDocument\n     *\n     * @param  a string of dirty markup\n     * @return a DOM, filled with the dirty markup\n     */\n    var _initDocument = function(dirty) {\n        /* Create a HTML document */\n        var doc, body;\n\n        /* Fill body with bogus element */\n        if (FORCE_BODY) {\n            dirty = '<remove></remove>' + dirty;\n        }\n\n        /* Use DOMParser to workaround Firefox bug (see comment below) */\n        if (useDOMParser) {\n            try {\n                doc = new DOMParser().parseFromString(dirty, 'text/html');\n            } catch (e) {}\n        }\n\n        /* Otherwise use createHTMLDocument, because DOMParser is unsafe in\n           Safari (see comment below) */\n        if (!doc || !doc.documentElement) {\n            doc = implementation.createHTMLDocument('');\n            body = doc.body;\n            body.parentNode.removeChild(body.parentNode.firstElementChild);\n            body.outerHTML = dirty;\n        }\n\n        /* Work on whole document or just its body */\n        return getElementsByTagName.call(doc,\n            WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    };\n\n    // Safari 10.1+ (unfixed as of time of writing) has a catastrophic bug in\n    // its implementation of DOMParser such that the following executes the\n    // JavaScript:\n    //\n    // new DOMParser()\n    //   .parseFromString('<svg onload=alert(document.domain)>', 'text/html');\n    //\n    // However, Firefox uses a different parser for innerHTML rather than\n    // DOMParser (see https://bugzilla.mozilla.org/show_bug.cgi?id=1205631)\n    // which means that you *must* use DOMParser, otherwise the output may\n    // not be safe if used in a document.write context later.\n    //\n    // So we feature detect the Firefox bug and use the DOMParser if necessary.\n    if (DOMPurify.isSupported) {\n        (function () {\n            var doc = _initDocument('<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">');\n            if (doc.querySelector('svg img')) {\n                useDOMParser = true;\n            }\n        }());\n    }\n\n    /**\n     * _createIterator\n     *\n     * @param  document/fragment to create iterator for\n     * @return iterator instance\n     */\n    var _createIterator = function(root) {\n        return createNodeIterator.call(root.ownerDocument || root,\n            root,\n            NodeFilter.SHOW_ELEMENT\n            | NodeFilter.SHOW_COMMENT\n            | NodeFilter.SHOW_TEXT,\n            function() { return NodeFilter.FILTER_ACCEPT; },\n            false\n        );\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  element to check for clobbering attacks\n     * @return true if clobbered, false if safe\n     */\n    var _isClobbered = function(elm) {\n        if (elm instanceof Text || elm instanceof Comment) {\n            return false;\n        }\n        if (  typeof elm.nodeName !== 'string'\n           || typeof elm.textContent !== 'string'\n           || typeof elm.removeChild !== 'function'\n           || !(elm.attributes instanceof NamedNodeMap)\n           || typeof elm.removeAttribute !== 'function'\n           || typeof elm.setAttribute !== 'function'\n        ) {\n            return true;\n        }\n        return false;\n    };\n\n    /**\n     * _isNode\n     *\n     * @param object to check whether it's a DOM node\n     * @return true is object is a DOM node\n     */\n    var _isNode = function(obj) {\n        return (\n            typeof Node === \"object\" ? obj instanceof Node : obj\n                && typeof obj === \"object\" && typeof obj.nodeType === \"number\"\n                && typeof obj.nodeName===\"string\"\n        );\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   node to check for permission to exist\n     * @return  true if node was killed, false if left alive\n     */\n    var _sanitizeElements = function(currentNode) {\n        var tagName, content;\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeElements', currentNode, null);\n\n        /* Check if element is clobbered or can clobber */\n        if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n            return true;\n        }\n\n        /* Now let's check the element's type and name */\n        tagName = currentNode.nodeName.toLowerCase();\n\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeElement', currentNode, {\n            tagName: tagName,\n            allowedTags: ALLOWED_TAGS\n        });\n\n        /* Remove element if anything forbids its presence */\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            /* Keep content except for black-listed elements */\n            if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]\n                    && typeof currentNode.insertAdjacentHTML === 'function') {\n                try {\n                    currentNode.insertAdjacentHTML('AfterEnd', currentNode.innerHTML);\n                } catch (e) {}\n            }\n            _forceRemove(currentNode);\n            return true;\n        }\n\n        /* Convert markup to cover jQuery behavior */\n        if (SAFE_FOR_JQUERY && !currentNode.firstElementChild &&\n                (!currentNode.content || !currentNode.content.firstElementChild) &&\n                /</g.test(currentNode.textContent)) {\n            DOMPurify.removed.push({element: currentNode.cloneNode()});\n            currentNode.innerHTML = currentNode.textContent.replace(/</g, '&lt;');\n        }\n\n        /* Sanitize element content to be template-safe */\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n            /* Get the element's text content */\n            content = currentNode.textContent;\n            content = content.replace(MUSTACHE_EXPR, ' ');\n            content = content.replace(ERB_EXPR, ' ');\n            if (currentNode.textContent !== content) {\n                DOMPurify.removed.push({element: currentNode.cloneNode()});\n                currentNode.textContent = content;\n            }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeElements', currentNode, null);\n\n        return false;\n    };\n\n    var DATA_ATTR = /^data-[\\-\\w.\\u00B7-\\uFFFF]/;\n    var ARIA_ATTR = /^aria-[\\-\\w]+$/;\n    var IS_ALLOWED_URI = /^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i;\n    var IS_SCRIPT_OR_DATA = /^(?:\\w+script|data):/i;\n    /* This needs to be extensive thanks to Webkit/Blink's behavior */\n    var ATTR_WHITESPACE = /[\\x00-\\x20\\xA0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g;\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param   node to sanitize\n     * @return  void\n     */\n    var _sanitizeAttributes = function(currentNode) {\n        var attr, name, value, lcName, idAttr, attributes, hookEvent, l;\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n        attributes = currentNode.attributes;\n\n        /* Check if we have attributes; if not we might have a text node */\n        if (!attributes) { return; }\n\n        hookEvent = {\n            attrName: '',\n            attrValue: '',\n            keepAttr: true,\n            allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n\n        /* Go backwards over all attributes; safely remove bad ones */\n        while (l--) {\n            attr = attributes[l];\n            name = attr.name;\n            value = attr.value.trim();\n            lcName = name.toLowerCase();\n\n            /* Execute a hook if present */\n            hookEvent.attrName = lcName;\n            hookEvent.attrValue = value;\n            hookEvent.keepAttr = true;\n            _executeHook('uponSanitizeAttribute', currentNode, hookEvent );\n            value = hookEvent.attrValue;\n\n            /* Remove attribute */\n            // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n            // remove a \"name\" attribute from an <img> tag that has an \"id\"\n            // attribute at the time.\n            if (lcName === 'name'  &&\n                    currentNode.nodeName === 'IMG' && attributes.id) {\n                idAttr = attributes.id;\n                attributes = Array.prototype.slice.apply(attributes);\n                _removeAttribute('id', currentNode);\n                _removeAttribute(name, currentNode);\n                if (attributes.indexOf(idAttr) > l) {\n                    currentNode.setAttribute('id', idAttr.value);\n                }\n            } else if (\n                  // This works around a bug in Safari, where input[type=file]\n                  // cannot be dynamically set after type has been removed\n                  currentNode.nodeName === 'INPUT' && lcName === 'type' &&\n                  value === 'file' && (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])) {\n                  continue;\n            } else {\n                // This avoids a crash in Safari v9.0 with double-ids.\n                // The trick is to first set the id to be empty and then to\n                // remove the attribute\n                if (name === 'id') {\n                    currentNode.setAttribute(name, '');\n                }\n                _removeAttribute(name, currentNode);\n            }\n\n            /* Did the hooks approve of the attribute? */\n            if (!hookEvent.keepAttr) {\n                continue;\n            }\n\n            /* Make sure attribute cannot clobber */\n            if (SANITIZE_DOM &&\n                    (lcName === 'id' || lcName === 'name') &&\n                    (value in window || value in document || value in formElement)) {\n                continue;\n            }\n\n            /* Sanitize attribute content to be template-safe */\n            if (SAFE_FOR_TEMPLATES) {\n                value = value.replace(MUSTACHE_EXPR, ' ');\n                value = value.replace(ERB_EXPR, ' ');\n            }\n\n            /* Allow valid data-* attributes: At least one character after \"-\"\n               (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n               XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n               We don't need to check the value; it's always URI safe. */\n            if (ALLOW_DATA_ATTR && DATA_ATTR.test(lcName)) {\n                // This attribute is safe\n            }\n            else if (ALLOW_ARIA_ATTR && ARIA_ATTR.test(lcName)) {\n                // This attribute is safe\n            }\n            /* Otherwise, check the name is permitted */\n            else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n                continue;\n            }\n            /* Check value is safe. First, is attr inert? If so, is safe */\n            else if (URI_SAFE_ATTRIBUTES[lcName]) {\n                // This attribute is safe\n            }\n            /* Check no script, data or unknown possibly unsafe URI\n               unless we know URI values are safe for that attribute */\n            else if (IS_ALLOWED_URI.test(value.replace(ATTR_WHITESPACE,''))) {\n                // This attribute is safe\n            }\n            /* Keep image data URIs alive if src/xlink:href is allowed */\n            else if (\n                (lcName === 'src' || lcName === 'xlink:href') &&\n                value.indexOf('data:') === 0 &&\n                DATA_URI_TAGS[currentNode.nodeName.toLowerCase()]) {\n                // This attribute is safe\n            }\n            /* Allow unknown protocols: This provides support for links that\n               are handled by protocol handlers which may be unknown ahead of\n               time, e.g. fb:, spotify: */\n            else if (\n                ALLOW_UNKNOWN_PROTOCOLS &&\n                !IS_SCRIPT_OR_DATA.test(value.replace(ATTR_WHITESPACE,''))) {\n                // This attribute is safe\n            }\n            /* Check for binary attributes */\n            else if (!value) {\n                // binary attributes are safe at this point\n            }\n            /* Anything else, presume unsafe, do not add it back */\n            else {\n                continue;\n            }\n\n            /* Handle invalid data-* attribute set by try-catching it */\n            try {\n                currentNode.setAttribute(name, value);\n                DOMPurify.removed.pop();\n            } catch (e) {}\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  fragment to iterate over recursively\n     * @return void\n     */\n    var _sanitizeShadowDOM = function(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n        while ( (shadowNode = shadowIterator.nextNode()) ) {\n            /* Execute a hook if present */\n            _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n            /* Sanitize tags and elements */\n            if (_sanitizeElements(shadowNode)) {\n                continue;\n            }\n\n            /* Deep shadow DOM detected */\n            if (shadowNode.content instanceof DocumentFragment) {\n                _sanitizeShadowDOM(shadowNode.content);\n            }\n\n            /* Check attributes, sanitize if necessary */\n            _sanitizeAttributes(shadowNode);\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode\n     */\n    var _executeHook = function(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) { return; }\n\n        hooks[entryPoint].forEach(function(hook) {\n            hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n    };\n\n    /**\n     * sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} configuration object\n     */\n    DOMPurify.sanitize = function(dirty, cfg) {\n        var body, importedNode, currentNode, oldNode, nodeIterator, returnNode;\n        /* Make sure we have a string to sanitize.\n           DO NOT return early, as this will return the wrong type if\n           the user has requested a DOM object rather than a string */\n        if (!dirty) {\n            dirty = '<!-->';\n        }\n\n        /* Stringify, in case dirty is an object */\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n            if (typeof dirty.toString !== 'function') {\n                throw new TypeError('toString is not a function');\n            } else {\n                dirty = dirty.toString();\n            }\n        }\n\n        /* Check we can run. Otherwise fall back or ignore */\n        if (!DOMPurify.isSupported) {\n            if (typeof window.toStaticHTML === 'object'\n                || typeof window.toStaticHTML === 'function') {\n                if (typeof dirty === 'string') {\n                    return window.toStaticHTML(dirty);\n                } else if (_isNode(dirty)) {\n                    return window.toStaticHTML(dirty.outerHTML);\n                }\n            }\n            return dirty;\n        }\n\n        /* Assign config vars */\n        _parseConfig(cfg);\n\n        /* Clean up removed elements */\n        DOMPurify.removed = [];\n\n        if (dirty instanceof Node) {\n            /* If dirty is a DOM element, append to an empty document to avoid\n               elements being stripped by the parser */\n            body = _initDocument('<!-->');\n            importedNode = body.ownerDocument.importNode(dirty, true);\n            if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n                /* Node is already a body, use as is */\n                body = importedNode;\n            } else {\n                body.appendChild(importedNode);\n            }\n        } else {\n            /* Exit directly if we have nothing to do */\n            if (!RETURN_DOM && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n                return dirty;\n            }\n\n            /* Initialize the document to work on */\n            body = _initDocument(dirty);\n\n            /* Check we have a DOM node from the data */\n            if (!body) {\n                return RETURN_DOM ? null : '';\n            }\n        }\n\n        /* Remove first element node (ours) if FORCE_BODY is set */\n        if (FORCE_BODY) {\n            _forceRemove(body.firstChild);\n        }\n\n        /* Get node iterator */\n        nodeIterator = _createIterator(body);\n\n        /* Now start iterating over the created document */\n        while ( (currentNode = nodeIterator.nextNode()) ) {\n\n            /* Fix IE's strange behavior with manipulated textNodes #89 */\n            if (currentNode.nodeType === 3 && currentNode === oldNode) {\n                continue;\n            }\n\n            /* Sanitize tags and elements */\n            if (_sanitizeElements(currentNode)) {\n                continue;\n            }\n\n            /* Shadow DOM detected, sanitize it */\n            if (currentNode.content instanceof DocumentFragment) {\n                _sanitizeShadowDOM(currentNode.content);\n            }\n\n            /* Check attributes, sanitize if necessary */\n            _sanitizeAttributes(currentNode);\n\n            oldNode = currentNode;\n        }\n\n        /* Return sanitized string or DOM */\n        if (RETURN_DOM) {\n\n            if (RETURN_DOM_FRAGMENT) {\n                returnNode = createDocumentFragment.call(body.ownerDocument);\n\n                while (body.firstChild) {\n                    returnNode.appendChild(body.firstChild);\n                }\n            } else {\n                returnNode = body;\n            }\n\n            if (RETURN_DOM_IMPORT) {\n                /* adoptNode() is not used because internal state is not reset\n                   (e.g. the past names map of a HTMLFormElement), this is safe\n                   in theory but we would rather not risk another attack vector.\n                   The state that is cloned by importNode() is explicitly defined\n                   by the specs. */\n                returnNode = importNode.call(originalDocument, returnNode, true);\n            }\n\n            return returnNode;\n        }\n\n        return WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    };\n\n    /**\n     * addHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint\n     * @param {Function} hookFunction\n     */\n    DOMPurify.addHook = function(entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') { return; }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        hooks[entryPoint].push(hookFunction);\n    };\n\n    /**\n     * removeHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint\n     * @return void\n     */\n    DOMPurify.removeHook = function(entryPoint) {\n        if (hooks[entryPoint]) {\n            hooks[entryPoint].pop();\n        }\n    };\n\n    /**\n     * removeHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint\n     * @return void\n     */\n    DOMPurify.removeHooks = function(entryPoint) {\n        if (hooks[entryPoint]) {\n            hooks[entryPoint] = [];\n        }\n    };\n\n    /**\n     * removeAllHooks\n     * Public method to remove all DOMPurify hooks\n     *\n     * @return void\n     */\n    DOMPurify.removeAllHooks = function() {\n        hooks = {};\n    };\n\n    return DOMPurify;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/dompurify/src/purify.js\n// module id = 1032\n// module chunks = 1 3 10 11 14 15 16 17 18 19 21 24 25 28 29 31 32 38 39 41","import Label from './Label'\r\n\r\nexport default Label\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Label/index.js","import PropTypes from 'prop-types'\r\nimport DOMPurify from 'dompurify'\r\nimport ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport './Label.scss'\r\n\r\nexport default class Label extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static propTypes = {\r\n    textAlign: PropTypes.string,\r\n    className: PropTypes.string,\r\n    text: PropTypes.string\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static defaultProps = {\r\n    textAlign: 'left',\r\n    className: '',\r\n    text: ''\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (props) {\r\n\r\n    super (props)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render () {\r\n\r\n    const classNames = [\r\n      'label-container',\r\n      ...this.props.className.split(' ')\r\n    ]\r\n\r\n    const style = {\r\n      width: this.props.textAlign === 'center'\r\n        ? '100%' : '',\r\n      textAlign: this.props.textAlign\r\n    }\r\n\r\n    return(\r\n      <div className={classNames.join(' ')}\r\n        style={style}>\r\n        <p>\r\n          { DOMPurify.sanitize(this.props.text) }\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Label/Label.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/Label/Label.scss\n// module id = 1037\n// module chunks = 1 10 11 14 15 16 17 18 19 24 25 28 29 31 32 38 39 41","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ContentEditable = function (_React$Component) {\n  _inherits(ContentEditable, _React$Component);\n\n  function ContentEditable() {\n    _classCallCheck(this, ContentEditable);\n\n    var _this = _possibleConstructorReturn(this, (ContentEditable.__proto__ || Object.getPrototypeOf(ContentEditable)).call(this));\n\n    _this.emitChange = _this.emitChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(ContentEditable, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          tagName = _props.tagName,\n          html = _props.html,\n          props = _objectWithoutProperties(_props, ['tagName', 'html']);\n\n      return _react2.default.createElement(tagName || 'div', _extends({}, props, {\n        ref: function ref(e) {\n          return _this2.htmlEl = e;\n        },\n        onInput: this.emitChange,\n        onBlur: this.props.onBlur || this.emitChange,\n        contentEditable: !this.props.disabled,\n        dangerouslySetInnerHTML: { __html: html }\n      }), this.props.children);\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      // We need not rerender if the change of props simply reflects the user's\n      // edits. Rerendering in this case would make the cursor/caret jump.\n      return (\n        // Rerender if there is no element yet... (somehow?)\n        !this.htmlEl\n        // ...or if html really changed... (programmatically, not by user edit)\n        || nextProps.html !== this.htmlEl.innerHTML && nextProps.html !== this.props.html\n        // ...or if editing is enabled or disabled.\n        || this.props.disabled !== nextProps.disabled\n        // ...or if className changed\n        || this.props.className !== nextProps.className\n      );\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.htmlEl && this.props.html !== this.htmlEl.innerHTML) {\n        // Perhaps React (whose VDOM gets outdated because we often prevent\n        // rerendering) did not update the DOM. So we update it manually now.\n        this.htmlEl.innerHTML = this.props.html;\n      }\n    }\n  }, {\n    key: 'emitChange',\n    value: function emitChange(evt) {\n      if (!this.htmlEl) return;\n      var html = this.htmlEl.innerHTML;\n      if (this.props.onChange && html !== this.lastHtml) {\n        evt.target = { value: html };\n        this.props.onChange(evt);\n      }\n      this.lastHtml = html;\n    }\n  }]);\n\n  return ContentEditable;\n}(_react2.default.Component);\n\nexports.default = ContentEditable;\nmodule.exports = exports['default'];\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-contenteditable/lib/react-contenteditable.js\n// module id = 1040\n// module chunks = 0 1 3 10 11 14 16 18 19 29 31 32 39 52","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseForOwn.js\n// module id = 1043\n// module chunks = 0 4 10 12 16 17 18 19 20 29 33 34 35","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseFlatten.js\n// module id = 1044\n// module chunks = 0 4 10 12 16 17 18 19 29 34","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/sortBy.js\n// module id = 1053\n// module chunks = 0 4 10 16 17 18 19 29 34","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_isFlattenable.js\n// module id = 1056\n// module chunks = 0 4 10 12 16 17 18 19 29 34","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseEach.js\n// module id = 1059\n// module chunks = 0 4 10 16 17 18 19 29 34","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseMap.js\n// module id = 1060\n// module chunks = 0 4 10 16 17 18 19 29 34","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  var index = -1;\n  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseOrderBy.js\n// module id = 1061\n// module chunks = 0 4 10 16 17 18 19 29 34","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_baseSortBy.js\n// module id = 1062\n// module chunks = 0 4 10 16 17 18 19 29 34","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_compareAscending.js\n// module id = 1063\n// module chunks = 0 4 10 16 17 18 19 29 34","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_compareMultiple.js\n// module id = 1064\n// module chunks = 0 4 10 16 17 18 19 29 34","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/_createBaseEach.js\n// module id = 1065\n// module chunks = 0 4 10 16 17 18 19 29 34","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".label-container {\\n  position: relative;\\n  overflow: hidden;\\n  font-size: 100%;\\n  color: #343434;\\n  height: 100%;\\n  float: left; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/Image/Image.scss\n// module id = 1075\n// module chunks = 1 3 4 29","import Image from './Image'\r\n\r\nexport default Image\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Image/index.js","import PropTypes from 'prop-types'\r\nimport React from 'react'\r\nimport './Image.scss'\r\n\r\nexport default class Image extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static propTypes = {\r\n    className: PropTypes.string\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static defaultProps = {\r\n    className: ''\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (props) {\r\n\r\n    super (props)\r\n\r\n    this.onError = this.onError.bind(this)\r\n    this.onLoad = this.onLoad.bind(this)\r\n\r\n    this.state = {\r\n      classNames: ['default-adsk'],\r\n      src: this.props.src\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onLoad () {\r\n\r\n    this.setState({\r\n      classNames: []\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onError () {\r\n\r\n    this.setState({\r\n      classNames: ['default-adsk']\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render () {\r\n\r\n    const classNames = [\r\n      ...this.state.classNames,\r\n      ...this.props.className.split(' ')\r\n    ]\r\n\r\n    return(\r\n      <img className={classNames.join(' ')}\r\n        onError={this.onError}\r\n        onLoad={this.onLoad}\r\n        src={this.state.src}\r\n      />\r\n    )\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Image/Image.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Image.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Image.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Image.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/Image/Image.scss\n// module id = 1269\n// module chunks = 1 3 4 29","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".model-loader .title {\\n  display: -webkit-inline-box;\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.model-loader .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 142px;\\n  float: left; }\\n\\n.model-loader .content > .controls {\\n  margin: 10px 10px 0px 10px;\\n  display: inline-block;\\n  white-space: nowrap;\\n  width: 100%; }\\n\\n.model-loader .content > .controls > .row {\\n  width: 100%;\\n  margin: 0; }\\n\\n.model-loader .content > .controls .dropdown {\\n  width: calc(100% - 88px);\\n  margin-bottom: 6px;\\n  float: left; }\\n\\n.model-loader .content > .controls .dropdown > button {\\n  padding: 0 10px 0 10px;\\n  overflow: hidden;\\n  height: 26px;\\n  width: 100%;\\n  margin: 0; }\\n\\n.model-loader .content > .controls button {\\n  background: whitesmoke;\\n  border-radius: 4px;\\n  margin-left: 4px;\\n  outline: none;\\n  height: 26px;\\n  width: 30px;\\n  float: left; }\\n\\n.model-loader .content > .controls button > span {\\n  position: relative;\\n  font-size: 16px;\\n  color: #9b9b9b;\\n  top: -1px; }\\n\\n.model-loader .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.model-loader .content > .controls button:hover:not(:disabled) > span {\\n  color: #FF9800; }\\n\\n.model-loader .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.model-loader .content > .controls label {\\n  margin: 4px 10px 0 10px;\\n  font-weight: normal;\\n  float: left; }\\n\\n.model-loader .content > .controls .state-name-input {\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 155px);\\n  padding: 3px 0 0 10px;\\n  white-space: nowrap;\\n  border-radius: 4px;\\n  text-align: left;\\n  overflow: hidden;\\n  height: 26px;\\n  float: left; }\\n\\n.model-loader .content > .controls .loop {\\n  margin-left: 6px;\\n  float: left; }\\n\\n.model-loader .content > .controls .loop > label {\\n  margin: 0 0 0 6px; }\\n\\n.model-loader .items {\\n  height: calc(100% - 82px);\\n  overflow: scroll;\\n  margin: 4px; }\\n\\n.model-loader .items > .item, .gu-mirror.item {\\n  transition-timing-function: ease;\\n  transition-duration: 1.5s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 10px);\\n  background: #ededed;\\n  white-space: nowrap;\\n  border-radius: 4px;\\n  overflow: hidden;\\n  cursor: pointer;\\n  height: 26px;\\n  padding: 2px;\\n  margin: 5px; }\\n\\n.model-loader .items > .item:hover {\\n  background: rgba(0, 105, 245, 0.35);\\n  border: 1px solid #1bb1f4; }\\n\\n.model-loader .items > .item.active {\\n  background: rgba(0, 105, 245, 0.35);\\n  border: 1px solid #1bb1f4; }\\n\\n.model-loader .items > .item > div, .gu-mirror.item > div {\\n  width: calc(100% - 50px);\\n  pointer-events: none;\\n  position: relative;\\n  margin: 0 0 0 12px;\\n  float: left; }\\n\\n.model-loader .items > .item > div > .label, .gu-mirror.item > div > .label {\\n  font-weight: normal;\\n  font-size: small;\\n  color: black;\\n  width: 100%; }\\n\\n.model-loader .items > .item > button, .gu-mirror.item > button {\\n  transition-timing-function: ease;\\n  transition-duration: 1.5s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  background: #f58b00;\\n  border-radius: 4px;\\n  position: relative;\\n  outline: none;\\n  float: right;\\n  height: 20px;\\n  right: 1px; }\\n\\n.model-loader .items > .item > button:hover {\\n  background: #ff9000; }\\n\\n.model-loader .items > .item > button > span, .gu-mirror.item > button > span {\\n  transition-timing-function: ease;\\n  transition-duration: 1.5s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  position: relative;\\n  color: #505050;\\n  top: -4px; }\\n\\n.model-loader .items > .item > button:hover > span {\\n  color: #000000; }\\n\\n.model-loader-dlg {\\n  left: calc(50% - 200px) !important;\\n  top: calc(30% - 100px) !important;\\n  width: 400px !important; }\\n\\n.model-loader-dlg > .content {\\n  max-height: 300px;\\n  overflow: hidden;\\n  height: auto; }\\n\\n.model-loader-dlg > .content > div {\\n  max-height: 300px;\\n  height: auto; }\\n\\n.model-loader-dlg .search {\\n  border: 1px solid #8c8b8b;\\n  width: calc(100% - 10px);\\n  padding: 4px 0 0 4px;\\n  background: #eaeaea;\\n  border-radius: 4px;\\n  margin: 0 0 6px 5px;\\n  text-align: left;\\n  color: #000000;\\n  height: 32px; }\\n\\n.model-loader-dlg .scroller {\\n  overflow-y: scroll;\\n  max-height: 248px;\\n  height: auto; }\\n\\n.model-loader-dlg .model-item {\\n  transition-timing-function: ease;\\n  transition-duration: 1.5s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 10px);\\n  background: #ededed;\\n  white-space: nowrap;\\n  border-radius: 4px;\\n  overflow: hidden;\\n  cursor: pointer;\\n  height: 76px;\\n  padding: 2px;\\n  margin: 5px; }\\n\\n.model-loader-dlg .model-item:hover {\\n  background: rgba(0, 105, 245, 0.35);\\n  border: 1px solid #1bb1f4; }\\n\\n.model-loader-dlg .model-item img {\\n  height: 70px;\\n  width: 70px;\\n  float: left; }\\n\\n.model-loader-dlg .model-item .label-container {\\n  font-weight: bold;\\n  text-align: left;\\n  left: 20px;\\n  top: 20px; }\\n\\n.model-loader-controls {\\n  margin: auto 0 auto calc(100% - 142px);\\n  position: relative;\\n  float: left; }\\n\\n.model-loader-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.model-loader-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.model-loader-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.model-loader-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.scss\n// module id = 1400\n// module chunks = 29","import './Viewing.Extension.ModelLoader'\r\n\r\nexport default 'Viewing.Extension.ModelLoader'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/index.js","/////////////////////////////////////////////////////////\r\n// Viewing.Extension.ModelLoader\r\n// by Philippe Leefsma, April 2017\r\n//\r\n/////////////////////////////////////////////////////////\r\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\r\nimport ContentEditable from 'react-contenteditable'\r\nimport './Viewing.Extension.ModelLoader.scss'\r\nimport WidgetContainer from 'WidgetContainer'\r\nimport ServiceManager from 'SvcManager'\r\nimport { ReactLoader } from 'Loader'\r\nimport Toolkit from 'Viewer.Toolkit'\r\nimport sortBy from 'lodash/sortBy'\r\nimport DOMPurify from 'dompurify'\r\nimport ReactDOM from 'react-dom'\r\nimport Image from 'Image'\r\nimport Label from 'Label'\r\nimport React from 'react'\r\nimport {\r\n  DropdownButton,\r\n  MenuItem\r\n} from 'react-bootstrap'\r\n\r\nclass ModelLoaderExtension extends MultiModelExtensionBase {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options) {\r\n\r\n    super (viewer, options)\r\n\r\n    this.renderTitle = this.renderTitle.bind(this)\r\n\r\n    this.dialogSvc =\r\n      ServiceManager.getService('DialogSvc')\r\n\r\n    this.modelSvc =\r\n      ServiceManager.getService('ModelSvc')\r\n\r\n    this.react = options.react\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  get className() {\r\n\r\n    return 'model-loader'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.ModelLoader'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    if (!this.viewer.model) {\r\n\r\n      this.viewer.container.classList.add('empty')\r\n\r\n      if (this.options.loader) {\r\n\r\n        this.options.loader.show(false)\r\n      }\r\n    }\r\n\r\n    const models = this.models\r\n\r\n    const activeModel = models.length\r\n      ? models[0]\r\n      : null\r\n\r\n    this.firstFileType = activeModel\r\n      ? this.getFileType(activeModel.urn)\r\n      : null\r\n\r\n    this.react.setState({\r\n\r\n      activeModel,\r\n      models\r\n\r\n    }).then (() => {\r\n\r\n      this.react.pushRenderExtension(this)\r\n    })\r\n\r\n    const transformerReactOptions = {\r\n      pushRenderExtension: () => {\r\n        return Promise.resolve()\r\n      },\r\n      popRenderExtension: () => {\r\n        return Promise.resolve()\r\n      }\r\n    }\r\n\r\n    const transformerOptions = Object.assign({}, {\r\n        react: transformerReactOptions,\r\n        fullTransform : true,\r\n        hideControls : true\r\n      }, this.options.transformer)\r\n\r\n    this.viewer.loadDynamicExtension(\r\n      'Viewing.Extension.ModelTransformer',\r\n      transformerOptions).then((modelTransformer) => {\r\n\r\n        this.react.setState({\r\n          modelTransformer\r\n        })\r\n\r\n        if (activeModel) {\r\n\r\n          modelTransformer.setModel(\r\n            activeModel)\r\n        }\r\n      })\r\n\r\n    console.log('Viewing.Extension.ModelLoader loaded')\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    console.log('Viewing.Extension.ModelLoader unloaded')\r\n\r\n    this.viewer.unloadExtension(\r\n      'Viewing.Extension.ModelTransformer')\r\n\r\n    this.react.popViewerPanel(this)\r\n\r\n    super.unload ()\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Displays model selection popup dialog\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  showModelDlg () {\r\n\r\n    this.dialogSvc.setState({\r\n      className: 'model-loader-dlg',\r\n      title: 'Select Model ...',\r\n      showOK: false,\r\n      search: '',\r\n      content:\r\n        <div>\r\n          <ReactLoader show={true}/>\r\n        </div>,\r\n      open: true\r\n    })\r\n\r\n    this.modelSvc.getModels(this.options.database).then(\r\n      (models) => {\r\n\r\n        const dbModelsByName =\r\n          sortBy(models, (model) => {\r\n            return model.name\r\n          })\r\n\r\n        this.dialogSvc.setState({\r\n          dbModels: dbModelsByName,\r\n          open: true\r\n        }, true)\r\n\r\n        this.setDlgItems (dbModelsByName)\r\n      })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Get file type by base64 decoding the model URN\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  getFileType (urn) {\r\n\r\n    return window.atob(urn).split(\".\").pop(-1)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Loads a model based on database info\r\n  // For testing purpose also supports\r\n  // loading models offline\r\n  // See for more details: http://autode.sk/2qsKxx8\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  loadModel (dbModel) {\r\n\r\n    return new Promise(async(resolve) => {\r\n\r\n      this.options.loader.show(true)\r\n\r\n      const fileType =\r\n        dbModel.fileType ||\r\n        this.getFileType(dbModel.model.urn)\r\n\r\n      const loadOptions = {\r\n        placementTransform:\r\n          this.buildPlacementTransform(fileType)\r\n      }\r\n\r\n      switch (dbModel.env) {\r\n\r\n        case 'AutodeskProduction':\r\n\r\n          const lmvProxy =\r\n            dbModel.model.proxy || 'lmv-proxy-2legged'\r\n\r\n          Autodesk.Viewing.endpoint.setEndpointAndApi(\r\n            `${window.location.origin}/${lmvProxy}`,\r\n            'modelDerivativeV2')\r\n\r\n          const doc = await Toolkit.loadDocument(\r\n            dbModel.model.urn)\r\n\r\n          const items = Toolkit.getViewableItems(doc)\r\n\r\n          if (items.length) {\r\n\r\n            const path = doc.getViewablePath(items[0])\r\n\r\n            this.viewer.loadModel(path, loadOptions,\r\n              (model) => {\r\n\r\n                model.database =\r\n                  dbModel.database || this.options.database\r\n                model.dbModelId = dbModel._id\r\n                model.urn = dbModel.model.urn\r\n                model.name = dbModel.name\r\n                model.guid = this.guid()\r\n\r\n                this.eventSink.emit('model.loaded', {\r\n                  model\r\n                })\r\n\r\n                resolve (model)\r\n              })\r\n          }\r\n\r\n          break\r\n\r\n        case 'Local':\r\n\r\n          const path = dbModel.model.path\r\n\r\n          this.viewer.loadModel(path, loadOptions,\r\n            (model) => {\r\n\r\n              model.database = this.options.database\r\n              model.dbModelId = dbModel._id\r\n              model.urn = dbModel.model.urn\r\n              model.name = dbModel.name\r\n              model.guid = this.guid()\r\n\r\n              this.eventSink.emit('model.loaded', {\r\n                model\r\n              })\r\n\r\n              resolve (model)\r\n            })\r\n\r\n          break\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload model upon user request\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async unloadModel () {\r\n\r\n    const {activeModel, models} = this.react.getState()\r\n\r\n    const onClose = async(result) => {\r\n\r\n      if (result === 'OK') {\r\n\r\n        const filteredModels = models.filter((model) => {\r\n          return model.guid !== activeModel.guid\r\n        })\r\n\r\n        if (!filteredModels.length) {\r\n\r\n          this.viewer.container.classList.add('empty')\r\n\r\n          this.firstFileType = null\r\n        }\r\n\r\n        await this.react.setState({\r\n          models: filteredModels\r\n        })\r\n\r\n        const nextActiveModel = filteredModels.length\r\n            ? filteredModels[0]\r\n            : null\r\n\r\n        this.eventSink.emit('model.unloaded', {\r\n          model: activeModel\r\n        })\r\n\r\n        this.viewer.impl.unloadModel(activeModel)\r\n\r\n        await this.setActiveModel(nextActiveModel, {\r\n          source: 'model.unloaded'\r\n        })\r\n      }\r\n\r\n      this.dialogSvc.off('dialog.close', onClose)\r\n    }\r\n\r\n    const msg = DOMPurify.sanitize(\r\n      `Are you sure you want to unload`\r\n      + `<b><br/>${activeModel.name}</b> ?`)\r\n\r\n    this.dialogSvc.on('dialog.close', onClose)\r\n\r\n    this.dialogSvc.setState({\r\n      className: 'model-loader-unload-dlg',\r\n      title: 'Unload Model ...',\r\n      content:\r\n        <div dangerouslySetInnerHTML={{__html: msg}}>\r\n        </div>,\r\n      open: true\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // .rvt and .nwc files are z-oriented, whereas other\r\n  // file formats are y-oriented.\r\n  // Depending what file type was the initial model,\r\n  // we need to adjust the subsequent loaded models\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  buildPlacementTransform (fileType) {\r\n\r\n    this.firstFileType = this.firstFileType || fileType\r\n\r\n    const placementTransform = new THREE.Matrix4()\r\n\r\n    // those file type have different orientation\r\n    // than other, so need to correct it\r\n    // upon insertion\r\n    const zOriented = ['rvt', 'nwc']\r\n\r\n    if (zOriented.indexOf(this.firstFileType) > -1) {\r\n\r\n      if (zOriented.indexOf(fileType) < 0) {\r\n\r\n        placementTransform.makeRotationX(\r\n          90 * Math.PI/180)\r\n      }\r\n\r\n    } else {\r\n\r\n      if(zOriented.indexOf(fileType) > -1) {\r\n\r\n        placementTransform.makeRotationX(\r\n          -90 * Math.PI/180)\r\n      }\r\n    }\r\n\r\n    return placementTransform\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Fit whole model to view\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  fitModelToView (model) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    if (instanceTree) {\r\n\r\n      const rootId = instanceTree.getRootId()\r\n\r\n      this.viewer.fitToView([rootId], model)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // ModelBeginLoad event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelBeginLoad (event) {\r\n\r\n    const {models} = this.react.getState()\r\n\r\n    const model = event.model\r\n\r\n    this.react.setState({\r\n      models: [...models, model]\r\n    })\r\n\r\n    this.setActiveModel (model, {\r\n      source: 'model.loaded',\r\n      fitToView: true\r\n    })\r\n\r\n    this.firstFileType = this.firstFileType ||\r\n      this.getFileType(model.urn)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // ModelRootLoaded event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelRootLoaded (event) {\r\n\r\n    this.viewer.container.classList.remove('empty')\r\n\r\n    this.options.loader.show(false)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Model Selected event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSelection (event) {\r\n\r\n    if (event.selections && event.selections.length) {\r\n\r\n      const selection = event.selections[0]\r\n\r\n      const model = selection.model\r\n\r\n      this.setActiveModel (model, {\r\n        source: 'model.selected'\r\n      })\r\n\r\n      this.eventSink.emit('model.selected', {\r\n        model\r\n      })\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Set model as active\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async setActiveModel (model, params = {}) {\r\n\r\n    const activeGuid = this.viewer.activeModel\r\n      ? this.viewer.activeModel.guid\r\n      : null\r\n\r\n    this.viewer.activeModel = model\r\n\r\n    if (params.fitToView) {\r\n\r\n      this.fitModelToView (model)\r\n    }\r\n\r\n    await this.react.setState({\r\n      activeModel: model\r\n    })\r\n\r\n    if (model) {\r\n\r\n      this.setStructure(model)\r\n\r\n      if (model.guid !== activeGuid) {\r\n\r\n        this.eventSink.emit('model.activated', {\r\n          source: params.source,\r\n          model\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Fixing the model structure browser to show active\r\n  // model structure\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setStructure (model) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    if (instanceTree && this.viewer.modelstructure) {\r\n\r\n      this.viewer.modelstructure.setModel(\r\n        instanceTree)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onKeyDown (e) {\r\n\r\n    if (e.keyCode === 13) {\r\n\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSearchChanged (e) {\r\n\r\n    const search = e.target.value.toLowerCase()\r\n\r\n    this.dialogSvc.setState({\r\n      search\r\n    }, true)\r\n\r\n    const state = this.dialogSvc.getState()\r\n\r\n    const filteredDbModels =\r\n      state.dbModels.filter((dbModel) => {\r\n        return search.length\r\n          ? dbModel.name.toLowerCase().indexOf(search) > -1\r\n          : true\r\n      })\r\n\r\n    this.setDlgItems (filteredDbModels)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load model items in popup selection dialog\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setDlgItems (dbModels) {\r\n\r\n    const state = this.dialogSvc.getState()\r\n\r\n    const modelDlgItems = dbModels.map((dbModel) => {\r\n\r\n      const thumbnailUrl = this.modelSvc.getThumbnailUrl(\r\n        this.options.database, dbModel._id, 200)\r\n\r\n      return (\r\n        <div key={dbModel._id} className=\"model-item\"\r\n          onClick={() => {\r\n\r\n            this.loadModel(dbModel)\r\n\r\n            this.dialogSvc.setState({\r\n              open: false\r\n            })\r\n        }}>\r\n          <Image src={thumbnailUrl}/>\r\n          <Label text= {dbModel.name}/>\r\n        </div>\r\n      )\r\n    })\r\n\r\n    this.dialogSvc.setState({\r\n      content:\r\n        <div>\r\n          <ReactLoader show={false}/>\r\n          <ContentEditable\r\n            onChange={(e) => this.onSearchChanged(e)}\r\n            onKeyDown={(e) => this.onKeyDown(e)}\r\n            data-placeholder=\"Search ...\"\r\n            html={state.search}\r\n            className=\"search\"\r\n          />\r\n          <div className=\"scroller\">\r\n            { modelDlgItems }\r\n          </div>\r\n        </div>\r\n    }, true)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Panel docking mode\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async setDocking (docked) {\r\n\r\n    const id = ModelLoaderExtension.ExtensionId\r\n\r\n    if (docked) {\r\n\r\n      await this.react.popRenderExtension(id)\r\n\r\n      await this.react.pushViewerPanel(this, {\r\n        height: 250,\r\n        width: 350\r\n      })\r\n\r\n    } else {\r\n\r\n      await this.react.popViewerPanel(id)\r\n\r\n      this.react.pushRenderExtension(this)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render panel title\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderTitle (docked) {\r\n\r\n    const spanClass = docked\r\n      ? 'fa fa-chain-broken'\r\n      : 'fa fa-chain'\r\n\r\n    return (\r\n      <div className=\"title\">\r\n        <label>\r\n          Model Loader\r\n        </label>\r\n        <div className=\"model-loader-controls\">\r\n          <button onClick={() => this.setDocking(docked)}\r\n            title=\"Toggle docking mode\">\r\n            <span className={spanClass}/>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render panel controls\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderControls () {\r\n\r\n    const {activeModel, models} = this.react.getState()\r\n\r\n    const modelItems = models.map((model, idx) => {\r\n      return (\r\n        <MenuItem eventKey={idx} key={model.guid}\r\n          onClick={() => {\r\n\r\n            this.setActiveModel(model, {\r\n              source: 'dropdown',\r\n              fitToView: true\r\n            })\r\n          }}>\r\n          { model.name }\r\n        </MenuItem>\r\n      )\r\n    })\r\n\r\n    const modelName = activeModel\r\n      ? activeModel.name\r\n      : ''\r\n\r\n    return (\r\n      <div className=\"controls\">\r\n\r\n        <div className=\"row\">\r\n\r\n          <DropdownButton\r\n            title={\"Model: \" +  modelName}\r\n            className=\"sequence-dropdown\"\r\n            disabled={!activeModel}\r\n            key=\"sequence-dropdown\"\r\n            id=\"sequence-dropdown\">\r\n           { modelItems }\r\n          </DropdownButton>\r\n\r\n          <button onClick={() => this.showModelDlg()}\r\n            title=\"Load model\">\r\n            <span className=\"fa fa-plus\"/>\r\n          </button>\r\n\r\n          <button onClick={() => this.unloadModel()}\r\n            disabled={!activeModel}\r\n            title=\"Unload model\">\r\n            <span className=\"fa fa-times\"/>\r\n          </button>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render transformer extension UI\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderTransformer () {\r\n\r\n    const {modelTransformer} = this.react.getState()\r\n\r\n    return modelTransformer\r\n      ? modelTransformer.render({showTitle: false})\r\n      : <div/>\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render extension UI\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render (opts) {\r\n\r\n    return (\r\n      <WidgetContainer\r\n        renderTitle={() => this.renderTitle(opts.docked)}\r\n        showTitle={opts.showTitle}\r\n        className={this.className}>\r\n\r\n        { this.renderControls() }\r\n        { this.renderTransformer() }\r\n\r\n      </WidgetContainer>\r\n    )\r\n  }\r\n}\r\n\r\nAutodesk.Viewing.theExtensionManager.registerExtension(\r\n  ModelLoaderExtension.ExtensionId,\r\n  ModelLoaderExtension)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.ModelLoader.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.ModelLoader.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.ModelLoader.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ModelLoader/Viewing.Extension.ModelLoader.scss\n// module id = 1820\n// module chunks = 29"],"sourceRoot":""}