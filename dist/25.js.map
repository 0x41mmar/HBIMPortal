{"version":3,"sources":["webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./src/client/viewer.components/Viewer.Toolkit/index.js?3d64**************","webpack:///./~/babel-runtime/helpers/get.js?a320*************","webpack:///./src/client/components/Label/Label.scss?d194*********","webpack:///./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js?9bfb**************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js?88e8*********","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js?6fc5*********","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?2530***********","webpack:///./~/dompurify/src/purify.js?f974***********","webpack:///./src/client/components/Label/index.js?d0bb*********","webpack:///./src/client/components/Label/Label.js?7c58*********","webpack:///./src/client/components/Label/Label.scss?2314**********","webpack:///./~/lodash/throttle.js?18ed","webpack:///./~/lodash/debounce.js?3cb5","webpack:///./~/lodash/now.js?ea74","webpack:///./src/client/components/ScriptLoader/ScriptLoader.js?a7f3**","webpack:///./src/client/components/ScriptLoader/index.js?f276**","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Math.Vector3d/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Viewer.Camera/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.scss","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Math.Vector3d/autodesk.math@vector3d-1.0.0.template.json","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Viewer.Camera/autodesk.viewer@camera-1.0.0.template.json","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Base.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/index.js","webpack:///./~/copy-to-clipboard/index.js","webpack:///./~/react-copy-to-clipboard/lib/Component.js","webpack:///./~/react-copy-to-clipboard/lib/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/HFDM.Entity.ClassFactory.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Camera.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Manager.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.Core.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.scss?279e","webpack:///./~/toggle-selection/index.js"],"names":["Toolkit","format","d","Date","getTime","guid","replace","c","r","Math","random","floor","toString","urn","resolve","reject","paramUrn","startsWith","Autodesk","Viewing","Document","load","doc","error","roles","rootItem","getRootItem","items","roleArray","Array","isArray","forEach","role","getSubItemsWithProperties","type","id","className","tooltip","handler","button","UI","Button","icon","style","fontSize","setToolTip","onClick","viewer","ctrlGroupName","viewerToolbar","getToolbar","ctrlGroup","ControlGroup","addControl","model","dbIds","instanceTree","getData","getRootId","dbIdArray","leafIds","getLeafNodesRec","childCount","enumNodeChildren","childId","push","i","length","ex","getLeafNodes","fragIds","enumNodeFragments","fragId","leafId","dbId","getFragIds","fragList","getFragmentList","fragbBox","THREE","Box3","nodebBox","getWorldBounds","union","requestedProps","dbIdInt","parseInt","isNaN","propTasks","map","displayName","getProperty","all","then","properties","getProperties","result","defaultValue","prop","displayValue","Error","activeModel","propertyTasks","propertyResults","propertyResult","indexOf","sort","propFilter","propRes","filteredRes","filter","res","propFilterArray","getBulkProperties","components","defaultProp","getBulkPropertiesAsync","results","componentsMap","value","split","root","taskFunc","tasks","runTaskOnDataTreeRec","node","parent","children","childNode","task","min","max","material","overlayId","geometry","Geometry","vertices","Vector3","x","y","z","lines","Line","LinePieces","impl","addOverlay","invalidate","setMaterial","createNodeFunc","_buildModelTreeRec","name","getNodeName","rootId","rootNode","taskResults","_executeTaskOnModelTreeRec","hide","targetIds","visibilityManager","setNodeOff","show","isolate","targetLeafIds","leafTasks","resolveLeaf","axis","angle","center","quaternion","Quaternion","setFromAxisAngle","fragProxy","getFragmentProxy","getAnimTransform","position","applyQuaternion","add","multiplyQuaternions","updateAnimTransform","state","immediate","onStateRestored","removeEventListener","VIEWER_STATE_RESTORED_EVENT","pivot","viewport","pivotPoint","setTimeout","navigation","setPivotPoint","addEventListener","restoreState","parentId","nodeName","faceFilter","vertexArray","getLeafFragIds","matrixWorld","meshGeometry","renderProxy","getRenderProxy","attributes","positions","vb","array","indices","index","ib","stride","vbstride","offsets","count","start","oi","ol","il","a","b","vA","vB","vC","fromArray","faceIdx","face","Face3","faces","applyMatrix","computeFaceNormals","computeVertexNormals","mesh","Mesh","scale","excludedFragIds","svf","mc","getVisibleBounds","pt","nodeAccess","nodeBoxes","scaledExplodeDepth","maxDepth","explodeDepth","currentSegmentFraction","it","tmpBox","Float32Array","explodeRec","nodeId","depth","cx","cy","cz","ox","oy","oz","oscale","getNodeBox","mycx","mycy","mycz","dx","dy","dz","boxes","fragments","nbFrags","getCount","box_offset","getUserAgent","navigator","userAgent","isAndroid","match","isBlackBerry","isIOS","isOpera","isWindows","isWindowsDesktop","isWindowsMobile","isAny","MultiModelExtensionBase","options","defaultOptions","onModelCompletedLoad","bind","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","event","eventSink","off","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","on","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventIdArray","eventTasks","__handler","Composer","Extension","WidgetContainer","props","showTitle","renderTitle","title","dimensions","Children","child","newProps","cloneElement","classNames","height","join","renderChildren","Component","propTypes","string","bool","defaultProps","Label","width","textAlign","sanitize","text","ScriptLoader","url","head","document","getElementsByTagName","script","createElement","async","onerror","err","onload","appendChild","src","obj","urls","toArray","loadTasks","loadScript","onLoaded","onError","module","exports","typeId","template","BaseHandler","workspace","property","context","EntityClassFactory","BaseEntity","handlerMng","params","getHandler","_id","onCreate","onModify","absPath","getAbsolutePath","path","parentHandlerId","parentHandler","onRemove","CameraHandler","onCameraChanged","CAMERA_CHANGE_EVENT","nav","modifCtx","_path","propertyName","getVectorProperty","setCameraUpVector","setPosition","setTarget","getPosition","up","getCameraUpVector","target","getTarget","setVectorProperty","commit","v","vectorProperty","get","HandlerManager","handlerMap","HFDMCoreExtension","entityManager","HFDMAppFramework","EntityManager","hfdm","HFDM_SDK","HFDM","hfdmFactory","PropertyFactory","handlerManager","registerHandler","registerType","console","log","initializeHFDM","Type","register","EntityClass","registerEntity","create","createWorkspace","changeSet","connect","getBearerToken","getToken","serverUrl","initParameters","branchUrn","initialize","branchGUID","getActiveBranch","getGuid","token","inspectorURL","emit","getActiveUrn","colaborateURL","window","location","href","initializeAsHost","initializeAsParticipant","activate","upVector","cameraProperty","createTypeInstance","insert","parentProperty","theExtensionManager","registerExtension","ExtensionId","HFDMExtension","onScriptLoaded","dialogSvc","getService","forgeSvc","react","setState","user","appState","pushRenderExtension","getUser","showLogin","popViewerPanel","docked","popRenderExtension","pushViewerPanel","ms","callback","$","access_token","onClose","login","onRequestClose","content","open","Forge","AppFramework","sleep","loadExtension","query","loader","spanClass","setDocking","getState","showLoader","opts","renderControls"],"mappings":"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ACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACpBA,mCAAC;AACD;AACA;AACA;;AAEA;AACA,qDAA0B,sBAAsB,EAAE;AAAA;AAClD,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,EAAE,iBAAiB,EAAE;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA,0CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB;AACA,wBAAwB;AACxB,gEAAgE;AAChE,gEAAgE;AAChE,uEAAuE;AACvE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;AAChE,gEAAgE;;AAEhE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,8BAA8B;;AAEzD;AACA;AACA,2CAA2C,oBAAoB;;AAE/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iCAAiC,EAAE;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,iCAAiC;AACrE,+EAA+E;AAC/E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,iCAAiC;AACzE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,uCAAuC;AACvC,0BAA0B,QAAQ;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,KAAK;AACrB;AACA;AACA,iCAAiC,QAAQ;;AAEzC;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,SAAS;AACxB;AACA;AACA,iDAAiD,QAAQ;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;;;;;ACv7BD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;IAEqBmB,K;;;AAsBnB;AACA;AACA;AACA;;;AAvBA;AACA;AACA;AACA;AAqBA,iBAAalB,KAAb,EAAoB;AAAA;AAAA,+HAEXA,KAFW;AAGnB;;AAED;AACA;AACA;AACA;;;AAtBA;AACA;AACA;AACA;;;;;6BAoBU;;AAER,UAAMS,cACJ,iBADI,0CAED,KAAKT,KAAL,CAAW7R,SAAX,CAAqBoF,KAArB,CAA2B,GAA3B,CAFC,EAAN;;AAKA,UAAM7E,QAAQ;AACZyS,eAAO,KAAKnB,KAAL,CAAWoB,SAAX,KAAyB,QAAzB,GACH,MADG,GACM,EAFD;AAGZA,mBAAW,KAAKpB,KAAL,CAAWoB;AAHV,OAAd;;AAMA,aACE;AAAA;AAAA,UAAK,WAAWX,WAAWE,IAAX,CAAgB,GAAhB,CAAhB;AACE,iBAAOjS,KADT;AAEE;AAAA;AAAA;AACI,8BAAU2S,QAAV,CAAmB,KAAKrB,KAAL,CAAWsB,IAA9B;AADJ;AAFF,OADF;AAQD;;;EAxDgC,gBAAMT,S,UAMhCC,S,GAAY;AACjBM,aAAW,oBAAUL,MADJ;AAEjB5S,aAAW,oBAAU4S,MAFJ;AAGjBO,QAAM,oBAAUP,MAHC,E,SAUZE,Y,GAAe;AACpBG,aAAW,MADS;AAEpBjT,aAAW,EAFS;AAGpBmT,QAAM,EAHc,E;kBAhBHJ,K;;;;;;;;;;ACNrB;;AAEA;AACA;AACA;AACA;AACA,gDAAuF;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;ACpBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,oBAAoB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;ACpEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,QAAQ;AACnB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;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","file":"25.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  background-color: white;\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/WidgetContainer/WidgetContainer.scss\n// module id = 1020\n// module chunks = 0 10 11 12 13 14 15 16 19 21 24 25 26 28 29 31 32 33 35 36 37 39 40","import ViewerToolkit from './Viewer.Toolkit'\r\n\r\nexport default ViewerToolkit\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/index.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 1022\n// module chunks = 0 10 11 12 13 14 15 16 20 21 22 23 24 25 26 27 28 29 30 31 32 33 35 36 37 42 45 46 47 50 51 54","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".label-container {\\n  position: relative;\\n  overflow: hidden;\\n  font-size: 100%;\\n  color: #343434;\\n  height: 100%;\\n  float: left; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/Label/Label.scss\n// module id = 1023\n// module chunks = 1 10 11 14 15 16 17 18 19 24 25 28 29 31 32 38 39 41","\r\n\r\nexport default class Toolkit {\r\n\r\n  ///////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime();\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\r\n      });\r\n\r\n    return guid;\r\n  }\r\n\r\n  /////////////////////////////////////////////\r\n  //mobile detection\r\n  //\r\n  /////////////////////////////////////////////\r\n  static get mobile() {\r\n\r\n    return {\r\n\r\n      getUserAgent: function () {\r\n        return navigator.userAgent;\r\n      },\r\n      isAndroid: function () {\r\n        return this.getUserAgent().match(/Android/i);\r\n      },\r\n      isBlackBerry: function () {\r\n        return this.getUserAgent().match(/BlackBerry/i);\r\n      },\r\n      isIOS: function () {\r\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i);\r\n      },\r\n      isOpera: function () {\r\n        return this.getUserAgent().match(/Opera Mini/i);\r\n      },\r\n      isWindows: function () {\r\n        return this.isWindowsDesktop() || this.isWindowsMobile();\r\n      },\r\n      isWindowsMobile: function () {\r\n        return this.getUserAgent().match(/IEMobile/i);\r\n      },\r\n      isWindowsDesktop: function () {\r\n        return this.getUserAgent().match(/WPDesktop/i);\r\n      },\r\n      isAny: function () {\r\n\r\n        return this.isAndroid() ||\r\n          this.isBlackBerry() ||\r\n          this.isIOS() ||\r\n          this.isWindowsMobile();\r\n      }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load a document from URN\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static loadDocument (urn) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const paramUrn = !urn.startsWith('urn:')\r\n        ? 'urn:' + urn\r\n        : urn\r\n\r\n      Autodesk.Viewing.Document.load(paramUrn, (doc) => {\r\n\r\n        resolve (doc)\r\n\r\n      }, (error) => {\r\n\r\n        reject (error)\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Return viewables\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getViewableItems (doc, roles = ['3d', '2d']) {\r\n\r\n    const rootItem = doc.getRootItem()\r\n\r\n    let items = []\r\n\r\n    const roleArray = roles\r\n      ? (Array.isArray(roles) ? roles : [roles])\r\n      : []\r\n\r\n    roleArray.forEach((role) => {\r\n\r\n      items = [ ...items,\r\n        ...Autodesk.Viewing.Document.getSubItemsWithProperties(\r\n          rootItem, { type: 'geometry', role }, true) ]\r\n    })\r\n\r\n    return items\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Toolbar button\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createButton(id, className, tooltip, handler) {\r\n\r\n    var button = new Autodesk.Viewing.UI.Button(id)\r\n\r\n    button.icon.style.fontSize = '24px'\r\n\r\n    button.icon.className = className\r\n\r\n    button.setToolTip(tooltip)\r\n\r\n    button.onClick = handler\r\n\r\n    return button\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Control group\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createControlGroup (viewer, ctrlGroupName) {\r\n\r\n    var viewerToolbar = viewer.getToolbar(true)\r\n\r\n    if (viewerToolbar) {\r\n\r\n      var ctrlGroup =  new Autodesk.Viewing.UI.ControlGroup(\r\n        ctrlGroupName)\r\n\r\n      viewerToolbar.addControl(ctrlGroup)\r\n\r\n      return ctrlGroup\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafNodes (model, dbIds) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n        let leafIds = []\r\n\r\n        const getLeafNodesRec = (id) => {\r\n\r\n          var childCount = 0;\r\n\r\n          instanceTree.enumNodeChildren(id, (childId) => {\r\n\r\n              getLeafNodesRec(childId)\r\n\r\n              ++childCount\r\n            })\r\n\r\n          if (childCount == 0) {\r\n\r\n            leafIds.push(id)\r\n          }\r\n        }\r\n\r\n        for (var i = 0; i < dbIdArray.length; ++i) {\r\n\r\n          getLeafNodesRec(dbIdArray[i])\r\n        }\r\n\r\n        return resolve(leafIds)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getFragIds (model, dbIds) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds)\r\n          ? dbIds : [dbIds]\r\n\r\n        const leafIds =\r\n          await Toolkit.getLeafNodes(\r\n            model, dbIdArray)\r\n\r\n        const fragIds = []\r\n\r\n        for(var i=0; i< leafIds.length; ++i) {\r\n\r\n          instanceTree.enumNodeFragments(\r\n            leafIds[i], (fragId) => {\r\n              fragIds.push(fragId)\r\n            })\r\n        }\r\n\r\n        return resolve(fragIds)\r\n\r\n      } catch(ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get leaf node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafFragIds (model, leafId) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const fragIds = []\r\n\r\n    instanceTree.enumNodeFragments(\r\n      leafId, (fragId) => {\r\n        fragIds.push(fragId)\r\n      })\r\n\r\n    return fragIds\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Node bounding box\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getWorldBoundingBox (model, dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var fragIds =\r\n          await Toolkit.getFragIds(\r\n            model, dbId)\r\n\r\n        if (!fragIds.length) {\r\n\r\n          return reject('No geometry, invalid dbId?')\r\n        }\r\n\r\n        var fragList = model.getFragmentList()\r\n\r\n        var fragbBox = new THREE.Box3()\r\n        var nodebBox = new THREE.Box3()\r\n\r\n        fragIds.forEach(function(fragId) {\r\n\r\n          fragList.getWorldBounds(fragId, fragbBox)\r\n          nodebBox.union(fragbBox)\r\n        })\r\n\r\n        return resolve(nodebBox)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets properties from component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperties (model, dbId, requestedProps = null) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const dbIdInt = parseInt(dbId)\r\n\r\n        if (isNaN(dbIdInt)) {\r\n\r\n          return reject(dbId + ' is not a valid integer')\r\n        }\r\n\r\n        if (requestedProps) {\r\n\r\n          const propTasks = requestedProps.map((displayName) => {\r\n\r\n            return Toolkit.getProperty(\r\n              model, dbIdInt, displayName, 'Not Available')\r\n          })\r\n\r\n          Promise.all(propTasks).then((properties) => {\r\n\r\n            resolve(properties)\r\n          })\r\n\r\n        } else {\r\n\r\n          model.getProperties(dbIdInt, (result) => {\r\n\r\n            if (result.properties) {\r\n\r\n              return resolve(\r\n                result.properties)\r\n            }\r\n\r\n            return reject('No Properties')\r\n          })\r\n        }\r\n\r\n      } catch (ex) {\r\n\r\n          return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperty (model, dbId, displayName, defaultValue) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model.getProperties(dbId, (result) => {\r\n\r\n          if (result.properties) {\r\n\r\n            result.properties.forEach((prop) => {\r\n\r\n              prop.dbId = dbId\r\n\r\n              if (typeof displayName === 'function') {\r\n\r\n                if (displayName (prop.displayName)){\r\n\r\n                  resolve(prop)\r\n                }\r\n\r\n              } else if (displayName === prop.displayName) {\r\n\r\n                resolve(prop)\r\n              }\r\n            })\r\n\r\n            if (defaultValue) {\r\n\r\n              return resolve({\r\n                displayValue: defaultValue,\r\n                displayName,\r\n                dbId\r\n              })\r\n            }\r\n\r\n            reject(new Error('Not Found'))\r\n\r\n          } else {\r\n\r\n            reject(new Error('Error getting properties'));\r\n          }\r\n        })\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets all existing properties from component  dbIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getPropertyList (viewer, dbIds, model = null) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model = model || viewer.activeModel || viewer.model\r\n\r\n        var propertyTasks = dbIds.map((dbId) => {\r\n\r\n          return Toolkit.getProperties(model, dbId)\r\n        })\r\n\r\n        var propertyResults = await Promise.all(\r\n          propertyTasks)\r\n\r\n        var properties = []\r\n\r\n        propertyResults.forEach((propertyResult) => {\r\n\r\n          propertyResult.forEach((prop) => {\r\n\r\n            if (properties.indexOf(prop.displayName) < 0){\r\n\r\n              properties.push(prop.displayName)\r\n            }\r\n          })\r\n        })\r\n\r\n        return resolve(properties.sort())\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getBulkPropertiesAsync (model, dbIds, propFilter) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      if (typeof propFilter === 'function') {\r\n\r\n        const propTasks = dbIds.map((dbId) => {\r\n\r\n          return this.getProperty(\r\n            model, dbId, propFilter, 'Not Found')\r\n        })\r\n\r\n        const propRes = await Promise.all(propTasks)\r\n\r\n        const filteredRes = propRes.filter((res) => {\r\n\r\n          return res.displayValue !== 'Not Found'\r\n        })\r\n\r\n        resolve(filteredRes.map((res) => {\r\n\r\n          return {\r\n            properties: [res],\r\n            dbId: res.dbId\r\n          }\r\n        }))\r\n\r\n      } else {\r\n\r\n        const propFilterArray = Array.isArray (propFilter)\r\n          ? propFilter :[propFilter]\r\n\r\n\r\n        model.getBulkProperties(dbIds, propFilterArray, (result) => {\r\n\r\n          resolve (result)\r\n\r\n        }, (error) => {\r\n\r\n          reject(error)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Maps components by property\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static mapComponentsByProp (model, propFilter, components, defaultProp) {\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const results = await Toolkit.getBulkPropertiesAsync(\r\n          model, components, propFilter)\r\n\r\n        const propertyResults = results.map((result) => {\r\n\r\n          const prop = result.properties[0]\r\n\r\n          return Object.assign({}, prop, {\r\n            dbId: result.dbId\r\n          })\r\n        })\r\n\r\n        var componentsMap = {};\r\n\r\n        propertyResults.forEach((result) => {\r\n\r\n          var value = result.displayValue;\r\n\r\n          if (typeof value == 'string') {\r\n\r\n            value = value.split(':')[0]\r\n          }\r\n\r\n          if (!componentsMap[value]) {\r\n\r\n            componentsMap[value] = []\r\n          }\r\n\r\n          componentsMap[value].push(result.dbId)\r\n        })\r\n\r\n        return resolve(componentsMap)\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // Runs recursively the argument task on each node\r\n  // of the data tree\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  static runTaskOnDataTree(root, taskFunc) {\r\n\r\n    var tasks = [];\r\n\r\n    var runTaskOnDataTreeRec = (node, parent=null)=> {\r\n\r\n      if (node.children) {\r\n\r\n        node.children.forEach((childNode)=> {\r\n\r\n          runTaskOnDataTreeRec(childNode, node);\r\n        });\r\n      }\r\n\r\n      var task = taskFunc(node, parent);\r\n\r\n      tasks.push(task);\r\n    }\r\n\r\n    runTaskOnDataTreeRec(root);\r\n\r\n    return Promise.all(tasks);\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static drawBox (viewer, min, max, material, overlayId) {\r\n\r\n    const geometry = new THREE.Geometry()\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    const lines = new THREE.Line(geometry,\r\n      material, THREE.LinePieces)\r\n\r\n    viewer.impl.addOverlay(overlayId, lines)\r\n\r\n    viewer.impl.invalidate(\r\n      true, true, true)\r\n\r\n    return lines\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Set component material\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async setMaterial(model, dbId, material) {\r\n\r\n    const fragIds = await Toolkit.getFragIds(\r\n      model, dbId)\r\n\r\n    const fragList = model.getFragmentList()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      fragList.setMaterial(fragId, material)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively builds the model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildModelTree (model, createNodeFunc = null){\r\n\r\n    //builds model tree recursively\r\n    function _buildModelTreeRec(node){\r\n\r\n      instanceTree.enumNodeChildren(node.dbId,\r\n        function(childId) {\r\n\r\n          var childNode = null;\r\n\r\n          if(createNodeFunc){\r\n\r\n            childNode = createNodeFunc(childId);\r\n\r\n          } else {\r\n\r\n            node.children = node.children || [];\r\n\r\n            childNode = {\r\n              dbId: childId,\r\n              name: instanceTree.getNodeName(childId)\r\n            }\r\n\r\n            node.children.push(childNode)\r\n          }\r\n\r\n          _buildModelTreeRec(childNode)\r\n        })\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree\r\n\r\n    var rootId = instanceTree.getRootId()\r\n\r\n    var rootNode = {\r\n      dbId: rootId,\r\n      name: instanceTree.getNodeName(rootId)\r\n    }\r\n\r\n    _buildModelTreeRec(rootNode)\r\n\r\n    return rootNode\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively execute task on model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static executeTaskOnModelTree (model, task) {\r\n\r\n    var taskResults = [];\r\n\r\n    function _executeTaskOnModelTreeRec(dbId){\r\n\r\n      instanceTree.enumNodeChildren(dbId,\r\n        function(childId) {\r\n\r\n          taskResults.push(task(model, childId));\r\n\r\n          _executeTaskOnModelTreeRec(childId);\r\n        });\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree;\r\n\r\n    var rootId = instanceTree.getRootId();\r\n\r\n    _executeTaskOnModelTreeRec(rootId);\r\n\r\n    return taskResults;\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static hide (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.hide (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const tasks = targetIds.map((dbId) => {\r\n\r\n        return new Promise((resolve) => {\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, true)\r\n\r\n          resolve()\r\n        })\r\n      })\r\n\r\n      return Promise.all(tasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static show (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.show (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      targetIds.forEach((dbId) => {\r\n\r\n        viewer.impl.visibilityManager.setNodeOff(\r\n          dbId, false)\r\n      })\r\n\r\n      return Promise.resolve()\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async isolateFull (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.isolate(dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const targetLeafIds = await Toolkit.getLeafNodes(\r\n        model, targetIds)\r\n\r\n      const leafIds = await Toolkit.getLeafNodes (model)\r\n\r\n      const leafTasks = leafIds.map((dbId) => {\r\n\r\n        return new Promise((resolveLeaf) => {\r\n\r\n          const show = !targetLeafIds.length  ||\r\n            targetLeafIds.indexOf(dbId) > -1\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, !show)\r\n\r\n          resolveLeaf()\r\n        })\r\n      })\r\n\r\n      return Promise.all(leafTasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Rotate selected fragments\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  static rotateFragments (viewer, fragIds, axis, angle, center, model = null) {\r\n\r\n    var quaternion = new THREE.Quaternion()\r\n\r\n    quaternion.setFromAxisAngle(axis, angle)\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      var fragProxy = viewer.impl.getFragmentProxy(\r\n        model, fragId)\r\n\r\n      fragProxy.getAnimTransform()\r\n\r\n      var position = new THREE.Vector3(\r\n        fragProxy.position.x - center.x,\r\n        fragProxy.position.y - center.y,\r\n        fragProxy.position.z - center.z)\r\n\r\n      position.applyQuaternion(quaternion)\r\n\r\n      position.add(center)\r\n\r\n      fragProxy.position = position\r\n\r\n      fragProxy.quaternion.multiplyQuaternions(\r\n        quaternion, fragProxy.quaternion)\r\n\r\n      fragProxy.updateAnimTransform()\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // A fix for viewer.restoreState\r\n  // that also restores pivotPoint\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static restoreStateWithPivot (\r\n    viewer, state, filter = null, immediate = false) {\r\n\r\n    const onStateRestored = () => {\r\n\r\n      viewer.removeEventListener(\r\n        Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n        onStateRestored)\r\n\r\n      const pivot = state.viewport.pivotPoint\r\n\r\n      setTimeout(() => {\r\n\r\n        viewer.navigation.setPivotPoint(\r\n          new THREE.Vector3(\r\n            pivot[0], pivot[1], pivot[2]))\r\n      }, immediate ? 0 : 1250)\r\n    }\r\n\r\n    viewer.addEventListener(\r\n      Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n      onStateRestored)\r\n\r\n    viewer.restoreState(state, filter, immediate)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getComponentsByParentName (name, model) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const rootId = instanceTree.getRootId()\r\n\r\n    let parentId = 0\r\n\r\n    instanceTree.enumNodeChildren(rootId,\r\n      (childId) => {\r\n\r\n        const nodeName = instanceTree.getNodeName(childId)\r\n\r\n        if (nodeName.indexOf(name) > -1) {\r\n\r\n          parentId = childId\r\n        }\r\n      })\r\n\r\n    return parentId > 0\r\n      ? Toolkit.getLeafNodes(model, parentId)\r\n      : []\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Creates a standard THREE.Mesh out of a Viewer\r\n  // component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildComponentMesh (\r\n    viewer, model, dbId, faceFilter, material) {\r\n\r\n    const vertexArray = []\r\n\r\n    // first we assume the component dbId is a leaf\r\n    // component: ie has no child so contains\r\n    // geometry. This util method will return all fragIds\r\n    // associated with that specific dbId\r\n    const fragIds = Toolkit.getLeafFragIds(model, dbId)\r\n\r\n    let matrixWorld = null\r\n\r\n    const meshGeometry = new THREE.Geometry()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      // for each fragId, get the proxy in order to access\r\n      // THREE geometry\r\n      const renderProxy =\r\n        viewer.impl.getRenderProxy(\r\n          model, fragId)\r\n\r\n      matrixWorld = matrixWorld ||\r\n      renderProxy.matrixWorld\r\n\r\n      const geometry = renderProxy.geometry\r\n\r\n      const attributes = geometry.attributes\r\n\r\n      const positions = geometry.vb\r\n        ? geometry.vb\r\n        : attributes.position.array\r\n\r\n      const indices = attributes.index.array || geometry.ib\r\n\r\n      const stride = geometry.vb ? geometry.vbstride : 3\r\n\r\n      const offsets = [{\r\n        count: indices.length,\r\n        index: 0,\r\n        start: 0\r\n      }]\r\n\r\n      for (var oi = 0, ol = offsets.length; oi < ol; ++oi) {\r\n\r\n        var start = offsets[oi].start\r\n        var count = offsets[oi].count\r\n        var index = offsets[oi].index\r\n\r\n        for (var i = start, il = start + count; i < il; i += 3) {\r\n\r\n          const a = index + indices[i]\r\n          const b = index + indices[i + 1]\r\n          const c = index + indices[i + 2]\r\n\r\n          const vA = new THREE.Vector3()\r\n          const vB = new THREE.Vector3()\r\n          const vC = new THREE.Vector3()\r\n\r\n          vA.fromArray(positions, a * stride)\r\n          vB.fromArray(positions, b * stride)\r\n          vC.fromArray(positions, c * stride)\r\n\r\n          if (!faceFilter || faceFilter(vA, vB, vC)) {\r\n\r\n            const faceIdx = meshGeometry.vertices.length\r\n\r\n            meshGeometry.vertices.push(vA)\r\n            meshGeometry.vertices.push(vB)\r\n            meshGeometry.vertices.push(vC)\r\n\r\n            const face = new THREE.Face3(\r\n              faceIdx, faceIdx + 1, faceIdx + 2)\r\n\r\n            meshGeometry.faces.push(face)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    meshGeometry.applyMatrix(matrixWorld)\r\n    meshGeometry.computeFaceNormals()\r\n    meshGeometry.computeVertexNormals()\r\n\r\n    // creates THREE.Mesh\r\n    const mesh = new THREE.Mesh(\r\n      meshGeometry, material)\r\n\r\n    mesh.dbId = dbId\r\n\r\n    return mesh\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static selectiveExplode (viewer, scale, excludedFragIds, model = null) {\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    var svf = model.getData();\r\n\r\n    var mc = model.getVisibleBounds(true).center();\r\n\r\n    var fragList = model.getFragmentList();\r\n\r\n    var pt = new THREE.Vector3();\r\n\r\n    //Input scale is in the range 0-1, where 0\r\n    //means no displacement, and 1 maximum reasonable displacement.\r\n    scale *= 2;\r\n\r\n    //If we have a full part hierarchy we can use a\r\n    //better grouping strategy when exploding\r\n    if (svf.instanceTree && svf.instanceTree.nodeAccess.nodeBoxes && scale !== 0) {\r\n\r\n      var scaledExplodeDepth = scale * (svf.instanceTree.maxDepth - 1) + 1;\r\n      var explodeDepth = 0 | scaledExplodeDepth;\r\n      var currentSegmentFraction = scaledExplodeDepth - explodeDepth;\r\n\r\n      var it = svf.instanceTree;\r\n      var tmpBox = new Float32Array(6);\r\n\r\n      (function explodeRec(nodeId, depth, cx, cy, cz, ox, oy, oz) {\r\n\r\n        var oscale = scale * 2;\r\n\r\n        // smooth transition of this tree depth\r\n        // from non-exploded to exploded state\r\n        if (depth == explodeDepth)\r\n          oscale *= currentSegmentFraction;\r\n\r\n        it.getNodeBox(nodeId, tmpBox);\r\n\r\n        var mycx = 0.5 * (tmpBox[0] + tmpBox[3]);\r\n        var mycy = 0.5 * (tmpBox[1] + tmpBox[4]);\r\n        var mycz = 0.5 * (tmpBox[2] + tmpBox[5]);\r\n\r\n        if (depth > 0 && depth <= explodeDepth) {\r\n          var dx = (mycx - cx) * oscale;\r\n          var dy = (mycy - cy) * oscale;\r\n          var dz = (mycz - cz) * oscale;\r\n\r\n          //var omax = Math.max(dx, Math.max(dy, dz));\r\n          ox += dx;\r\n          oy += dy;\r\n          oz += dz;\r\n        }\r\n\r\n        svf.instanceTree.enumNodeChildren(nodeId, function(dbId) {\r\n\r\n          explodeRec(dbId, depth+1, mycx, mycy, mycz, ox, oy, oz);\r\n\r\n        }, false);\r\n\r\n        svf.instanceTree.enumNodeFragments(nodeId, function(fragId) {\r\n\r\n          if (excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n            pt.x = ox;\r\n            pt.y = oy;\r\n            pt.z = oz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n\r\n        }, false);\r\n\r\n      })(svf.instanceTree.getRootId(), 0, mc.x, mc.y, mc.x, 0, 0, 0);\r\n\r\n    } else {\r\n\r\n      var boxes = fragList.fragments.boxes;\r\n\r\n      var nbFrags = fragList.getCount()\r\n\r\n      for (var fragId = 0; fragId < nbFrags; ++fragId) {\r\n\r\n        if(excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n          if (scale == 0) {\r\n\r\n            fragList.updateAnimTransform(fragId);\r\n\r\n          } else {\r\n\r\n            var box_offset = fragId * 6;\r\n\r\n            var cx = 0.5 * (boxes[box_offset] + boxes[box_offset + 3]);\r\n            var cy = 0.5 * (boxes[box_offset + 1] + boxes[box_offset + 4]);\r\n            var cz = 0.5 * (boxes[box_offset + 2] + boxes[box_offset + 5]);\r\n\r\n            cx = scale * (cx - mc.x);\r\n            cy = scale * (cy - mc.y);\r\n            cz = scale * (cz - mc.z);\r\n\r\n            pt.x = cx;\r\n            pt.y = cy;\r\n            pt.z = cz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\r\n\r\nexport default MultiModelExtensionBase\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js","import WidgetContainer from './WidgetContainer'\r\n\r\nexport default WidgetContainer\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/WidgetContainer/index.js","import EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class MultiModelExtensionBase extends\r\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}, defaultOptions = {}) {\r\n\r\n    super (viewer)\r\n\r\n    // bindings\r\n\r\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\r\n    this.onObjectTreeCreated  = this.onObjectTreeCreated.bind(this)\r\n    this.onModelRootLoaded    = this.onModelRootLoaded.bind(this)\r\n    this.onExtensionLoaded    = this.onExtensionLoaded.bind(this)\r\n    this.onModelActivated     = this.onModelActivated.bind(this)\r\n    this.onGeometryLoaded     = this.onGeometryLoaded.bind(this)\r\n    this.onToolbarCreated     = this.onToolbarCreated.bind(this)\r\n    this.onModelBeginLoad     = this.onModelBeginLoad.bind(this)\r\n    this.onModelUnloaded      = this.onModelUnloaded.bind(this)\r\n    this.onSelection          = this.onSelection.bind(this)\r\n\r\n    this.__onModelActivated   = this.__onModelActivated.bind(this)\r\n    this.__onModelUnloaded    = this.__onModelUnloaded.bind(this)\r\n    this.__onModelLoaded      = this.__onModelLoaded.bind(this)\r\n\r\n    this.defaultOptions = defaultOptions\r\n\r\n    this.options = Object.assign({},\r\n      defaultOptions,\r\n      options)\r\n\r\n    this.viewer = viewer\r\n\r\n    // read the modelQueue to detect currently loaded models\r\n    // when the extension gets loaded\r\n    const models = viewer.impl.modelQueue().getModels()\r\n\r\n    this.models = models.map((model) => {\r\n\r\n      model.guid = model.guid || this.guid()\r\n\r\n      return model\r\n    })\r\n\r\n    this.initializeEvents ()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.MultiModelExtensionBase'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewer.removeEventListener(\r\n        event.id, this[event.handler])\r\n    })\r\n\r\n    if (this.eventSink) {\r\n\r\n      this.eventSink.off('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.off('model.unloaded',\r\n        this.__onModelUnloaded)\r\n\r\n      this.eventSink.off('model.loaded',\r\n        this.__onModelLoaded)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Reload callback, in case the extension is re-loaded\r\n  // more than once\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  reload (options = {}) {\r\n\r\n    this.options = Object.assign({},\r\n      this.defaultOptions,\r\n      this.options,\r\n      options)\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when extension gets loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onExtensionLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onExtensionLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when the model starts to load\r\n  // The geometry and instanceTree may not be available\r\n  // at this time\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelBeginLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelBeginLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model is\r\n  // selected in a multi-model environment\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelActivated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelActivated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when model root node has been loaded\r\n  // Extensions that do not require access to full\r\n  // model geometry or component tree may use that\r\n  // event to know a new model has been loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelRootLoaded (event) {\r\n\r\n    this.viewerEvent([\r\n\r\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\r\n\r\n    ]).then((args) => {\r\n\r\n      this.onModelCompletedLoad (args[0])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when object tree is fully loaded.\r\n  // Extensions that are interested in using the\r\n  // instanceTree need to use that event to make sure\r\n  // it is available\r\n  //\r\n  ////////////////////////////////////////////////////////\r\n  onObjectTreeCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onObjectTreeCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when geometry is fully loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onGeometryLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onGeometryLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\r\n  // have both been fired\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelCompletedLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelCompletedLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked once the viewer toolbar has been created\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onToolbarCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onToolbarCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model has\r\n  // been unloaded as per user request\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelUnloaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelUnloaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when a model is being selected\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSelection (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onSelection')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //Sink Events\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  __onModelLoaded (event) {\r\n\r\n    this.models = [...this.models, event.model]\r\n\r\n    this.onModelBeginLoad (event)\r\n  }\r\n\r\n  __onModelActivated (event) {\r\n\r\n    this.onModelActivated (event)\r\n  }\r\n\r\n  __onModelUnloaded (event) {\r\n\r\n    this.models = this.models.filter((model) => {\r\n\r\n      return model.guid !== event.model.guid\r\n    })\r\n\r\n    this.onModelUnloaded(event)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Initialize all events for the extension\r\n  // Each event will invoke a predefined handler\r\n  // implemented or not by the derived extension\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  initializeEvents () {\r\n\r\n    if (this.options.eventSink) {\r\n\r\n      // event object passed in options\r\n      this.eventSink = this.options.eventSink\r\n\r\n      this.eventSink.on('model.loaded',\r\n        this.__onModelLoaded)\r\n\r\n      this.eventSink.on('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.on('model.unloaded',\r\n        this.__onModelUnloaded)\r\n    }\r\n\r\n    this.viewerEvents = [\r\n      {\r\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\r\n        handler: 'onExtensionLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n        handler: 'onObjectTreeCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\r\n        handler: 'onModelRootLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\r\n        handler: 'onGeometryLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\r\n        handler: 'onToolbarCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n        handler: 'onSelection'\r\n      }\r\n    ]\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewerEvent(event.id, this[event.handler])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Async viewer event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  viewerEvent (eventId, handler) {\r\n\r\n    if (handler) {\r\n\r\n      this.viewer.addEventListener (eventId, handler)\r\n      return\r\n    }\r\n\r\n    const eventIdArray = Array.isArray(eventId)\r\n      ? eventId : [eventId]\r\n\r\n    const eventTasks = eventIdArray.map((id) => {\r\n      return new Promise ((resolve) => {\r\n        const __handler = (args) => {\r\n          this.viewer.removeEventListener (id, __handler)\r\n          resolve (args)\r\n        }\r\n        this.viewer.addEventListener (id, __handler)\r\n      })\r\n    })\r\n\r\n    return Promise.all (eventTasks)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","import PropTypes from 'prop-types'\r\nimport ReactDOM from 'react-dom'\r\nimport './WidgetContainer.scss'\r\nimport React from 'react'\r\n\r\nclass WidgetContainer extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    showTitle: PropTypes.bool\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static defaultProps = {\r\n    showTitle: true,\r\n    className: ''\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderTitle () {\r\n\r\n    if (!this.props.showTitle) {\r\n\r\n      return <div/>\r\n    }\r\n\r\n    if (this.props.renderTitle) {\r\n\r\n      return this.props.renderTitle()\r\n    }\r\n\r\n    return (\r\n      <div className=\"title\">\r\n        <label>\r\n          { this.props.title }\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  renderChildren() {\r\n\r\n    if (this.props.dimensions) {\r\n\r\n      return React.Children.map(this.props.children, (child) => {\r\n\r\n        const newProps = Object.assign({},\r\n          child.props, {\r\n            dimensions: this.props.dimensions\r\n          })\r\n\r\n        return React.cloneElement(child, newProps)\r\n      })\r\n    }\r\n\r\n    return this.props.children\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  render() {\r\n\r\n    const classNames = [\r\n      'widget-container',\r\n      ...this.props.className.split(' ')\r\n    ]\r\n\r\n    const height = this.props.showTitle\r\n      ? 'calc(100% - 40px)'\r\n      : '100%'\r\n\r\n    return (\r\n      <div className={classNames.join(' ')} style={this.props.style}>\r\n         { this.renderTitle() }\r\n        <div className=\"content\" style={{height}}>\r\n          {this.renderChildren()}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WidgetContainer\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/WidgetContainer/WidgetContainer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/WidgetContainer/WidgetContainer.scss\n// module id = 1031\n// module chunks = 0 10 11 12 13 14 15 16 19 21 24 25 26 28 29 31 32 33 35 36 37 39 40",";(function(factory) {\n    'use strict';\n    /* global window: false, define: false, module: false */\n    var root = typeof window === 'undefined' ? null : window;\n\n    if (typeof define === 'function' && define.amd) {\n        define(function(){ return factory(root); });\n    } else if (typeof module !== 'undefined') {\n        module.exports = factory(root);\n    } else {\n        root.DOMPurify = factory(root);\n    }\n}(function factory(window) {\n    'use strict';\n\n    var DOMPurify = function(window) {\n        return factory(window);\n    };\n\n    /**\n     * Version label, exposed for easier checks\n     * if DOMPurify is up to date or not\n     */\n    DOMPurify.version = '0.8.9';\n\n    /**\n     * Array of elements that DOMPurify removed during sanitation.\n     * Empty if nothing was removed.\n     */\n    DOMPurify.removed = [];\n\n    if (!window || !window.document || window.document.nodeType !== 9) {\n        // not running in a browser, provide a factory function\n        // so that you can pass your own Window\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n    }\n\n    var document = window.document;\n    var originalDocument = document;\n    var DocumentFragment = window.DocumentFragment;\n    var HTMLTemplateElement = window.HTMLTemplateElement;\n    var Node = window.Node;\n    var NodeFilter = window.NodeFilter;\n    var NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap;\n    var Text = window.Text;\n    var Comment = window.Comment;\n    var DOMParser = window.DOMParser;\n    var useDOMParser = false; // See comment below\n\n    // As per issue #47, the web-components registry is inherited by a\n    // new document created via createHTMLDocument. As per the spec\n    // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n    // a new empty registry is used when creating a template contents owner\n    // document, so we use that as our parent document to ensure nothing\n    // is inherited.\n    if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n            document = template.content.ownerDocument;\n        }\n    }\n    var implementation = document.implementation;\n    var createNodeIterator = document.createNodeIterator;\n    var getElementsByTagName = document.getElementsByTagName;\n    var createDocumentFragment = document.createDocumentFragment;\n    var importNode = originalDocument.importNode;\n\n    var hooks = {};\n\n    /**\n     * Expose whether this browser supports running the full DOMPurify.\n     */\n    DOMPurify.isSupported =\n        typeof implementation.createHTMLDocument !== 'undefined' &&\n        document.documentMode !== 9;\n\n    /* Add properties to a lookup table */\n    var _addToSet = function(set, array) {\n        var l = array.length;\n        while (l--) {\n            if (typeof array[l] === 'string') {\n                array[l] = array[l].toLowerCase();\n            }\n            set[array[l]] = true;\n        }\n        return set;\n    };\n\n    /* Shallow clone an object */\n    var _cloneObj = function(object) {\n        var newObject = {};\n        var property;\n        for (property in object) {\n            if (object.hasOwnProperty(property)) {\n                newObject[property] = object[property];\n            }\n        }\n        return newObject;\n    };\n\n    /**\n     * We consider the elements and attributes below to be safe. Ideally\n     * don't add any new ones but feel free to remove unwanted ones.\n     */\n\n    /* allowed element names */\n    var ALLOWED_TAGS = null;\n    var DEFAULT_ALLOWED_TAGS = _addToSet({}, [\n\n        // HTML\n        'a','abbr','acronym','address','area','article','aside','audio','b',\n        'bdi','bdo','big','blink','blockquote','body','br','button','canvas',\n        'caption','center','cite','code','col','colgroup','content','data',\n        'datalist','dd','decorator','del','details','dfn','dir','div','dl','dt',\n        'element','em','fieldset','figcaption','figure','font','footer','form',\n        'h1','h2','h3','h4','h5','h6','head','header','hgroup','hr','html','i',\n        'img','input','ins','kbd','label','legend','li','main','map','mark',\n        'marquee','menu','menuitem','meter','nav','nobr','ol','optgroup',\n        'option','output','p','pre','progress','q','rp','rt','ruby','s','samp',\n        'section','select','shadow','small','source','spacer','span','strike',\n        'strong','style','sub','summary','sup','table','tbody','td','template',\n        'textarea','tfoot','th','thead','time','tr','track','tt','u','ul','var',\n        'video','wbr',\n\n        // SVG\n        'svg','altglyph','altglyphdef','altglyphitem','animatecolor',\n        'animatemotion','animatetransform','circle','clippath','defs','desc',\n        'ellipse','filter','font','g','glyph','glyphref','hkern','image','line',\n        'lineargradient','marker','mask','metadata','mpath','path','pattern',\n        'polygon','polyline','radialgradient','rect','stop','switch','symbol',\n        'text','textpath','title','tref','tspan','view','vkern',\n\n        // SVG Filters\n        'feBlend','feColorMatrix','feComponentTransfer','feComposite',\n        'feConvolveMatrix','feDiffuseLighting','feDisplacementMap',\n        'feFlood','feFuncA','feFuncB','feFuncG','feFuncR','feGaussianBlur',\n        'feMerge','feMergeNode','feMorphology','feOffset',\n        'feSpecularLighting','feTile','feTurbulence',\n\n        //MathML\n        'math','menclose','merror','mfenced','mfrac','mglyph','mi','mlabeledtr',\n        'mmuliscripts','mn','mo','mover','mpadded','mphantom','mroot','mrow',\n        'ms','mpspace','msqrt','mystyle','msub','msup','msubsup','mtable','mtd',\n        'mtext','mtr','munder','munderover',\n\n        //Text\n        '#text'\n    ]);\n\n    /* Allowed attribute names */\n    var ALLOWED_ATTR = null;\n    var DEFAULT_ALLOWED_ATTR = _addToSet({}, [\n\n        // HTML\n        'accept','action','align','alt','autocomplete','background','bgcolor',\n        'border','cellpadding','cellspacing','checked','cite','class','clear','color',\n        'cols','colspan','coords','datetime','default','dir','disabled',\n        'download','enctype','face','for','headers','height','hidden','high','href',\n        'hreflang','id','ismap','label','lang','list','loop', 'low','max',\n        'maxlength','media','method','min','multiple','name','noshade','novalidate',\n        'nowrap','open','optimum','pattern','placeholder','poster','preload','pubdate',\n        'radiogroup','readonly','rel','required','rev','reversed','role','rows',\n        'rowspan','spellcheck','scope','selected','shape','size','span',\n        'srclang','start','src','step','style','summary','tabindex','title',\n        'type','usemap','valign','value','width','xmlns',\n\n        // SVG\n        'accent-height','accumulate','additivive','alignment-baseline',\n        'ascent','attributename','attributetype','azimuth','basefrequency',\n        'baseline-shift','begin','bias','by','clip','clip-path','clip-rule',\n        'color','color-interpolation','color-interpolation-filters','color-profile',\n        'color-rendering','cx','cy','d','dx','dy','diffuseconstant','direction',\n        'display','divisor','dur','edgemode','elevation','end','fill','fill-opacity',\n        'fill-rule','filter','flood-color','flood-opacity','font-family','font-size',\n        'font-size-adjust','font-stretch','font-style','font-variant','font-weight',\n        'fx', 'fy','g1','g2','glyph-name','glyphref','gradientunits','gradienttransform',\n        'image-rendering','in','in2','k','k1','k2','k3','k4','kerning','keypoints',\n        'keysplines','keytimes','lengthadjust','letter-spacing','kernelmatrix',\n        'kernelunitlength','lighting-color','local','marker-end','marker-mid',\n        'marker-start','markerheight','markerunits','markerwidth','maskcontentunits',\n        'maskunits','max','mask','mode','min','numoctaves','offset','operator',\n        'opacity','order','orient','orientation','origin','overflow','paint-order',\n        'path','pathlength','patterncontentunits','patterntransform','patternunits',\n        'points','preservealpha','r','rx','ry','radius','refx','refy','repeatcount',\n        'repeatdur','restart','result','rotate','scale','seed','shape-rendering',\n        'specularconstant','specularexponent','spreadmethod','stddeviation','stitchtiles',\n        'stop-color','stop-opacity','stroke-dasharray','stroke-dashoffset','stroke-linecap',\n        'stroke-linejoin','stroke-miterlimit','stroke-opacity','stroke','stroke-width',\n        'surfacescale','targetx','targety','transform','text-anchor','text-decoration',\n        'text-rendering','textlength','u1','u2','unicode','values','viewbox',\n        'visibility','vert-adv-y','vert-origin-x','vert-origin-y','word-spacing',\n        'wrap','writing-mode','xchannelselector','ychannelselector','x','x1','x2',\n        'y','y1','y2','z','zoomandpan',\n\n        // MathML\n        'accent','accentunder','bevelled','close','columnsalign','columnlines',\n        'columnspan','denomalign','depth','display','displaystyle','fence',\n        'frame','largeop','length','linethickness','lspace','lquote',\n        'mathbackground','mathcolor','mathsize','mathvariant','maxsize',\n        'minsize','movablelimits','notation','numalign','open','rowalign',\n        'rowlines','rowspacing','rowspan','rspace','rquote','scriptlevel',\n        'scriptminsize','scriptsizemultiplier','selection','separator',\n        'separators','stretchy','subscriptshift','supscriptshift','symmetric',\n        'voffset',\n\n        // XML\n        'xlink:href','xml:id','xlink:title','xml:space','xmlns:xlink'\n    ]);\n\n    /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n    var FORBID_TAGS = null;\n\n    /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n    var FORBID_ATTR = null;\n\n    /* Decide if ARIA attributes are okay */\n    var ALLOW_ARIA_ATTR = true;\n\n    /* Decide if custom data attributes are okay */\n    var ALLOW_DATA_ATTR = true;\n\n    /* Decide if unknown protocols are okay */\n    var ALLOW_UNKNOWN_PROTOCOLS = false;\n\n    /* Output should be safe for jQuery's $() factory? */\n    var SAFE_FOR_JQUERY = false;\n\n    /* Output should be safe for common template engines.\n     * This means, DOMPurify removes data attributes, mustaches and ERB\n     */\n    var SAFE_FOR_TEMPLATES = false;\n\n    /* Specify template detection regex for SAFE_FOR_TEMPLATES mode */\n    var MUSTACHE_EXPR = /\\{\\{[\\s\\S]*|[\\s\\S]*\\}\\}/gm;\n    var ERB_EXPR = /<%[\\s\\S]*|[\\s\\S]*%>/gm;\n\n    /* Decide if document with <html>... should be returned */\n    var WHOLE_DOCUMENT = false;\n\n    /* Decide if all elements (e.g. style, script) must be children of\n     * document.body. By default, browsers might move them to document.head */\n    var FORCE_BODY = false;\n\n    /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html string.\n     * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n     */\n    var RETURN_DOM = false;\n\n    /* Decide if a DOM `DocumentFragment` should be returned, instead of a html string */\n    var RETURN_DOM_FRAGMENT = false;\n\n    /* If `RETURN_DOM` or `RETURN_DOM_FRAGMENT` is enabled, decide if the returned DOM\n     * `Node` is imported into the current `Document`. If this flag is not enabled the\n     * `Node` will belong (its ownerDocument) to a fresh `HTMLDocument`, created by\n     * DOMPurify. */\n    var RETURN_DOM_IMPORT = false;\n\n    /* Output should be free from DOM clobbering attacks? */\n    var SANITIZE_DOM = true;\n\n    /* Keep element content when removing element? */\n    var KEEP_CONTENT = true;\n\n    /* Tags to ignore content of when KEEP_CONTENT is true */\n    var FORBID_CONTENTS = _addToSet({}, [\n        'audio', 'head', 'math', 'script', 'style', 'template', 'svg', 'video'\n    ]);\n\n    /* Tags that are safe for data: URIs */\n    var DATA_URI_TAGS = _addToSet({}, [\n        'audio', 'video', 'img', 'source', 'image'\n    ]);\n\n    /* Attributes safe for values like \"javascript:\" */\n    var URI_SAFE_ATTRIBUTES = _addToSet({}, [\n        'alt','class','for','id','label','name','pattern','placeholder',\n        'summary','title','value','style','xmlns'\n    ]);\n\n    /* Keep a reference to config to pass to hooks */\n    var CONFIG = null;\n\n    /* Ideally, do not touch anything below this line */\n    /* ______________________________________________ */\n\n    var formElement = document.createElement('form');\n\n    /**\n     * _parseConfig\n     *\n     * @param  optional config literal\n     */\n    var _parseConfig = function(cfg) {\n        /* Shield configuration object from tampering */\n        if (typeof cfg !== 'object') {\n            cfg = {};\n        }\n\n        /* Set configuration parameters */\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ?\n            _addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ?\n            _addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ?\n            _addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ?\n            _addToSet({}, cfg.FORBID_ATTR) : {};\n        ALLOW_ARIA_ATTR     = cfg.ALLOW_ARIA_ATTR     !== false; // Default true\n        ALLOW_DATA_ATTR     = cfg.ALLOW_DATA_ATTR     !== false; // Default true\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n        SAFE_FOR_JQUERY     = cfg.SAFE_FOR_JQUERY     ||  false; // Default false\n        SAFE_FOR_TEMPLATES  = cfg.SAFE_FOR_TEMPLATES  ||  false; // Default false\n        WHOLE_DOCUMENT      = cfg.WHOLE_DOCUMENT      ||  false; // Default false\n        RETURN_DOM          = cfg.RETURN_DOM          ||  false; // Default false\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT ||  false; // Default false\n        RETURN_DOM_IMPORT   = cfg.RETURN_DOM_IMPORT   ||  false; // Default false\n        FORCE_BODY          = cfg.FORCE_BODY          ||  false; // Default false\n        SANITIZE_DOM        = cfg.SANITIZE_DOM        !== false; // Default true\n        KEEP_CONTENT        = cfg.KEEP_CONTENT        !== false; // Default true\n\n        if (SAFE_FOR_TEMPLATES) {\n            ALLOW_DATA_ATTR = false;\n        }\n\n        if (RETURN_DOM_FRAGMENT) {\n            RETURN_DOM = true;\n        }\n\n        /* Merge configuration parameters */\n        if (cfg.ADD_TAGS) {\n            if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n                ALLOWED_TAGS = _cloneObj(ALLOWED_TAGS);\n            }\n            _addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n            if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n                ALLOWED_ATTR = _cloneObj(ALLOWED_ATTR);\n            }\n            _addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n            _addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n\n        /* Add #text in case KEEP_CONTENT is set to true */\n        if (KEEP_CONTENT) { ALLOWED_TAGS['#text'] = true; }\n\n        // Prevent further manipulation of configuration.\n        // Not available in IE8, Safari 5, etc.\n        if (Object && 'freeze' in Object) { Object.freeze(cfg); }\n\n        CONFIG = cfg;\n    };\n\n   /**\n     * _forceRemove\n     *\n     * @param  a DOM node\n     */\n    var _forceRemove = function(node) {\n        DOMPurify.removed.push({element: node});\n        try {\n            node.parentNode.removeChild(node);\n        } catch (e) {\n            node.outerHTML = '';\n        }\n    };\n\n   /**\n     * _removeAttribute\n     *\n     * @param  an Attribute name\n     * @param  a DOM node\n     */\n    var _removeAttribute = function(name, node) {\n        DOMPurify.removed.push({\n            attribute: node.getAttributeNode(name),\n            from: node\n        });\n        node.removeAttribute(name);\n    };\n\n   /**\n     * _initDocument\n     *\n     * @param  a string of dirty markup\n     * @return a DOM, filled with the dirty markup\n     */\n    var _initDocument = function(dirty) {\n        /* Create a HTML document */\n        var doc, body;\n\n        /* Fill body with bogus element */\n        if (FORCE_BODY) {\n            dirty = '<remove></remove>' + dirty;\n        }\n\n        /* Use DOMParser to workaround Firefox bug (see comment below) */\n        if (useDOMParser) {\n            try {\n                doc = new DOMParser().parseFromString(dirty, 'text/html');\n            } catch (e) {}\n        }\n\n        /* Otherwise use createHTMLDocument, because DOMParser is unsafe in\n           Safari (see comment below) */\n        if (!doc || !doc.documentElement) {\n            doc = implementation.createHTMLDocument('');\n            body = doc.body;\n            body.parentNode.removeChild(body.parentNode.firstElementChild);\n            body.outerHTML = dirty;\n        }\n\n        /* Work on whole document or just its body */\n        return getElementsByTagName.call(doc,\n            WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    };\n\n    // Safari 10.1+ (unfixed as of time of writing) has a catastrophic bug in\n    // its implementation of DOMParser such that the following executes the\n    // JavaScript:\n    //\n    // new DOMParser()\n    //   .parseFromString('<svg onload=alert(document.domain)>', 'text/html');\n    //\n    // However, Firefox uses a different parser for innerHTML rather than\n    // DOMParser (see https://bugzilla.mozilla.org/show_bug.cgi?id=1205631)\n    // which means that you *must* use DOMParser, otherwise the output may\n    // not be safe if used in a document.write context later.\n    //\n    // So we feature detect the Firefox bug and use the DOMParser if necessary.\n    if (DOMPurify.isSupported) {\n        (function () {\n            var doc = _initDocument('<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">');\n            if (doc.querySelector('svg img')) {\n                useDOMParser = true;\n            }\n        }());\n    }\n\n    /**\n     * _createIterator\n     *\n     * @param  document/fragment to create iterator for\n     * @return iterator instance\n     */\n    var _createIterator = function(root) {\n        return createNodeIterator.call(root.ownerDocument || root,\n            root,\n            NodeFilter.SHOW_ELEMENT\n            | NodeFilter.SHOW_COMMENT\n            | NodeFilter.SHOW_TEXT,\n            function() { return NodeFilter.FILTER_ACCEPT; },\n            false\n        );\n    };\n\n    /**\n     * _isClobbered\n     *\n     * @param  element to check for clobbering attacks\n     * @return true if clobbered, false if safe\n     */\n    var _isClobbered = function(elm) {\n        if (elm instanceof Text || elm instanceof Comment) {\n            return false;\n        }\n        if (  typeof elm.nodeName !== 'string'\n           || typeof elm.textContent !== 'string'\n           || typeof elm.removeChild !== 'function'\n           || !(elm.attributes instanceof NamedNodeMap)\n           || typeof elm.removeAttribute !== 'function'\n           || typeof elm.setAttribute !== 'function'\n        ) {\n            return true;\n        }\n        return false;\n    };\n\n    /**\n     * _isNode\n     *\n     * @param object to check whether it's a DOM node\n     * @return true is object is a DOM node\n     */\n    var _isNode = function(obj) {\n        return (\n            typeof Node === \"object\" ? obj instanceof Node : obj\n                && typeof obj === \"object\" && typeof obj.nodeType === \"number\"\n                && typeof obj.nodeName===\"string\"\n        );\n    };\n\n    /**\n     * _sanitizeElements\n     *\n     * @protect nodeName\n     * @protect textContent\n     * @protect removeChild\n     *\n     * @param   node to check for permission to exist\n     * @return  true if node was killed, false if left alive\n     */\n    var _sanitizeElements = function(currentNode) {\n        var tagName, content;\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeElements', currentNode, null);\n\n        /* Check if element is clobbered or can clobber */\n        if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n            return true;\n        }\n\n        /* Now let's check the element's type and name */\n        tagName = currentNode.nodeName.toLowerCase();\n\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeElement', currentNode, {\n            tagName: tagName,\n            allowedTags: ALLOWED_TAGS\n        });\n\n        /* Remove element if anything forbids its presence */\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n            /* Keep content except for black-listed elements */\n            if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]\n                    && typeof currentNode.insertAdjacentHTML === 'function') {\n                try {\n                    currentNode.insertAdjacentHTML('AfterEnd', currentNode.innerHTML);\n                } catch (e) {}\n            }\n            _forceRemove(currentNode);\n            return true;\n        }\n\n        /* Convert markup to cover jQuery behavior */\n        if (SAFE_FOR_JQUERY && !currentNode.firstElementChild &&\n                (!currentNode.content || !currentNode.content.firstElementChild) &&\n                /</g.test(currentNode.textContent)) {\n            DOMPurify.removed.push({element: currentNode.cloneNode()});\n            currentNode.innerHTML = currentNode.textContent.replace(/</g, '&lt;');\n        }\n\n        /* Sanitize element content to be template-safe */\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n            /* Get the element's text content */\n            content = currentNode.textContent;\n            content = content.replace(MUSTACHE_EXPR, ' ');\n            content = content.replace(ERB_EXPR, ' ');\n            if (currentNode.textContent !== content) {\n                DOMPurify.removed.push({element: currentNode.cloneNode()});\n                currentNode.textContent = content;\n            }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeElements', currentNode, null);\n\n        return false;\n    };\n\n    var DATA_ATTR = /^data-[\\-\\w.\\u00B7-\\uFFFF]/;\n    var ARIA_ATTR = /^aria-[\\-\\w]+$/;\n    var IS_ALLOWED_URI = /^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i;\n    var IS_SCRIPT_OR_DATA = /^(?:\\w+script|data):/i;\n    /* This needs to be extensive thanks to Webkit/Blink's behavior */\n    var ATTR_WHITESPACE = /[\\x00-\\x20\\xA0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g;\n\n    /**\n     * _sanitizeAttributes\n     *\n     * @protect attributes\n     * @protect nodeName\n     * @protect removeAttribute\n     * @protect setAttribute\n     *\n     * @param   node to sanitize\n     * @return  void\n     */\n    var _sanitizeAttributes = function(currentNode) {\n        var attr, name, value, lcName, idAttr, attributes, hookEvent, l;\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n\n        attributes = currentNode.attributes;\n\n        /* Check if we have attributes; if not we might have a text node */\n        if (!attributes) { return; }\n\n        hookEvent = {\n            attrName: '',\n            attrValue: '',\n            keepAttr: true,\n            allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n\n        /* Go backwards over all attributes; safely remove bad ones */\n        while (l--) {\n            attr = attributes[l];\n            name = attr.name;\n            value = attr.value.trim();\n            lcName = name.toLowerCase();\n\n            /* Execute a hook if present */\n            hookEvent.attrName = lcName;\n            hookEvent.attrValue = value;\n            hookEvent.keepAttr = true;\n            _executeHook('uponSanitizeAttribute', currentNode, hookEvent );\n            value = hookEvent.attrValue;\n\n            /* Remove attribute */\n            // Safari (iOS + Mac), last tested v8.0.5, crashes if you try to\n            // remove a \"name\" attribute from an <img> tag that has an \"id\"\n            // attribute at the time.\n            if (lcName === 'name'  &&\n                    currentNode.nodeName === 'IMG' && attributes.id) {\n                idAttr = attributes.id;\n                attributes = Array.prototype.slice.apply(attributes);\n                _removeAttribute('id', currentNode);\n                _removeAttribute(name, currentNode);\n                if (attributes.indexOf(idAttr) > l) {\n                    currentNode.setAttribute('id', idAttr.value);\n                }\n            } else if (\n                  // This works around a bug in Safari, where input[type=file]\n                  // cannot be dynamically set after type has been removed\n                  currentNode.nodeName === 'INPUT' && lcName === 'type' &&\n                  value === 'file' && (ALLOWED_ATTR[lcName] || !FORBID_ATTR[lcName])) {\n                  continue;\n            } else {\n                // This avoids a crash in Safari v9.0 with double-ids.\n                // The trick is to first set the id to be empty and then to\n                // remove the attribute\n                if (name === 'id') {\n                    currentNode.setAttribute(name, '');\n                }\n                _removeAttribute(name, currentNode);\n            }\n\n            /* Did the hooks approve of the attribute? */\n            if (!hookEvent.keepAttr) {\n                continue;\n            }\n\n            /* Make sure attribute cannot clobber */\n            if (SANITIZE_DOM &&\n                    (lcName === 'id' || lcName === 'name') &&\n                    (value in window || value in document || value in formElement)) {\n                continue;\n            }\n\n            /* Sanitize attribute content to be template-safe */\n            if (SAFE_FOR_TEMPLATES) {\n                value = value.replace(MUSTACHE_EXPR, ' ');\n                value = value.replace(ERB_EXPR, ' ');\n            }\n\n            /* Allow valid data-* attributes: At least one character after \"-\"\n               (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n               XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n               We don't need to check the value; it's always URI safe. */\n            if (ALLOW_DATA_ATTR && DATA_ATTR.test(lcName)) {\n                // This attribute is safe\n            }\n            else if (ALLOW_ARIA_ATTR && ARIA_ATTR.test(lcName)) {\n                // This attribute is safe\n            }\n            /* Otherwise, check the name is permitted */\n            else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n                continue;\n            }\n            /* Check value is safe. First, is attr inert? If so, is safe */\n            else if (URI_SAFE_ATTRIBUTES[lcName]) {\n                // This attribute is safe\n            }\n            /* Check no script, data or unknown possibly unsafe URI\n               unless we know URI values are safe for that attribute */\n            else if (IS_ALLOWED_URI.test(value.replace(ATTR_WHITESPACE,''))) {\n                // This attribute is safe\n            }\n            /* Keep image data URIs alive if src/xlink:href is allowed */\n            else if (\n                (lcName === 'src' || lcName === 'xlink:href') &&\n                value.indexOf('data:') === 0 &&\n                DATA_URI_TAGS[currentNode.nodeName.toLowerCase()]) {\n                // This attribute is safe\n            }\n            /* Allow unknown protocols: This provides support for links that\n               are handled by protocol handlers which may be unknown ahead of\n               time, e.g. fb:, spotify: */\n            else if (\n                ALLOW_UNKNOWN_PROTOCOLS &&\n                !IS_SCRIPT_OR_DATA.test(value.replace(ATTR_WHITESPACE,''))) {\n                // This attribute is safe\n            }\n            /* Check for binary attributes */\n            else if (!value) {\n                // binary attributes are safe at this point\n            }\n            /* Anything else, presume unsafe, do not add it back */\n            else {\n                continue;\n            }\n\n            /* Handle invalid data-* attribute set by try-catching it */\n            try {\n                currentNode.setAttribute(name, value);\n                DOMPurify.removed.pop();\n            } catch (e) {}\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n    };\n\n    /**\n     * _sanitizeShadowDOM\n     *\n     * @param  fragment to iterate over recursively\n     * @return void\n     */\n    var _sanitizeShadowDOM = function(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n\n        while ( (shadowNode = shadowIterator.nextNode()) ) {\n            /* Execute a hook if present */\n            _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n            /* Sanitize tags and elements */\n            if (_sanitizeElements(shadowNode)) {\n                continue;\n            }\n\n            /* Deep shadow DOM detected */\n            if (shadowNode.content instanceof DocumentFragment) {\n                _sanitizeShadowDOM(shadowNode.content);\n            }\n\n            /* Check attributes, sanitize if necessary */\n            _sanitizeAttributes(shadowNode);\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n    };\n\n    /**\n     * _executeHook\n     * Execute user configurable hooks\n     *\n     * @param  {String} entryPoint  Name of the hook's entry point\n     * @param  {Node} currentNode\n     */\n    var _executeHook = function(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) { return; }\n\n        hooks[entryPoint].forEach(function(hook) {\n            hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n    };\n\n    /**\n     * sanitize\n     * Public method providing core sanitation functionality\n     *\n     * @param {String|Node} dirty string or DOM node\n     * @param {Object} configuration object\n     */\n    DOMPurify.sanitize = function(dirty, cfg) {\n        var body, importedNode, currentNode, oldNode, nodeIterator, returnNode;\n        /* Make sure we have a string to sanitize.\n           DO NOT return early, as this will return the wrong type if\n           the user has requested a DOM object rather than a string */\n        if (!dirty) {\n            dirty = '<!-->';\n        }\n\n        /* Stringify, in case dirty is an object */\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n            if (typeof dirty.toString !== 'function') {\n                throw new TypeError('toString is not a function');\n            } else {\n                dirty = dirty.toString();\n            }\n        }\n\n        /* Check we can run. Otherwise fall back or ignore */\n        if (!DOMPurify.isSupported) {\n            if (typeof window.toStaticHTML === 'object'\n                || typeof window.toStaticHTML === 'function') {\n                if (typeof dirty === 'string') {\n                    return window.toStaticHTML(dirty);\n                } else if (_isNode(dirty)) {\n                    return window.toStaticHTML(dirty.outerHTML);\n                }\n            }\n            return dirty;\n        }\n\n        /* Assign config vars */\n        _parseConfig(cfg);\n\n        /* Clean up removed elements */\n        DOMPurify.removed = [];\n\n        if (dirty instanceof Node) {\n            /* If dirty is a DOM element, append to an empty document to avoid\n               elements being stripped by the parser */\n            body = _initDocument('<!-->');\n            importedNode = body.ownerDocument.importNode(dirty, true);\n            if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n                /* Node is already a body, use as is */\n                body = importedNode;\n            } else {\n                body.appendChild(importedNode);\n            }\n        } else {\n            /* Exit directly if we have nothing to do */\n            if (!RETURN_DOM && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n                return dirty;\n            }\n\n            /* Initialize the document to work on */\n            body = _initDocument(dirty);\n\n            /* Check we have a DOM node from the data */\n            if (!body) {\n                return RETURN_DOM ? null : '';\n            }\n        }\n\n        /* Remove first element node (ours) if FORCE_BODY is set */\n        if (FORCE_BODY) {\n            _forceRemove(body.firstChild);\n        }\n\n        /* Get node iterator */\n        nodeIterator = _createIterator(body);\n\n        /* Now start iterating over the created document */\n        while ( (currentNode = nodeIterator.nextNode()) ) {\n\n            /* Fix IE's strange behavior with manipulated textNodes #89 */\n            if (currentNode.nodeType === 3 && currentNode === oldNode) {\n                continue;\n            }\n\n            /* Sanitize tags and elements */\n            if (_sanitizeElements(currentNode)) {\n                continue;\n            }\n\n            /* Shadow DOM detected, sanitize it */\n            if (currentNode.content instanceof DocumentFragment) {\n                _sanitizeShadowDOM(currentNode.content);\n            }\n\n            /* Check attributes, sanitize if necessary */\n            _sanitizeAttributes(currentNode);\n\n            oldNode = currentNode;\n        }\n\n        /* Return sanitized string or DOM */\n        if (RETURN_DOM) {\n\n            if (RETURN_DOM_FRAGMENT) {\n                returnNode = createDocumentFragment.call(body.ownerDocument);\n\n                while (body.firstChild) {\n                    returnNode.appendChild(body.firstChild);\n                }\n            } else {\n                returnNode = body;\n            }\n\n            if (RETURN_DOM_IMPORT) {\n                /* adoptNode() is not used because internal state is not reset\n                   (e.g. the past names map of a HTMLFormElement), this is safe\n                   in theory but we would rather not risk another attack vector.\n                   The state that is cloned by importNode() is explicitly defined\n                   by the specs. */\n                returnNode = importNode.call(originalDocument, returnNode, true);\n            }\n\n            return returnNode;\n        }\n\n        return WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    };\n\n    /**\n     * addHook\n     * Public method to add DOMPurify hooks\n     *\n     * @param {String} entryPoint\n     * @param {Function} hookFunction\n     */\n    DOMPurify.addHook = function(entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') { return; }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        hooks[entryPoint].push(hookFunction);\n    };\n\n    /**\n     * removeHook\n     * Public method to remove a DOMPurify hook at a given entryPoint\n     * (pops it from the stack of hooks if more are present)\n     *\n     * @param {String} entryPoint\n     * @return void\n     */\n    DOMPurify.removeHook = function(entryPoint) {\n        if (hooks[entryPoint]) {\n            hooks[entryPoint].pop();\n        }\n    };\n\n    /**\n     * removeHooks\n     * Public method to remove all DOMPurify hooks at a given entryPoint\n     *\n     * @param  {String} entryPoint\n     * @return void\n     */\n    DOMPurify.removeHooks = function(entryPoint) {\n        if (hooks[entryPoint]) {\n            hooks[entryPoint] = [];\n        }\n    };\n\n    /**\n     * removeAllHooks\n     * Public method to remove all DOMPurify hooks\n     *\n     * @return void\n     */\n    DOMPurify.removeAllHooks = function() {\n        hooks = {};\n    };\n\n    return DOMPurify;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/dompurify/src/purify.js\n// module id = 1032\n// module chunks = 1 3 10 11 14 15 16 17 18 19 21 24 25 28 29 31 32 38 39 41","import Label from './Label'\r\n\r\nexport default Label\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Label/index.js","import PropTypes from 'prop-types'\r\nimport DOMPurify from 'dompurify'\r\nimport ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport './Label.scss'\r\n\r\nexport default class Label extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static propTypes = {\r\n    textAlign: PropTypes.string,\r\n    className: PropTypes.string,\r\n    text: PropTypes.string\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static defaultProps = {\r\n    textAlign: 'left',\r\n    className: '',\r\n    text: ''\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (props) {\r\n\r\n    super (props)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render () {\r\n\r\n    const classNames = [\r\n      'label-container',\r\n      ...this.props.className.split(' ')\r\n    ]\r\n\r\n    const style = {\r\n      width: this.props.textAlign === 'center'\r\n        ? '100%' : '',\r\n      textAlign: this.props.textAlign\r\n    }\r\n\r\n    return(\r\n      <div className={classNames.join(' ')}\r\n        style={style}>\r\n        <p>\r\n          { DOMPurify.sanitize(this.props.text) }\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Label/Label.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../node_modules/sass-loader/index.js!./Label.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/Label/Label.scss\n// module id = 1037\n// module chunks = 1 10 11 14 15 16 17 18 19 24 25 28 29 31 32 38 39 41","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/throttle.js\n// module id = 1152\n// module chunks = 0 25 27 40","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/debounce.js\n// module id = 1222\n// module chunks = 0 25 27 40","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/lodash/now.js\n// module id = 1227\n// module chunks = 0 25 27 40","//import fetchInject from 'fetch-inject'\r\nimport React from 'react'\r\n\r\nexport default class ScriptLoader extends React.Component {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  loadScript (url) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const head = document.head ||\r\n        document.getElementsByTagName(\"head\")[0]\r\n\r\n      let script = document.createElement(\"script\")\r\n\r\n      script.type = \"text\\/javascript\"\r\n      script.async = true\r\n\r\n      script.onerror = (err) => reject(err)\r\n\r\n      script.onload = () => resolve ()\r\n\r\n      head.appendChild(script)\r\n\r\n      script.src = url\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  toArray (obj) {\r\n\r\n    return obj ? (Array.isArray(obj) ? obj : [obj]) : []\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  componentDidMount () {\r\n\r\n    const urls = this.toArray(this.props.url)\r\n\r\n    const loadTasks = urls.map((url) => {\r\n\r\n      return this.loadScript(url)\r\n    })\r\n\r\n    Promise.all(loadTasks).then(() => {\r\n\r\n      if (this.props.onLoaded) {\r\n\r\n        this.props.onLoaded()\r\n      }\r\n    }, (error) => {\r\n\r\n      if (this.props.onError) {\r\n\r\n        this.props.onError()\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render () {\r\n\r\n    return <div/>\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/ScriptLoader/ScriptLoader.js","import ScriptLoader from './ScriptLoader'\r\n\r\nexport default ScriptLoader\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/ScriptLoader/index.js","import template from './autodesk.math@vector3d-1.0.0.template.json'\r\n\r\nmodule.exports = {\r\n  typeId: 'autodesk.math:vector3d-1.0.0',\r\n  name: 'autodesk.math@vector3d',\r\n  template\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Math.Vector3d/index.js","import template from './autodesk.viewer@camera-1.0.0.template.json'\r\n\r\nmodule.exports = {\r\n  typeId: 'autodesk.viewer:camera-1.0.0',\r\n  name: 'autodesk.viewer@camera',\r\n  template\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Viewer.Camera/index.js","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".hfdm .title {\\n  display: -webkit-inline-box;\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.hfdm .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.hfdm .content > .controls {\\n  margin: 10px 10px 0px 10px;\\n  display: inline-block;\\n  white-space: nowrap;\\n  width: 100%; }\\n\\n.hfdm .content > .controls > .row {\\n  width: 100%;\\n  margin: 0; }\\n\\n.hfdm .content > .controls .dropdown {\\n  width: calc(100% - 88px);\\n  margin-bottom: 6px;\\n  float: left; }\\n\\n.hfdm .content > .controls .dropdown > button {\\n  padding: 0 10px 0 10px;\\n  overflow: hidden;\\n  height: 26px;\\n  width: 100%;\\n  margin: 0; }\\n\\n.hfdm .content > .controls button {\\n  background: whitesmoke;\\n  border-radius: 4px;\\n  margin-left: 4px;\\n  outline: none;\\n  height: 26px;\\n  width: 30px;\\n  float: left; }\\n\\n.hfdm .content > .controls button > span {\\n  position: relative;\\n  font-size: 16px;\\n  color: #9b9b9b;\\n  top: -1px; }\\n\\n.hfdm .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.hfdm .content > .controls button:hover:not(:disabled) > span {\\n  color: #FF9800; }\\n\\n.hfdm .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.hfdm .content > .controls label {\\n  margin: 4px 10px 0 10px;\\n  font-weight: normal;\\n  float: left; }\\n\\n.hfdm .clipboard-btn {\\n  border: 1px solid #cdcdcd;\\n  background: whitesmoke;\\n  border-radius: 4px;\\n  margin-left: 8px;\\n  color: #8c8c8c; }\\n\\n.hfdm-controls {\\n  margin: auto 0 auto calc(100% - 140px);\\n  position: relative;\\n  float: left; }\\n\\n.hfdm-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.hfdm-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.hfdm-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.hfdm-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.scss\n// module id = 1391\n// module chunks = 25","module.exports = {\"typeid\":\"autodesk.math:vector3d-1.0.0\",\"properties\":[{\"id\":\"x\",\"typeid\":\"Float64\"},{\"id\":\"y\",\"typeid\":\"Float64\"},{\"id\":\"z\",\"typeid\":\"Float64\"}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Math.Vector3d/autodesk.math@vector3d-1.0.0.template.json\n// module id = 1560\n// module chunks = 25 59","module.exports = {\"typeid\":\"autodesk.viewer:camera-1.0.0\",\"properties\":[{\"id\":\"position\",\"typeid\":\"autodesk.math:vector3d-1.0.0\"},{\"id\":\"target\",\"typeid\":\"autodesk.math:vector3d-1.0.0\"},{\"id\":\"upVector\",\"typeid\":\"autodesk.math:vector3d-1.0.0\"}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Types/Viewer.Camera/autodesk.viewer@camera-1.0.0.template.json\n// module id = 1561\n// module chunks = 25 58","\r\nexport default class BaseHandler {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  bind (workspace) {\r\n\r\n    this.workspace = workspace\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onCreate (property) {\r\n\r\n    this.property = property\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModify (context) {\r\n\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onRemove() {\r\n\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Base.js","import './Viewing.Extension.HFDM'\r\n\r\nexport default 'Viewing.Extension.HFDM'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/index.js","'use strict';\n\nvar deselectCurrent = require('toggle-selection');\n\nvar defaultMessage = 'Copy to clipboard: #{key}, Enter';\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? '⌘' : 'Ctrl') + '+C';\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug, message, reselectPrevious, range, selection, mark, success = false;\n  if (!options) { options = {}; }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement('span');\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = 'unset';\n    // prevents scrolling to the end of the page\n    mark.style.position = 'fixed';\n    mark.style.top = 0;\n    mark.style.clip = 'rect(0, 0, 0, 0)';\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = 'pre';\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = 'text';\n    mark.style.MozUserSelect = 'text';\n    mark.style.msUserSelect = 'text';\n    mark.style.userSelect = 'text';\n\n    document.body.appendChild(mark);\n\n    range.selectNode(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand('copy');\n    if (!successful) {\n      throw new Error('copy command was unsuccessful');\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error('unable to copy using execCommand: ', err);\n    debug && console.warn('trying IE specific stuff');\n    try {\n      window.clipboardData.setData('text', text);\n      success = true;\n    } catch (err) {\n      debug && console.error('unable to copy using clipboardData: ', err);\n      debug && console.error('falling back to prompt');\n      message = format('message' in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == 'function') {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/copy-to-clipboard/index.js\n// module id = 1616\n// module chunks = 25","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _copyToClipboard = require('copy-to-clipboard');\n\nvar _copyToClipboard2 = _interopRequireDefault(_copyToClipboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CopyToClipboard = exports.CopyToClipboard = function (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  function CopyToClipboard() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = CopyToClipboard.__proto__ || Object.getPrototypeOf(CopyToClipboard)).call.apply(_ref, [this].concat(args))), _this), _this.onClick = function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n\n      var elem = _react2.default.Children.only(children);\n\n      var result = (0, _copyToClipboard2.default)(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      }\n\n      // Bypass onClick if it was present\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          _text = _props.text,\n          _onCopy = _props.onCopy,\n          _options = _props.options,\n          children = _props.children,\n          props = _objectWithoutProperties(_props, ['text', 'onCopy', 'options', 'children']);\n\n      var elem = _react2.default.Children.only(children);\n\n      return _react2.default.cloneElement(elem, _extends({}, props, { onClick: this.onClick }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react2.default.PureComponent);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-copy-to-clipboard/lib/Component.js\n// module id = 1625\n// module chunks = 25","'use strict';\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nmodule.exports = CopyToClipboard;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-copy-to-clipboard/lib/index.js\n// module id = 1626\n// module chunks = 25","\r\nconst EntityClassFactory = (BaseEntity, handlerMng) =>\r\n  class extends BaseEntity {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (params) {\r\n\r\n    super (params)\r\n\r\n    this.handler = handlerMng.getHandler(\r\n      params.property._id)\r\n\r\n    this.handler.onCreate(params.property)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModify (context) {\r\n\r\n    this.handler.onModify(context)\r\n\r\n    const absPath = context[0].getAbsolutePath()\r\n\r\n    const path = absPath.split('.')\r\n\r\n    if (path.length > 2) {\r\n\r\n      const parentHandlerId = path[path.length-3]\r\n\r\n      const parentHandler = handlerMng.getHandler(\r\n        parentHandlerId)\r\n\r\n      parentHandler.onModify(context)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onRemove() {\r\n\r\n    this.handler.onRemove()\r\n  }\r\n}\r\n\r\nexport default EntityClassFactory\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/HFDM.Entity.ClassFactory.js","\r\nimport BaseHandler from './Handler.Base'\r\nimport throttle from 'lodash/throttle'\r\n\r\nexport default class CameraHandler extends BaseHandler {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer) {\r\n\r\n    super()\r\n\r\n    this.viewer = viewer\r\n\r\n    this.onCameraChanged = throttle(\r\n      this.onCameraChanged.bind(this), 500)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  activate () {\r\n\r\n    this.viewer.addEventListener(\r\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\r\n      this.onCameraChanged)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModify (context) {\r\n\r\n    const nav = this.viewer.navigation\r\n\r\n    if (context) {\r\n\r\n      context.forEach((modifCtx) => {\r\n\r\n        const path = modifCtx._path\r\n\r\n        const propertyName = path.split('.')[1]\r\n\r\n        const property =\r\n          this.getVectorProperty(\r\n            propertyName)\r\n\r\n        switch (propertyName) {\r\n\r\n          case 'upVector':\r\n            return nav.setCameraUpVector(property)\r\n\r\n          case 'position':\r\n            return nav.setPosition(property)\r\n\r\n          case 'target':\r\n            return nav.setTarget(property)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onRemove() {\r\n\r\n    this.viewer.removeEventListener(\r\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\r\n      this.onCameraChanged)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onCameraChanged (event) {\r\n\r\n    const nav = this.viewer.navigation\r\n\r\n    const position = nav.getPosition()\r\n\r\n    const up = nav.getCameraUpVector()\r\n\r\n    const target = nav.getTarget()\r\n\r\n    this.setVectorProperty('position', position)\r\n    this.setVectorProperty('target', target)\r\n    this.setVectorProperty('upVector', up)\r\n\r\n    this.workspace.commit()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setVectorProperty (name, v) {\r\n\r\n    const vectorProperty = this.property.get(name)\r\n\r\n    vectorProperty.get('x').value = v.x\r\n    vectorProperty.get('y').value = v.y\r\n    vectorProperty.get('z').value = v.z\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  getVectorProperty (name) {\r\n\r\n    const vectorProperty = this.property.get(name)\r\n\r\n    const x = vectorProperty.get('x').value\r\n    const y = vectorProperty.get('y').value\r\n    const z = vectorProperty.get('z').value\r\n\r\n    return new THREE.Vector3(x, y, z)\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Camera.js","import HandlerBase from './Handler.Base'\r\n\r\nexport default class HandlerManager {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor() {\r\n\r\n    this.handlerMap = {}\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  registerHandler(id, handler) {\r\n\r\n    this.handlerMap[id] = handler\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  getHandler (id) {\r\n\r\n    const handler = this.handlerMap[id]\r\n\r\n    return handler || new HandlerBase()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  bind (workspace) {\r\n\r\n    this.workspace = workspace\r\n\r\n    for (var id in this.handlerMap) {\r\n\r\n      this.handlerMap[id].bind(workspace)\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/HFDM/Handlers/Handler.Manager.js","/////////////////////////////////////////////////////////\r\n// Viewing.Extension.HFDM\r\n// by Philippe Leefsma, June 2017\r\n//\r\n/////////////////////////////////////////////////////////\r\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\r\nimport EntityClassFactory from './HFDM/HFDM.Entity.ClassFactory'\r\nimport HandlerManager from './HFDM/Handlers/Handler.Manager'\r\nimport EventsEmitter from 'EventsEmitter'\r\nimport Toolkit from 'Viewer.Toolkit'\r\n\r\n// Types\r\nimport Vector3d from './HFDM/Types/Math.Vector3d'\r\nimport Camera from './HFDM/Types/Viewer.Camera'\r\n\r\n// Handlers\r\nimport CameraHandler from './HFDM/Handlers/Handler.Camera'\r\n\r\nclass HFDMCoreExtension extends MultiModelExtensionBase {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options) {\r\n\r\n    super (viewer, options)\r\n\r\n    this.entityManager =\r\n      new this.options.HFDMAppFramework.EntityManager()\r\n\r\n    this.hfdm = new this.options.HFDM_SDK.HFDM()\r\n\r\n    this.hfdmFactory =\r\n      this.options.HFDM_SDK.PropertyFactory\r\n\r\n    this.CameraHandler = new CameraHandler(viewer)\r\n\r\n    this.handlerManager = new HandlerManager()\r\n\r\n    this.handlerManager.registerHandler(\r\n      'camera', this.CameraHandler)\r\n\r\n    this.registerType(Vector3d, 'LMV')\r\n    this.registerType(Camera, 'LMV')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.HFDM.Core'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    console.log('Viewing.Extension.HFDM.Core loaded')\r\n\r\n    this.initializeHFDM()\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    console.log('Viewing.Extension.HFDM.Core unloaded')\r\n\r\n    super.unload ()\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  registerType (Type, name) {\r\n\r\n    this.hfdmFactory.register(Type.template)\r\n\r\n    const {BaseEntity} = this.options.HFDMAppFramework\r\n\r\n    const EntityClass = EntityClassFactory(\r\n      BaseEntity, this.handlerManager)\r\n\r\n    this.entityManager.registerEntity(\r\n      name, Type.typeId, EntityClass)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  createTypeInstance (Type) {\r\n\r\n    return this.hfdmFactory.create(Type.typeId)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async initializeHFDM() {\r\n\r\n    try {\r\n\r\n      this.workspace = this.hfdm.createWorkspace()\r\n\r\n      this.workspace.on('modified', (changeSet) => {\r\n\r\n        //console.log(changeSet)\r\n      })\r\n\r\n      console.log('Connecting to HFDM ...')\r\n\r\n      await this.hfdm.connect({\r\n        getBearerToken: this.options.getToken,\r\n        serverUrl: this.options.serverUrl\r\n      })\r\n\r\n      console.log('Successfully connected to HFDM')\r\n\r\n      const initParameters = {\r\n        urn: this.options.branchUrn\r\n      }\r\n\r\n      await this.workspace.initialize(initParameters)\r\n\r\n      this.handlerManager.bind(this.workspace)\r\n\r\n      this.entityManager.bind(this.workspace)\r\n\r\n      const branchGUID =\r\n        this.workspace.getActiveBranch().getGuid()\r\n\r\n      this.options.getToken((err, token) => {\r\n\r\n        const inspectorURL =\r\n          `http://ecs-master-opt.ecs.ads.autodesk.com:3501/HFDMInspector.html?` +\r\n          `branchGuid=${branchGUID}&` +\r\n          `token=${token}`\r\n\r\n        this.emit('inspectorURL', inspectorURL)\r\n      })\r\n\r\n      if (!this.options.branchUrn) {\r\n\r\n        const branchUrn = this.workspace.getActiveUrn()\r\n\r\n        // share workspace for write to everybody *\r\n\r\n        //await this.hfdm.share([branchUrn], ['*'])\r\n\r\n        const colaborateURL =\r\n          `${window.location.href}&branchUrn=${branchUrn}`\r\n\r\n        this.emit('colaborateURL', colaborateURL)\r\n\r\n        this.initializeAsHost()\r\n\r\n      } else {\r\n\r\n        const colaborateURL = window.location.href\r\n\r\n        this.emit('colaborateURL', colaborateURL)\r\n\r\n        this.initializeAsParticipant()\r\n      }\r\n\r\n      this.CameraHandler.activate()\r\n\r\n    } catch (ex) {\r\n\r\n      console.log(ex)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  initializeAsHost () {\r\n\r\n    const position =\r\n      this.viewer.navigation.getPosition()\r\n\r\n    const target =\r\n      this.viewer.navigation.getTarget()\r\n\r\n    const upVector =\r\n      this.viewer.navigation.getCameraUpVector()\r\n\r\n    const cameraProperty =\r\n      this.createTypeInstance(Camera)\r\n\r\n    this.setVectorProperty(\r\n      cameraProperty,\r\n      'position',\r\n      position)\r\n\r\n    this.setVectorProperty(\r\n      cameraProperty,\r\n      'target',\r\n      target)\r\n\r\n    this.setVectorProperty(\r\n      cameraProperty,\r\n      'upVector',\r\n      upVector)\r\n\r\n    this.workspace.insert(\r\n      'camera', cameraProperty)\r\n\r\n    this.workspace.commit()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setVectorProperty (parentProperty, name, v) {\r\n\r\n    const vectorProperty = parentProperty.get(name)\r\n\r\n    vectorProperty.get('x').value = v.x\r\n    vectorProperty.get('y').value = v.y\r\n    vectorProperty.get('z').value = v.z\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  initializeAsParticipant () {\r\n\r\n\r\n  }\r\n}\r\n\r\nAutodesk.Viewing.theExtensionManager.registerExtension(\r\n  HFDMCoreExtension.ExtensionId,\r\n  HFDMCoreExtension)\r\n\r\nexport default HFDMCoreExtension.ExtensionId\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.Core.js","/////////////////////////////////////////////////////////\r\n// Viewing.Extension.ModelLoader\r\n// by Philippe Leefsma, April 2017\r\n//\r\n/////////////////////////////////////////////////////////\r\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\r\nimport HFDMCoreExtensionId from './Viewing.Extension.HFDM.Core'\r\nimport Clipboard from 'react-copy-to-clipboard'\r\nimport { browserHistory } from 'react-router'\r\nimport WidgetContainer from 'WidgetContainer'\r\nimport ScriptLoader from 'ScriptLoader'\r\nimport ServiceManager from 'SvcManager'\r\nimport './Viewing.Extension.HFDM.scss'\r\nimport { ReactLoader } from 'Loader'\r\nimport Toolkit from 'Viewer.Toolkit'\r\nimport DOMPurify from 'dompurify'\r\nimport ReactDOM from 'react-dom'\r\nimport Label from 'Label'\r\nimport React from 'react'\r\nimport {\r\n  DropdownButton,\r\n  MenuItem\r\n} from 'react-bootstrap'\r\n\r\nclass HFDMExtension extends MultiModelExtensionBase {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options) {\r\n\r\n    super (viewer, options)\r\n\r\n    this.onScriptLoaded = this.onScriptLoaded.bind(this)\r\n\r\n    this.renderTitle = this.renderTitle.bind(this)\r\n\r\n    this.dialogSvc =\r\n      ServiceManager.getService(\r\n        'DialogSvc')\r\n\r\n    this.forgeSvc =\r\n      ServiceManager.getService(\r\n        'ForgeSvc')\r\n\r\n    this.react = options.react\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  get className() {\r\n\r\n    return 'hfdm'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.HFDM'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    this.react.setState({\r\n\r\n      user: this.options.appState.user,\r\n      colaborateURL: null,\r\n      inspectorURL: null\r\n\r\n    }).then (() => {\r\n\r\n      this.react.pushRenderExtension(this)\r\n\r\n      if (!this.options.appState.user) {\r\n\r\n        this.forgeSvc.getUser().then((user) => {\r\n\r\n          this.react.setState({\r\n            user\r\n          })\r\n\r\n        }, (err) => {\r\n\r\n          this.showLogin()\r\n        })\r\n      }\r\n    })\r\n\r\n    console.log('Viewing.Extension.HFDM loaded')\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    console.log('Viewing.Extension.HFDM unloaded')\r\n\r\n    this.react.popViewerPanel(this)\r\n\r\n    super.unload ()\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Panel docking mode\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async setDocking (docked) {\r\n\r\n    const id = HFDMExtension.ExtensionId\r\n\r\n    if (docked) {\r\n\r\n      await this.react.popRenderExtension(id)\r\n\r\n      await this.react.pushViewerPanel(this, {\r\n        height: 250,\r\n        width: 350\r\n      })\r\n\r\n    } else {\r\n\r\n      await this.react.popViewerPanel(id)\r\n\r\n      this.react.pushRenderExtension(this)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  sleep (ms) {\r\n    return new Promise((resolve) => {\r\n      setTimeout(() => resolve (), ms)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // callback: function (error, bearerToken)\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  getToken (callback) {\r\n\r\n    $.get('/api/forge/token/3legged', (res) => {\r\n\r\n      callback(null, res.access_token)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  showLogin () {\r\n\r\n    const onClose = (result) => {\r\n\r\n      this.dialogSvc.off('dialog.close', onClose)\r\n\r\n      if (result === 'OK') {\r\n\r\n        this.forgeSvc.login()\r\n        return\r\n      }\r\n\r\n      browserHistory.push('/configurator')\r\n    }\r\n\r\n    this.dialogSvc.on('dialog.close', onClose)\r\n\r\n    this.dialogSvc.setState({\r\n      onRequestClose: () => {},\r\n      className: 'login-dlg',\r\n      title: 'Forge Login required ...',\r\n      content:\r\n        <div>\r\n          Press OK to login ...\r\n        </div>,\r\n      open: true\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  async onScriptLoaded () {\r\n\r\n    while (!(window.Forge &&\r\n             window.Forge.HFDM &&\r\n             window.Forge.AppFramework)) {\r\n\r\n      await this.sleep(100)\r\n    }\r\n\r\n    const HFDMCoreExtension =\r\n      await this.viewer.loadExtension(\r\n        HFDMCoreExtensionId, {\r\n          serverUrl: 'https://developer.api.autodesk.com/lynx/v1/pss',\r\n          branchUrn: this.options.location.query.branchUrn,\r\n          HFDMAppFramework: window.Forge.AppFramework,\r\n          HFDM_SDK: window.Forge.HFDM,\r\n          getToken: this.getToken\r\n        })\r\n\r\n    HFDMCoreExtension.on('colaborateURL', (colaborateURL) => {\r\n\r\n      console.log('------- colaborateURL -------')\r\n      console.log(colaborateURL)\r\n\r\n      this.react.setState({\r\n        colaborateURL\r\n      })\r\n    })\r\n\r\n    HFDMCoreExtension.on('inspectorURL', (inspectorURL) => {\r\n\r\n      console.log('------- inspectorURL -------')\r\n      console.log(inspectorURL)\r\n    })\r\n\r\n    this.options.loader.show(false)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render panel title\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderTitle (docked) {\r\n\r\n    const spanClass = docked\r\n      ? 'fa fa-chain-broken'\r\n      : 'fa fa-chain'\r\n\r\n    return (\r\n      <div className=\"title\">\r\n        <label>\r\n          HFDM\r\n        </label>\r\n        <div className=\"hfdm-controls\">\r\n          <button onClick={() => this.setDocking(docked)}\r\n            title=\"Toggle docking mode\">\r\n            <span className={spanClass}/>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render panel controls\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  renderControls () {\r\n\r\n    const {colaborateURL, inspectorURL} =\r\n      this.react.getState()\r\n\r\n    const showLoader = !colaborateURL\r\n\r\n    return (\r\n      <div>\r\n        <ReactLoader show={showLoader}/>\r\n        <ScriptLoader onLoaded={this.onScriptLoaded}\r\n          url={[\r\n            \"/resources/libs/hfdm/forge-entity-manager.js\",\r\n            \"/resources/libs/hfdm/forge-hfdm.js\"\r\n          ]}/>\r\n        <br/>\r\n        {\r\n          colaborateURL &&\r\n          <div>\r\n            <a href={colaborateURL} target='_blank'>\r\n              Collaborate URL\r\n            </a>\r\n            <Clipboard\r\n              text={colaborateURL}>\r\n              <button className=\"clipboard-btn\"\r\n                title=\"Copy to clipboard\">\r\n              <span className=\"fa fa-clipboard\"/>\r\n              </button>\r\n            </Clipboard>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // React method - render extension UI\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  render (opts) {\r\n\r\n    const {user} = this.react.getState()\r\n\r\n    return (\r\n      <WidgetContainer\r\n        renderTitle={() => this.renderTitle(opts.docked)}\r\n        showTitle={opts.showTitle}\r\n        className={this.className}>\r\n        {\r\n          user && this.renderControls()\r\n        }\r\n      </WidgetContainer>\r\n    )\r\n  }\r\n}\r\n\r\nAutodesk.Viewing.theExtensionManager.registerExtension(\r\n  HFDMExtension.ExtensionId,\r\n  HFDMExtension)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.HFDM.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.HFDM.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Viewing.Extension.HFDM.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.HFDM/Viewing.Extension.HFDM.scss\n// module id = 1811\n// module chunks = 25","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/toggle-selection/index.js\n// module id = 1894\n// module chunks = 25"],"sourceRoot":""}