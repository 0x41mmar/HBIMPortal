{"version":3,"sources":["webpack:///./src/client/viewer.components/Viewer.Toolkit/index.js?3d64******************","webpack:///./~/babel-runtime/helpers/get.js?a320*****************","webpack:///./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js?9bfb******************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/index.js?d1b9*******","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js?48a7*******","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Vector.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/BaseObject.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.css","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.css","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/EventsEmitter.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Field.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/MagneticField.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Particle.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/ParticleEmitter.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/ParticleSystem.js","webpack:///./~/dat-gui/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/index.js","webpack:///./~/dat-gui/vendor/dat.color.js","webpack:///./~/dat-gui/vendor/dat.gui.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/TransformGizmos.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Panel.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Tool.Mesh.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Tool.PointCloud.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Tool.Particle.Translate.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/FPSMeter.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/GUIObjectAdapter.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.css?ee50","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.css?b369"],"names":["Toolkit","format","d","Date","getTime","guid","replace","c","r","Math","random","floor","toString","urn","resolve","reject","paramUrn","startsWith","Autodesk","Viewing","Document","load","doc","error","roles","rootItem","getRootItem","items","roleArray","Array","isArray","forEach","role","getSubItemsWithProperties","type","id","className","tooltip","handler","button","UI","Button","icon","style","fontSize","setToolTip","onClick","viewer","ctrlGroupName","viewerToolbar","getToolbar","ctrlGroup","ControlGroup","addControl","model","dbIds","instanceTree","getData","getRootId","dbIdArray","leafIds","getLeafNodesRec","childCount","enumNodeChildren","childId","push","i","length","ex","getLeafNodes","fragIds","enumNodeFragments","fragId","leafId","dbId","getFragIds","fragList","getFragmentList","fragbBox","THREE","Box3","nodebBox","getWorldBounds","union","requestedProps","dbIdInt","parseInt","isNaN","propTasks","map","displayName","getProperty","all","then","properties","getProperties","result","defaultValue","prop","displayValue","Error","activeModel","propertyTasks","propertyResults","propertyResult","indexOf","sort","propFilter","propRes","filteredRes","filter","res","propFilterArray","getBulkProperties","components","defaultProp","getBulkPropertiesAsync","results","componentsMap","value","split","root","taskFunc","tasks","runTaskOnDataTreeRec","node","parent","children","childNode","task","min","max","material","overlayId","geometry","Geometry","vertices","Vector3","x","y","z","lines","Line","LinePieces","impl","addOverlay","invalidate","setMaterial","createNodeFunc","_buildModelTreeRec","name","getNodeName","rootId","rootNode","taskResults","_executeTaskOnModelTreeRec","hide","targetIds","visibilityManager","setNodeOff","show","isolate","targetLeafIds","leafTasks","resolveLeaf","axis","angle","center","quaternion","Quaternion","setFromAxisAngle","fragProxy","getFragmentProxy","getAnimTransform","position","applyQuaternion","add","multiplyQuaternions","updateAnimTransform","state","immediate","onStateRestored","removeEventListener","VIEWER_STATE_RESTORED_EVENT","pivot","viewport","pivotPoint","setTimeout","navigation","setPivotPoint","addEventListener","restoreState","parentId","nodeName","faceFilter","vertexArray","getLeafFragIds","matrixWorld","meshGeometry","renderProxy","getRenderProxy","attributes","positions","vb","array","indices","index","ib","stride","vbstride","offsets","count","start","oi","ol","il","a","b","vA","vB","vC","fromArray","faceIdx","face","Face3","faces","applyMatrix","computeFaceNormals","computeVertexNormals","mesh","Mesh","scale","excludedFragIds","svf","mc","getVisibleBounds","pt","nodeAccess","nodeBoxes","scaledExplodeDepth","maxDepth","explodeDepth","currentSegmentFraction","it","tmpBox","Float32Array","explodeRec","nodeId","depth","cx","cy","cz","ox","oy","oz","oscale","getNodeBox","mycx","mycy","mycz","dx","dy","dz","boxes","fragments","nbFrags","getCount","box_offset","getUserAgent","navigator","userAgent","isAndroid","match","isBlackBerry","isIOS","isOpera","isWindows","isWindowsDesktop","isWindowsMobile","isAny","MultiModelExtensionBase","options","defaultOptions","onModelCompletedLoad","bind","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","event","eventSink","off","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","on","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventIdArray","eventTasks","__handler","Composer","Extension","ExtensionBase","_viewer","_options","Vector","_x","_y","_z","sqrt","m","magnitude","scaleFactor","vector","radius","magnitudeSqr","size","data","BaseObject","_offset","_position","_selectable","_transformable","_type","_id","transformable","selectable","Instance","EventsEmitter","_events","fct","undefined","splice","tmpArray","slice","apply","prototype","call","arguments","Field","particle","MagneticField","_force","particlePos","fieldPos","dX","dY","dZ","force","_charge","pow","abs","particleAcc","_acceleration","Particle","dof","_velocity","_recycled","_radius","_dof","_lifeTime","ptr","fields","field","applyForce","dt","lifeTime","ParticleEmitter","_spread","PI","_emissionRate","angle1","angle2","cos","sin","emissionRate","velocity","spread","charge","ParticleSystem","maxParticles","_maxParticles","_emittedParticles","_particleIdx","_recycleBin","_particles","_emitters","_fields","emitter","getId","addNewParticles","filterParticles","emitNumber","popRecycle","emitParticle","pop","reset","pushRecycle","filterParticle","submitToFields","step","init_TransformGizmos","GizmoMaterial","parameters","MeshBasicMaterial","depthTest","depthWrite","side","FrontSide","transparent","setValues","oldColor","color","clone","oldOpacity","opacity","highlight","highlighted","setRGB","copy","GizmoLineMaterial","LineBasicMaterial","linewidth","PolyhedronGeometry","detail","that","l","prepare","midpoints","p","j","v1","v2","v3","centroid","subdivide","faceVertexUvs","uvs","x0","x1","x2","multiplyScalar","mergeVertices","boundingSphere","Sphere","vertex","normalize","u","azimuth","v","inclination","uv","Vector2","make","divideScalar","azi","correctUV","cols","cells","aj","lerp","bj","rows","k","atan2","OctahedronGeometry","TorusGeometry","tube","radialSegments","tubularSegments","arc","normals","sub","createCircleGeometry","facing","createArrowGeometry","radiusTop","radiusBottom","height","heightSegments","openEnded","arrowGeometry","CylinderGeometry","updateMatrix","merge","matrix","createLineGeometry","lineGeometry","TransformGizmo","scope","showPickers","showActivePlane","init","Object3D","handles","pickers","planes","highlights","hemiPicker","subPickers","planeGeometry","PlaneBufferGeometry","planeMaterial","wireframe","DoubleSide","activePlane","rotation","set","visible","setupGizmos","activeMode","traverse","child","tempGeometry","BufferGeometry","fromBufferGeometry","addGizmos","gizmoMap","object","visble","setHandlePickerGizmos","handleGizmos","pickerGizmos","highlightGizmos","hemiPickerGizmos","subPickerGizmos","update","eye","vec1","vec2","lookAtMatrix","Matrix4","search","setFromRotationMatrix","lookAt","setFromEuler","TransformGizmoTranslate","lineXGeometry","lineYGeometry","lineZGeometry","X","Y","Z","XYZ","XY","YZ","XZ","BoxGeometry","setActivePlane","tempMatrix","applyMatrix4","getInverse","extractRotation","TransformGizmoRotate","RX","RY","RZ","RE","RXYZE","eye2","worldRotation","Euler","tempQuaternion","unitX","unitY","unitZ","quaternionX","quaternionY","quaternionZ","makeRotationFromQuaternion","TransformGizmoTranslateRotate","theta","SphereGeometry","useAllPickers","TransformGizmoScale","TransformControls","camera","domElement","mode","document","gizmo","snap","snapDelta","space","normal","startLine","endLine","LineDashedMaterial","centerLine","ImageUtils","loadTexture","Private","getResourceUrl","magFilter","minFilter","NearestFilter","CircleGeometry","centerMark","ticks","w","h","_dragging","_mode","_plane","changeEvent","mouseDownEvent","mouseUpEvent","objectChangeEvent","ray","Raycaster","pointerVector","pointerDir","point","offset","offsetRotation","tempVector","projX","projY","projZ","quaternionXYZ","quaternionE","oldPosition","oldScale","oldRotationMatrix","parentRotationMatrix","parentScale","worldPosition","worldRotationMatrix","camPosition","camRotation","attach","updateUnitVectors","detach","setMode","dispatchEvent","getPicker","setPosition","setNormal","setFromUnitVectors","multiply","setSnap","delta","setSize","setSpace","updateMatrixWorld","setFromMatrixPosition","applyEuler","dist","distanceTo","isPerspective","tan","fov","rect","getBoundingClientRect","showRotationGizmos","onPointerHover","pointer","pointers","intersect","intersectObjects","onPointerDown","pointerType","planeIntersect","setFromMatrixScale","verticesNeedUpdate","pos","getAttribute","pt1","fromAttribute","pt2","pt3","pt4","dashSize","gapSize","computeLineDistances","onPointerMove","dot","rotz","rotsnap","round","tempAxis","cross","rot","angleTo","projx","projy","projz","tempx","tempy","tempz","rotx","roty","matrixAutoUpdate","onPointerUp","remove","objects","clientX","left","width","clientY","top","unproject","transformDirection","intersections","ParticlePanel","extension","btnElement","container","buttonElement","closable","$","addClass","particleSystem","gui","GUI","autoPlace","guiContainer","getElementById","appendChild","folder","addFolder","maxParticleCtrl","onFinishChange","emit","toolCtrl","open","obj","getSelectable","append","getType","selectedObjectGUI","getEmitter","getter","setter","emitterFolder","onChange","chargeCtrl","property","getMagneticField","fieldFolder","forceCtrl","window","setVisible","tool","getName","meshFolder","shadersCtrl","loadObjectGUI","vertexShader","fragmentShader","ParticleToolMesh","toolController","registerTool","stopwatch","nbParticleTypes","particleMaterials","createRandomMaterials","activateShaders","shaders","active","console","log","getElapsedMs","activateTool","deactivateTool","clearParticles","initParticleLoop","nextParticle","destroyParticle","nb","materials","clr","createMaterial","shading","FlatShading","shininess","specular","scene","bounds","bound","getPosition","withinSphere","withinBox","updateChunk","tick","updateParticle","randomInt","createMesh","getRadius","getRecycled","setLifeTime","getX","getY","getZ","shader","uniforms","Vector4","shaderMaterial","ShaderMaterial","activate","updateParticleShadersOn","updateParticleShadersOff","props","MeshPhongMaterial","matman","addMaterial","vertexshader","fragmentshader","ParticleToolPointCloud","vertexColors","VertexColors","pointCloud","createPointCloud","bufferGeometry","maxPoints","dynamic","addAttribute","BufferAttribute","colors","PointCloud","ParticleExtension","particlePanel","transformTool","objectMaterials","createObjectMaterials","particleToolPointCloud","particleToolMesh","activeParticleTool","loader","loadScene","setProgressiveRendering","css","fps","FPSMeter","maxFps","smoothing","decimals","theme","heat","graph","toggleOn","history","onTxChange","onSelect","autoStart","loadPanel","onObjectModified","setMaxParticles","deactivate","loadToolGUI","destroy","txChange","updateObjectPosition","select","getObjectById","setSelected","getTransformable","matIdx","getWorldBoundingBox","bbox","propSettings","settings","JSON","parse","setDof","propBounds","parseBound","loadEmitters","loadObjects","loadFields","propBound","loadObject","addEmitter","setTransformable","transfo","setEmissionRate","rate","setSelectable","setVelocity","setCharge","setSpread","dir","setOffset","loadEmitter","addMagneticField","setForce","loadField","theExtensionManager","registerExtension","ExtensionId","TransformTool","_dbIds","_hitPoint","_selectSet","_isDragging","_transformMesh","_modifiedFragIdMap","_transformControlTx","_selectedFragProxyMap","onAggregateSelectionChanged","onCameraChanged","handleSelectionChanged","sphere","sceneUpdated","fragIdsArray","selections","selection","CAMERA_CHANGE_EVENT","screenPoint","getScreenViewport","n","hitPoint","utilities","getHitPoint","getBoundingBox","createOverlayScene","canvas","getBoundingSphere","createTransformMesh","removeOverlay","removeOverlayScene","newEl","createElement","applyTheme","element","e","String","Object","toLowerCase","inArray","extend","key","hasOwnProperty","concat","hslToHex","s","g","sv","sextant","fract","vsf","componentToHex","listener","eventName","attachEvent","perf","performance","now","webkitNow","perfNow","cAF","cancelAnimationFrame","cancelRequestAnimationFrame","rAF","requestAnimationFrame","vendors","lastTime","callback","currTime","timeToCall","clearTimeout","textProp","textContent","anchor","nodeType","body","self","o","defaults","el","heatmaps","heatDepth","heating","thisFrameTime","frameTime","threshold","frameStart","lastLoop","time","fpsHistory","durationHistory","frameID","renderID","showFps","graphHeight","duration","isPaused","tickStart","pause","resume","requestRender","rebuilders","createMeter","repositioners","positionMeter","showDuration","toggle","display","historyTick","getHeat","heatmap","updateCounter","legend","toFixed","render","interval","heatOn","column","eventHandler","preventDefault","stopPropagation","returnValue","cancelBubble","removeMeter","removeChild","setTheme","compiledHeatmaps","saturation","lightness","spacing","bottom","right","clientHeight","cursor","zIndex","margin","base","padding","minWidth","lineHeight","textAlign","textShadow","fontFamily","boxSizing","MozBoxSizing","dark","background","border","light","boxShadow","colorful","backgroundColor","GUIObjectAdapter","mapping","getDefaultOptions","shadow","movable","ToolPanelBase","title","_dialogResult","_isVisible","_isMinimized","_btnElement","classList","createTitleBar","titleLabel","setTitle","initializeMoveHandlers","closer","createCloseButton","$content","htmlContent","content","titleBar","titleTextId","titleImgId","html","movedSinceLastClick","onTitleClick","onTitleDoubleClick","text","localizeTitle","attr","i18n","translate","removeAttr","_height","handlers","DockingPanel"],"mappings":"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;AAEX;;AAEA,SAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;;AAEX;;AAEA,SAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;;AAEX;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;;AAGA,CAAC;AACD;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;AACA,kB;;;;;;;AClvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,U;;AAEA,aAAa;;AAEb;;AAEA;;AAEA;AACA;AACA;;AAEA,OAAO;;AAEP;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA,OAAO;;AAEP;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA,KAAK;;AAEL;;;AAGA,iD;;AAEA;;AAEA,OAAO,0CAA0C;;AAEjD,yCAAyC,SAAS;AAClD;AACA;;AAEA,OAAO;;AAEP;AACA;AACA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA,SAAS;;AAET;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC;;;AAGD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,CAAC;AACD;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,+BAA+B;AAC/B,OAAO;AACP;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA,qBAAqB,iCAAiC;AACtD;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA,qBAAqB,iCAAiC;AACtD;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA,qBAAqB,iCAAiC;AACtD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,QAAQ,OAAO;AACf;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;;;AAGA,CAAC;AACD;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA,aAAa,QAAQ;AACrB,aAAa,YAAY;AACzB,aAAa,QAAQ;AACrB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;;AAGL;;AAEA;AACA;;AAEA,KAAK;;AAEL,qBAAqB;;AAErB;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA,OAAO;;;AAGP;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA,2CAA2C,mBAAmB;AAC9D,2DAA2D,kBAAkB,EAAE;AAC/E,qDAAqD,mBAAmB;AACxE,sDAAsD,mBAAmB;AACzE;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA,qBAAqB,YAAY;AACjC,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC;;AAEhC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wCAAwC;;AAExC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B,oBAAoB,MAAM;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA,SAAS;;AAET;AACA,qBAAqB,YAAY;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;;AAEA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;;AAEX;AACA;AACA,WAAW;;AAEX;AACA;AACA;;;AAGA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA,WAAW,wEAAwE;;AAEnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;;AAEA;;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA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","file":"30.js","sourcesContent":["import ViewerToolkit from './Viewer.Toolkit'\r\n\r\nexport default ViewerToolkit\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/index.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 1022\n// module chunks = 0 10 11 12 13 14 15 16 20 21 22 23 24 25 26 27 28 29 30 31 32 33 35 36 37 42 45 46 47 50 51 54","\r\n\r\nexport default class Toolkit {\r\n\r\n  ///////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime();\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\r\n      });\r\n\r\n    return guid;\r\n  }\r\n\r\n  /////////////////////////////////////////////\r\n  //mobile detection\r\n  //\r\n  /////////////////////////////////////////////\r\n  static get mobile() {\r\n\r\n    return {\r\n\r\n      getUserAgent: function () {\r\n        return navigator.userAgent;\r\n      },\r\n      isAndroid: function () {\r\n        return this.getUserAgent().match(/Android/i);\r\n      },\r\n      isBlackBerry: function () {\r\n        return this.getUserAgent().match(/BlackBerry/i);\r\n      },\r\n      isIOS: function () {\r\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i);\r\n      },\r\n      isOpera: function () {\r\n        return this.getUserAgent().match(/Opera Mini/i);\r\n      },\r\n      isWindows: function () {\r\n        return this.isWindowsDesktop() || this.isWindowsMobile();\r\n      },\r\n      isWindowsMobile: function () {\r\n        return this.getUserAgent().match(/IEMobile/i);\r\n      },\r\n      isWindowsDesktop: function () {\r\n        return this.getUserAgent().match(/WPDesktop/i);\r\n      },\r\n      isAny: function () {\r\n\r\n        return this.isAndroid() ||\r\n          this.isBlackBerry() ||\r\n          this.isIOS() ||\r\n          this.isWindowsMobile();\r\n      }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load a document from URN\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static loadDocument (urn) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const paramUrn = !urn.startsWith('urn:')\r\n        ? 'urn:' + urn\r\n        : urn\r\n\r\n      Autodesk.Viewing.Document.load(paramUrn, (doc) => {\r\n\r\n        resolve (doc)\r\n\r\n      }, (error) => {\r\n\r\n        reject (error)\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Return viewables\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getViewableItems (doc, roles = ['3d', '2d']) {\r\n\r\n    const rootItem = doc.getRootItem()\r\n\r\n    let items = []\r\n\r\n    const roleArray = roles\r\n      ? (Array.isArray(roles) ? roles : [roles])\r\n      : []\r\n\r\n    roleArray.forEach((role) => {\r\n\r\n      items = [ ...items,\r\n        ...Autodesk.Viewing.Document.getSubItemsWithProperties(\r\n          rootItem, { type: 'geometry', role }, true) ]\r\n    })\r\n\r\n    return items\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Toolbar button\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createButton(id, className, tooltip, handler) {\r\n\r\n    var button = new Autodesk.Viewing.UI.Button(id)\r\n\r\n    button.icon.style.fontSize = '24px'\r\n\r\n    button.icon.className = className\r\n\r\n    button.setToolTip(tooltip)\r\n\r\n    button.onClick = handler\r\n\r\n    return button\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Control group\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static createControlGroup (viewer, ctrlGroupName) {\r\n\r\n    var viewerToolbar = viewer.getToolbar(true)\r\n\r\n    if (viewerToolbar) {\r\n\r\n      var ctrlGroup =  new Autodesk.Viewing.UI.ControlGroup(\r\n        ctrlGroupName)\r\n\r\n      viewerToolbar.addControl(ctrlGroup)\r\n\r\n      return ctrlGroup\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafNodes (model, dbIds) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n        let leafIds = []\r\n\r\n        const getLeafNodesRec = (id) => {\r\n\r\n          var childCount = 0;\r\n\r\n          instanceTree.enumNodeChildren(id, (childId) => {\r\n\r\n              getLeafNodesRec(childId)\r\n\r\n              ++childCount\r\n            })\r\n\r\n          if (childCount == 0) {\r\n\r\n            leafIds.push(id)\r\n          }\r\n        }\r\n\r\n        for (var i = 0; i < dbIdArray.length; ++i) {\r\n\r\n          getLeafNodesRec(dbIdArray[i])\r\n        }\r\n\r\n        return resolve(leafIds)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getFragIds (model, dbIds) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const instanceTree = model.getData().instanceTree\r\n\r\n        dbIds = dbIds || instanceTree.getRootId()\r\n\r\n        const dbIdArray = Array.isArray(dbIds)\r\n          ? dbIds : [dbIds]\r\n\r\n        const leafIds =\r\n          await Toolkit.getLeafNodes(\r\n            model, dbIdArray)\r\n\r\n        const fragIds = []\r\n\r\n        for(var i=0; i< leafIds.length; ++i) {\r\n\r\n          instanceTree.enumNodeFragments(\r\n            leafIds[i], (fragId) => {\r\n              fragIds.push(fragId)\r\n            })\r\n        }\r\n\r\n        return resolve(fragIds)\r\n\r\n      } catch(ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // get leaf node fragIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getLeafFragIds (model, leafId) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const fragIds = []\r\n\r\n    instanceTree.enumNodeFragments(\r\n      leafId, (fragId) => {\r\n        fragIds.push(fragId)\r\n      })\r\n\r\n    return fragIds\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Node bounding box\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getWorldBoundingBox (model, dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var fragIds =\r\n          await Toolkit.getFragIds(\r\n            model, dbId)\r\n\r\n        if (!fragIds.length) {\r\n\r\n          return reject('No geometry, invalid dbId?')\r\n        }\r\n\r\n        var fragList = model.getFragmentList()\r\n\r\n        var fragbBox = new THREE.Box3()\r\n        var nodebBox = new THREE.Box3()\r\n\r\n        fragIds.forEach(function(fragId) {\r\n\r\n          fragList.getWorldBounds(fragId, fragbBox)\r\n          nodebBox.union(fragbBox)\r\n        })\r\n\r\n        return resolve(nodebBox)\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets properties from component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperties (model, dbId, requestedProps = null) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const dbIdInt = parseInt(dbId)\r\n\r\n        if (isNaN(dbIdInt)) {\r\n\r\n          return reject(dbId + ' is not a valid integer')\r\n        }\r\n\r\n        if (requestedProps) {\r\n\r\n          const propTasks = requestedProps.map((displayName) => {\r\n\r\n            return Toolkit.getProperty(\r\n              model, dbIdInt, displayName, 'Not Available')\r\n          })\r\n\r\n          Promise.all(propTasks).then((properties) => {\r\n\r\n            resolve(properties)\r\n          })\r\n\r\n        } else {\r\n\r\n          model.getProperties(dbIdInt, (result) => {\r\n\r\n            if (result.properties) {\r\n\r\n              return resolve(\r\n                result.properties)\r\n            }\r\n\r\n            return reject('No Properties')\r\n          })\r\n        }\r\n\r\n      } catch (ex) {\r\n\r\n          return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getProperty (model, dbId, displayName, defaultValue) {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model.getProperties(dbId, (result) => {\r\n\r\n          if (result.properties) {\r\n\r\n            result.properties.forEach((prop) => {\r\n\r\n              prop.dbId = dbId\r\n\r\n              if (typeof displayName === 'function') {\r\n\r\n                if (displayName (prop.displayName)){\r\n\r\n                  resolve(prop)\r\n                }\r\n\r\n              } else if (displayName === prop.displayName) {\r\n\r\n                resolve(prop)\r\n              }\r\n            })\r\n\r\n            if (defaultValue) {\r\n\r\n              return resolve({\r\n                displayValue: defaultValue,\r\n                displayName,\r\n                dbId\r\n              })\r\n            }\r\n\r\n            reject(new Error('Not Found'))\r\n\r\n          } else {\r\n\r\n            reject(new Error('Error getting properties'));\r\n          }\r\n        })\r\n\r\n      } catch(ex){\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Gets all existing properties from component  dbIds\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getPropertyList (viewer, dbIds, model = null) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        model = model || viewer.activeModel || viewer.model\r\n\r\n        var propertyTasks = dbIds.map((dbId) => {\r\n\r\n          return Toolkit.getProperties(model, dbId)\r\n        })\r\n\r\n        var propertyResults = await Promise.all(\r\n          propertyTasks)\r\n\r\n        var properties = []\r\n\r\n        propertyResults.forEach((propertyResult) => {\r\n\r\n          propertyResult.forEach((prop) => {\r\n\r\n            if (properties.indexOf(prop.displayName) < 0){\r\n\r\n              properties.push(prop.displayName)\r\n            }\r\n          })\r\n        })\r\n\r\n        return resolve(properties.sort())\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getBulkPropertiesAsync (model, dbIds, propFilter) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      if (typeof propFilter === 'function') {\r\n\r\n        const propTasks = dbIds.map((dbId) => {\r\n\r\n          return this.getProperty(\r\n            model, dbId, propFilter, 'Not Found')\r\n        })\r\n\r\n        const propRes = await Promise.all(propTasks)\r\n\r\n        const filteredRes = propRes.filter((res) => {\r\n\r\n          return res.displayValue !== 'Not Found'\r\n        })\r\n\r\n        resolve(filteredRes.map((res) => {\r\n\r\n          return {\r\n            properties: [res],\r\n            dbId: res.dbId\r\n          }\r\n        }))\r\n\r\n      } else {\r\n\r\n        const propFilterArray = Array.isArray (propFilter)\r\n          ? propFilter :[propFilter]\r\n\r\n\r\n        model.getBulkProperties(dbIds, propFilterArray, (result) => {\r\n\r\n          resolve (result)\r\n\r\n        }, (error) => {\r\n\r\n          reject(error)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Maps components by property\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static mapComponentsByProp (model, propFilter, components, defaultProp) {\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n\r\n      try {\r\n\r\n        const results = await Toolkit.getBulkPropertiesAsync(\r\n          model, components, propFilter)\r\n\r\n        const propertyResults = results.map((result) => {\r\n\r\n          const prop = result.properties[0]\r\n\r\n          return Object.assign({}, prop, {\r\n            dbId: result.dbId\r\n          })\r\n        })\r\n\r\n        var componentsMap = {};\r\n\r\n        propertyResults.forEach((result) => {\r\n\r\n          var value = result.displayValue;\r\n\r\n          if (typeof value == 'string') {\r\n\r\n            value = value.split(':')[0]\r\n          }\r\n\r\n          if (!componentsMap[value]) {\r\n\r\n            componentsMap[value] = []\r\n          }\r\n\r\n          componentsMap[value].push(result.dbId)\r\n        })\r\n\r\n        return resolve(componentsMap)\r\n\r\n      } catch (ex) {\r\n\r\n        return reject(ex)\r\n      }\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // Runs recursively the argument task on each node\r\n  // of the data tree\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  static runTaskOnDataTree(root, taskFunc) {\r\n\r\n    var tasks = [];\r\n\r\n    var runTaskOnDataTreeRec = (node, parent=null)=> {\r\n\r\n      if (node.children) {\r\n\r\n        node.children.forEach((childNode)=> {\r\n\r\n          runTaskOnDataTreeRec(childNode, node);\r\n        });\r\n      }\r\n\r\n      var task = taskFunc(node, parent);\r\n\r\n      tasks.push(task);\r\n    }\r\n\r\n    runTaskOnDataTreeRec(root);\r\n\r\n    return Promise.all(tasks);\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static drawBox (viewer, min, max, material, overlayId) {\r\n\r\n    const geometry = new THREE.Geometry()\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\r\n\r\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\r\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\r\n\r\n    const lines = new THREE.Line(geometry,\r\n      material, THREE.LinePieces)\r\n\r\n    viewer.impl.addOverlay(overlayId, lines)\r\n\r\n    viewer.impl.invalidate(\r\n      true, true, true)\r\n\r\n    return lines\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Set component material\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async setMaterial(model, dbId, material) {\r\n\r\n    const fragIds = await Toolkit.getFragIds(\r\n      model, dbId)\r\n\r\n    const fragList = model.getFragmentList()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      fragList.setMaterial(fragId, material)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively builds the model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildModelTree (model, createNodeFunc = null){\r\n\r\n    //builds model tree recursively\r\n    function _buildModelTreeRec(node){\r\n\r\n      instanceTree.enumNodeChildren(node.dbId,\r\n        function(childId) {\r\n\r\n          var childNode = null;\r\n\r\n          if(createNodeFunc){\r\n\r\n            childNode = createNodeFunc(childId);\r\n\r\n          } else {\r\n\r\n            node.children = node.children || [];\r\n\r\n            childNode = {\r\n              dbId: childId,\r\n              name: instanceTree.getNodeName(childId)\r\n            }\r\n\r\n            node.children.push(childNode)\r\n          }\r\n\r\n          _buildModelTreeRec(childNode)\r\n        })\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree\r\n\r\n    var rootId = instanceTree.getRootId()\r\n\r\n    var rootNode = {\r\n      dbId: rootId,\r\n      name: instanceTree.getNodeName(rootId)\r\n    }\r\n\r\n    _buildModelTreeRec(rootNode)\r\n\r\n    return rootNode\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Recursively execute task on model tree\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static executeTaskOnModelTree (model, task) {\r\n\r\n    var taskResults = [];\r\n\r\n    function _executeTaskOnModelTreeRec(dbId){\r\n\r\n      instanceTree.enumNodeChildren(dbId,\r\n        function(childId) {\r\n\r\n          taskResults.push(task(model, childId));\r\n\r\n          _executeTaskOnModelTreeRec(childId);\r\n        });\r\n    }\r\n\r\n    //get model instance tree and root component\r\n    var instanceTree = model.getData().instanceTree;\r\n\r\n    var rootId = instanceTree.getRootId();\r\n\r\n    _executeTaskOnModelTreeRec(rootId);\r\n\r\n    return taskResults;\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static hide (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.hide (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const tasks = targetIds.map((dbId) => {\r\n\r\n        return new Promise((resolve) => {\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, true)\r\n\r\n          resolve()\r\n        })\r\n      })\r\n\r\n      return Promise.all(tasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static show (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.show (dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      targetIds.forEach((dbId) => {\r\n\r\n        viewer.impl.visibilityManager.setNodeOff(\r\n          dbId, false)\r\n      })\r\n\r\n      return Promise.resolve()\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static async isolateFull (viewer, dbIds = [], model = null) {\r\n\r\n    try {\r\n\r\n      model = model || viewer.activeModel || viewer.model\r\n\r\n      viewer.isolate(dbIds)\r\n\r\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\r\n\r\n      const targetLeafIds = await Toolkit.getLeafNodes(\r\n        model, targetIds)\r\n\r\n      const leafIds = await Toolkit.getLeafNodes (model)\r\n\r\n      const leafTasks = leafIds.map((dbId) => {\r\n\r\n        return new Promise((resolveLeaf) => {\r\n\r\n          const show = !targetLeafIds.length  ||\r\n            targetLeafIds.indexOf(dbId) > -1\r\n\r\n          viewer.impl.visibilityManager.setNodeOff(\r\n            dbId, !show)\r\n\r\n          resolveLeaf()\r\n        })\r\n      })\r\n\r\n      return Promise.all(leafTasks)\r\n\r\n    } catch (ex) {\r\n\r\n      return Promise.reject(ex)\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Rotate selected fragments\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  static rotateFragments (viewer, fragIds, axis, angle, center, model = null) {\r\n\r\n    var quaternion = new THREE.Quaternion()\r\n\r\n    quaternion.setFromAxisAngle(axis, angle)\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      var fragProxy = viewer.impl.getFragmentProxy(\r\n        model, fragId)\r\n\r\n      fragProxy.getAnimTransform()\r\n\r\n      var position = new THREE.Vector3(\r\n        fragProxy.position.x - center.x,\r\n        fragProxy.position.y - center.y,\r\n        fragProxy.position.z - center.z)\r\n\r\n      position.applyQuaternion(quaternion)\r\n\r\n      position.add(center)\r\n\r\n      fragProxy.position = position\r\n\r\n      fragProxy.quaternion.multiplyQuaternions(\r\n        quaternion, fragProxy.quaternion)\r\n\r\n      fragProxy.updateAnimTransform()\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // A fix for viewer.restoreState\r\n  // that also restores pivotPoint\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static restoreStateWithPivot (\r\n    viewer, state, filter = null, immediate = false) {\r\n\r\n    const onStateRestored = () => {\r\n\r\n      viewer.removeEventListener(\r\n        Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n        onStateRestored)\r\n\r\n      const pivot = state.viewport.pivotPoint\r\n\r\n      setTimeout(() => {\r\n\r\n        viewer.navigation.setPivotPoint(\r\n          new THREE.Vector3(\r\n            pivot[0], pivot[1], pivot[2]))\r\n      }, immediate ? 0 : 1250)\r\n    }\r\n\r\n    viewer.addEventListener(\r\n      Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\r\n      onStateRestored)\r\n\r\n    viewer.restoreState(state, filter, immediate)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static getComponentsByParentName (name, model) {\r\n\r\n    const instanceTree = model.getData().instanceTree\r\n\r\n    const rootId = instanceTree.getRootId()\r\n\r\n    let parentId = 0\r\n\r\n    instanceTree.enumNodeChildren(rootId,\r\n      (childId) => {\r\n\r\n        const nodeName = instanceTree.getNodeName(childId)\r\n\r\n        if (nodeName.indexOf(name) > -1) {\r\n\r\n          parentId = childId\r\n        }\r\n      })\r\n\r\n    return parentId > 0\r\n      ? Toolkit.getLeafNodes(model, parentId)\r\n      : []\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Creates a standard THREE.Mesh out of a Viewer\r\n  // component\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static buildComponentMesh (\r\n    viewer, model, dbId, faceFilter, material) {\r\n\r\n    const vertexArray = []\r\n\r\n    // first we assume the component dbId is a leaf\r\n    // component: ie has no child so contains\r\n    // geometry. This util method will return all fragIds\r\n    // associated with that specific dbId\r\n    const fragIds = Toolkit.getLeafFragIds(model, dbId)\r\n\r\n    let matrixWorld = null\r\n\r\n    const meshGeometry = new THREE.Geometry()\r\n\r\n    fragIds.forEach((fragId) => {\r\n\r\n      // for each fragId, get the proxy in order to access\r\n      // THREE geometry\r\n      const renderProxy =\r\n        viewer.impl.getRenderProxy(\r\n          model, fragId)\r\n\r\n      matrixWorld = matrixWorld ||\r\n      renderProxy.matrixWorld\r\n\r\n      const geometry = renderProxy.geometry\r\n\r\n      const attributes = geometry.attributes\r\n\r\n      const positions = geometry.vb\r\n        ? geometry.vb\r\n        : attributes.position.array\r\n\r\n      const indices = attributes.index.array || geometry.ib\r\n\r\n      const stride = geometry.vb ? geometry.vbstride : 3\r\n\r\n      const offsets = [{\r\n        count: indices.length,\r\n        index: 0,\r\n        start: 0\r\n      }]\r\n\r\n      for (var oi = 0, ol = offsets.length; oi < ol; ++oi) {\r\n\r\n        var start = offsets[oi].start\r\n        var count = offsets[oi].count\r\n        var index = offsets[oi].index\r\n\r\n        for (var i = start, il = start + count; i < il; i += 3) {\r\n\r\n          const a = index + indices[i]\r\n          const b = index + indices[i + 1]\r\n          const c = index + indices[i + 2]\r\n\r\n          const vA = new THREE.Vector3()\r\n          const vB = new THREE.Vector3()\r\n          const vC = new THREE.Vector3()\r\n\r\n          vA.fromArray(positions, a * stride)\r\n          vB.fromArray(positions, b * stride)\r\n          vC.fromArray(positions, c * stride)\r\n\r\n          if (!faceFilter || faceFilter(vA, vB, vC)) {\r\n\r\n            const faceIdx = meshGeometry.vertices.length\r\n\r\n            meshGeometry.vertices.push(vA)\r\n            meshGeometry.vertices.push(vB)\r\n            meshGeometry.vertices.push(vC)\r\n\r\n            const face = new THREE.Face3(\r\n              faceIdx, faceIdx + 1, faceIdx + 2)\r\n\r\n            meshGeometry.faces.push(face)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    meshGeometry.applyMatrix(matrixWorld)\r\n    meshGeometry.computeFaceNormals()\r\n    meshGeometry.computeVertexNormals()\r\n\r\n    // creates THREE.Mesh\r\n    const mesh = new THREE.Mesh(\r\n      meshGeometry, material)\r\n\r\n    mesh.dbId = dbId\r\n\r\n    return mesh\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static selectiveExplode (viewer, scale, excludedFragIds, model = null) {\r\n\r\n    model = model || viewer.activeModel || viewer.model\r\n\r\n    var svf = model.getData();\r\n\r\n    var mc = model.getVisibleBounds(true).center();\r\n\r\n    var fragList = model.getFragmentList();\r\n\r\n    var pt = new THREE.Vector3();\r\n\r\n    //Input scale is in the range 0-1, where 0\r\n    //means no displacement, and 1 maximum reasonable displacement.\r\n    scale *= 2;\r\n\r\n    //If we have a full part hierarchy we can use a\r\n    //better grouping strategy when exploding\r\n    if (svf.instanceTree && svf.instanceTree.nodeAccess.nodeBoxes && scale !== 0) {\r\n\r\n      var scaledExplodeDepth = scale * (svf.instanceTree.maxDepth - 1) + 1;\r\n      var explodeDepth = 0 | scaledExplodeDepth;\r\n      var currentSegmentFraction = scaledExplodeDepth - explodeDepth;\r\n\r\n      var it = svf.instanceTree;\r\n      var tmpBox = new Float32Array(6);\r\n\r\n      (function explodeRec(nodeId, depth, cx, cy, cz, ox, oy, oz) {\r\n\r\n        var oscale = scale * 2;\r\n\r\n        // smooth transition of this tree depth\r\n        // from non-exploded to exploded state\r\n        if (depth == explodeDepth)\r\n          oscale *= currentSegmentFraction;\r\n\r\n        it.getNodeBox(nodeId, tmpBox);\r\n\r\n        var mycx = 0.5 * (tmpBox[0] + tmpBox[3]);\r\n        var mycy = 0.5 * (tmpBox[1] + tmpBox[4]);\r\n        var mycz = 0.5 * (tmpBox[2] + tmpBox[5]);\r\n\r\n        if (depth > 0 && depth <= explodeDepth) {\r\n          var dx = (mycx - cx) * oscale;\r\n          var dy = (mycy - cy) * oscale;\r\n          var dz = (mycz - cz) * oscale;\r\n\r\n          //var omax = Math.max(dx, Math.max(dy, dz));\r\n          ox += dx;\r\n          oy += dy;\r\n          oz += dz;\r\n        }\r\n\r\n        svf.instanceTree.enumNodeChildren(nodeId, function(dbId) {\r\n\r\n          explodeRec(dbId, depth+1, mycx, mycy, mycz, ox, oy, oz);\r\n\r\n        }, false);\r\n\r\n        svf.instanceTree.enumNodeFragments(nodeId, function(fragId) {\r\n\r\n          if (excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n            pt.x = ox;\r\n            pt.y = oy;\r\n            pt.z = oz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n\r\n        }, false);\r\n\r\n      })(svf.instanceTree.getRootId(), 0, mc.x, mc.y, mc.x, 0, 0, 0);\r\n\r\n    } else {\r\n\r\n      var boxes = fragList.fragments.boxes;\r\n\r\n      var nbFrags = fragList.getCount()\r\n\r\n      for (var fragId = 0; fragId < nbFrags; ++fragId) {\r\n\r\n        if(excludedFragIds.indexOf(fragId.toString()) < 0) {\r\n\r\n          if (scale == 0) {\r\n\r\n            fragList.updateAnimTransform(fragId);\r\n\r\n          } else {\r\n\r\n            var box_offset = fragId * 6;\r\n\r\n            var cx = 0.5 * (boxes[box_offset] + boxes[box_offset + 3]);\r\n            var cy = 0.5 * (boxes[box_offset + 1] + boxes[box_offset + 4]);\r\n            var cz = 0.5 * (boxes[box_offset + 2] + boxes[box_offset + 5]);\r\n\r\n            cx = scale * (cx - mc.x);\r\n            cy = scale * (cy - mc.y);\r\n            cz = scale * (cz - mc.z);\r\n\r\n            pt.x = cx;\r\n            pt.y = cy;\r\n            pt.z = cz;\r\n\r\n            fragList.updateAnimTransform(fragId, null, null, pt);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Toolkit/Viewer.Toolkit.js","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\r\n\r\nexport default MultiModelExtensionBase\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/index.js","import EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class MultiModelExtensionBase extends\r\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}, defaultOptions = {}) {\r\n\r\n    super (viewer)\r\n\r\n    // bindings\r\n\r\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\r\n    this.onObjectTreeCreated  = this.onObjectTreeCreated.bind(this)\r\n    this.onModelRootLoaded    = this.onModelRootLoaded.bind(this)\r\n    this.onExtensionLoaded    = this.onExtensionLoaded.bind(this)\r\n    this.onModelActivated     = this.onModelActivated.bind(this)\r\n    this.onGeometryLoaded     = this.onGeometryLoaded.bind(this)\r\n    this.onToolbarCreated     = this.onToolbarCreated.bind(this)\r\n    this.onModelBeginLoad     = this.onModelBeginLoad.bind(this)\r\n    this.onModelUnloaded      = this.onModelUnloaded.bind(this)\r\n    this.onSelection          = this.onSelection.bind(this)\r\n\r\n    this.__onModelActivated   = this.__onModelActivated.bind(this)\r\n    this.__onModelUnloaded    = this.__onModelUnloaded.bind(this)\r\n    this.__onModelLoaded      = this.__onModelLoaded.bind(this)\r\n\r\n    this.defaultOptions = defaultOptions\r\n\r\n    this.options = Object.assign({},\r\n      defaultOptions,\r\n      options)\r\n\r\n    this.viewer = viewer\r\n\r\n    // read the modelQueue to detect currently loaded models\r\n    // when the extension gets loaded\r\n    const models = viewer.impl.modelQueue().getModels()\r\n\r\n    this.models = models.map((model) => {\r\n\r\n      model.guid = model.guid || this.guid()\r\n\r\n      return model\r\n    })\r\n\r\n    this.initializeEvents ()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.MultiModelExtensionBase'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load () {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload () {\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewer.removeEventListener(\r\n        event.id, this[event.handler])\r\n    })\r\n\r\n    if (this.eventSink) {\r\n\r\n      this.eventSink.off('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.off('model.unloaded',\r\n        this.__onModelUnloaded)\r\n\r\n      this.eventSink.off('model.loaded',\r\n        this.__onModelLoaded)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Reload callback, in case the extension is re-loaded\r\n  // more than once\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  reload (options = {}) {\r\n\r\n    this.options = Object.assign({},\r\n      this.defaultOptions,\r\n      this.options,\r\n      options)\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when extension gets loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onExtensionLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onExtensionLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when the model starts to load\r\n  // The geometry and instanceTree may not be available\r\n  // at this time\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelBeginLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelBeginLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model is\r\n  // selected in a multi-model environment\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelActivated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelActivated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when model root node has been loaded\r\n  // Extensions that do not require access to full\r\n  // model geometry or component tree may use that\r\n  // event to know a new model has been loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelRootLoaded (event) {\r\n\r\n    this.viewerEvent([\r\n\r\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\r\n\r\n    ]).then((args) => {\r\n\r\n      this.onModelCompletedLoad (args[0])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when object tree is fully loaded.\r\n  // Extensions that are interested in using the\r\n  // instanceTree need to use that event to make sure\r\n  // it is available\r\n  //\r\n  ////////////////////////////////////////////////////////\r\n  onObjectTreeCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onObjectTreeCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when geometry is fully loaded\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onGeometryLoaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onGeometryLoaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\r\n  // have both been fired\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelCompletedLoad (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelCompletedLoad')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked once the viewer toolbar has been created\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onToolbarCreated (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onToolbarCreated')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Triggered by ModelLoader extension when a model has\r\n  // been unloaded as per user request\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelUnloaded (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onModelUnloaded')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Invoked when a model is being selected\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSelection (event) {\r\n\r\n    //console.log('MultiModelExtensionBase.onSelection')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //Sink Events\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  __onModelLoaded (event) {\r\n\r\n    this.models = [...this.models, event.model]\r\n\r\n    this.onModelBeginLoad (event)\r\n  }\r\n\r\n  __onModelActivated (event) {\r\n\r\n    this.onModelActivated (event)\r\n  }\r\n\r\n  __onModelUnloaded (event) {\r\n\r\n    this.models = this.models.filter((model) => {\r\n\r\n      return model.guid !== event.model.guid\r\n    })\r\n\r\n    this.onModelUnloaded(event)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Initialize all events for the extension\r\n  // Each event will invoke a predefined handler\r\n  // implemented or not by the derived extension\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  initializeEvents () {\r\n\r\n    if (this.options.eventSink) {\r\n\r\n      // event object passed in options\r\n      this.eventSink = this.options.eventSink\r\n\r\n      this.eventSink.on('model.loaded',\r\n        this.__onModelLoaded)\r\n\r\n      this.eventSink.on('model.activated',\r\n        this.__onModelActivated)\r\n\r\n      this.eventSink.on('model.unloaded',\r\n        this.__onModelUnloaded)\r\n    }\r\n\r\n    this.viewerEvents = [\r\n      {\r\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\r\n        handler: 'onExtensionLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\r\n        handler: 'onObjectTreeCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\r\n        handler: 'onModelRootLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\r\n        handler: 'onGeometryLoaded'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\r\n        handler: 'onToolbarCreated'\r\n      },\r\n      {\r\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n        handler: 'onSelection'\r\n      }\r\n    ]\r\n\r\n    this.viewerEvents.forEach((event) => {\r\n\r\n      this.viewerEvent(event.id, this[event.handler])\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Async viewer event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  viewerEvent (eventId, handler) {\r\n\r\n    if (handler) {\r\n\r\n      this.viewer.addEventListener (eventId, handler)\r\n      return\r\n    }\r\n\r\n    const eventIdArray = Array.isArray(eventId)\r\n      ? eventId : [eventId]\r\n\r\n    const eventTasks = eventIdArray.map((id) => {\r\n      return new Promise ((resolve) => {\r\n        const __handler = (args) => {\r\n          this.viewer.removeEventListener (id, __handler)\r\n          resolve (args)\r\n        }\r\n        this.viewer.addEventListener (id, __handler)\r\n      })\r\n    })\r\n\r\n    return Promise.all (eventTasks)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","import ViewerExtensionBase from './Viewer.ExtensionBase'\r\n\r\nexport default ViewerExtensionBase\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/index.js","import EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class ExtensionBase extends\r\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}) {\r\n\r\n    super(viewer, options)\r\n\r\n    this._viewer = viewer\r\n    this.viewer = viewer\r\n\r\n    this._options = options\r\n    this.options = options\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.Base'\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime()\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n      })\r\n\r\n    return guid\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load() {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload() {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Reload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  reload (options) {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Async viewer event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  viewerEvent (eventId) {\r\n\r\n    const eventIdArray = Array.isArray(eventId)\r\n      ? eventId : [eventId]\r\n\r\n    const eventTasks = eventIdArray.map((id) => {\r\n      return new Promise ((resolve) => {\r\n        const handler = (args) => {\r\n          this.viewer.removeEventListener (\r\n            id, handler)\r\n          resolve (args)\r\n        }\r\n        this.viewer.addEventListener (\r\n          id, handler)\r\n      })\r\n    })\r\n\r\n    return Promise.all(eventTasks)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js","\r\nexport default class Vector {\r\n\r\n  constructor (x = 0, y = 0, z = 0) {\r\n    this._x = x\r\n    this._y = y\r\n    this._z = z\r\n  }\r\n\r\n  getX () { return this._x }\r\n  getY () { return this._y }\r\n  getZ () { return this._z }\r\n\r\n  magnitude () {\r\n\r\n    return Math.sqrt(\r\n      this._x * this._x +\r\n      this._y * this._y +\r\n      this._z * this._z)\r\n  }\r\n\r\n  asUnitVector () {\r\n\r\n    var m = this.magnitude()\r\n\r\n    return new Vector(\r\n      this._x / m,\r\n      this._y / m,\r\n      this._z / m)\r\n  }\r\n\r\n  scaled (scaleFactor) {\r\n\r\n    var m = this.magnitude()\r\n\r\n    return new Vector(\r\n      this._x * scaleFactor / m,\r\n      this._y * scaleFactor / m,\r\n      this._z * scaleFactor / m)\r\n  }\r\n\r\n  multiply (scaleFactor) {\r\n\r\n    this._x *= scaleFactor\r\n    this._y *= scaleFactor\r\n    this._z *= scaleFactor\r\n\r\n    return this\r\n  }\r\n\r\n  add (vector) {\r\n\r\n    this._x += vector._x\r\n    this._y += vector._y\r\n    this._z += vector._z\r\n\r\n    return this\r\n  }\r\n\r\n  vectorTo (vector) {\r\n\r\n    return new Vector(\r\n      vector._x - this._x,\r\n      vector._y - this._y,\r\n      vector._z - this._z\r\n    )\r\n  }\r\n\r\n  withinSphere (center, radius) {\r\n\r\n    var magnitudeSqr =\r\n      (this._x - center._x) * (this._x - center._x) +\r\n      (this._y - center._y) * (this._y - center._y) +\r\n      (this._z - center._z) * (this._z - center._z)\r\n\r\n    return magnitudeSqr < radius * radius\r\n  }\r\n\r\n  withinBox (center, size) {\r\n\r\n    //TODO\r\n\r\n    return true\r\n  }\r\n\r\n  copy () {\r\n\r\n    return new Vector(this._x, this._y, this._z)\r\n  }\r\n\r\n  static fromArray (data) {\r\n\r\n    return new Vector(data[0], data[1], data[2])\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Vector.js","import Vector from './Vector'\r\n\r\nexport default class BaseObject {\r\n\r\n  constructor (id, type) {\r\n    \r\n    this._offset        = new Vector()\r\n    this._position      = new Vector()\r\n    this._selectable    = true\r\n    this._transformable = true\r\n    this._type          = type\r\n    this._id            = id\r\n  }\r\n\r\n  setPosition (x, y, z) {\r\n\r\n    this._position = new Vector(\r\n      x + this._offset._x,\r\n      y + this._offset._y,\r\n      z + this._offset._z)\r\n  }\r\n\r\n  getPosition () {\r\n\r\n    return this._position\r\n  }\r\n\r\n  setOffset (x, y, z) {\r\n\r\n    this._offset = new Vector(x, y, z)\r\n  }\r\n\r\n  getOffset () {\r\n\r\n    return this._offset\r\n  }\r\n\r\n  setTransformable (transformable) {\r\n\r\n    this._transformable = transformable\r\n  }\r\n\r\n  getTransformable () {\r\n\r\n    return this._transformable\r\n  }\r\n\r\n  setSelectable (selectable) {\r\n\r\n    this._selectable = selectable\r\n  }\r\n\r\n  getSelectable () {\r\n\r\n    return this._selectable\r\n  }\r\n\r\n  getType() {\r\n\r\n    return this._type\r\n  }\r\n\r\n  getId() {\r\n\r\n    return this._id\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/BaseObject.js","import ParticleSystem from './ParticleSystem'\r\nimport Vector from './Vector'\r\n\r\nexport default {\r\n  Instance: ParticleSystem,\r\n  Vector\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/index.js","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".particle{\\r\\n    top: 10px;\\r\\n    right: 10px;\\r\\n    width: 265px;\\r\\n    height: 320px;\\r\\n    resize: auto;\\r\\n}\\r\\n\\r\\n.particle .container {\\r\\n    width: 100%;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.particle .btn {\\r\\n    height: 6px;\\r\\n    line-height: 0;\\r\\n    vertical-align: top;\\r\\n}\\r\\n\\r\\n.particle .btn-span {\\r\\n    margin-right: 0px;\\r\\n    line-height: 0.3;\\r\\n    top: 1px;\\r\\n}\\r\\n\\r\\n.particle .dg.main {\\r\\n    width: 100%\\r\\n}\\r\\n\\r\\n.particle .dg.main.taller-than-window .close-button {\\r\\n    border-top: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n.particle .dg.main .close-button {\\r\\n    background-color: #ccc;\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.particle .dg.main .close-button:hover {\\r\\n    background-color: #ddd;\\r\\n}\\r\\n\\r\\n.particle .dg {\\r\\n    color: #555;\\r\\n    text-shadow: none !important;\\r\\n}\\r\\n\\r\\n.particle .dg.main::-webkit-scrollbar {\\r\\n    background: #fafafa;\\r\\n}\\r\\n\\r\\n.particle .dg.main::-webkit-scrollbar-thumb {\\r\\n    background: #bbb;\\r\\n}\\r\\n\\r\\n.particle .dg li:not(.folder) {\\r\\n    background: #fafafa;\\r\\n    border-bottom: 1px solid #ddd;\\r\\n}\\r\\n\\r\\n.particle .dg li.save-row .button {\\r\\n    text-shadow: none !important;\\r\\n}\\r\\n\\r\\n.particle .dg li.title {\\r\\n    background: #e8e8e8 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\\r\\n}\\r\\n\\r\\n.particle .dg .cr.function:hover, .dg .cr.boolean:hover {\\r\\n    background: #fff;\\r\\n}\\r\\n\\r\\n.particle .dg .c input[type=text] {\\r\\n    background: #e9e9e9;\\r\\n    border: 0;\\r\\n    margin-top: 0px;\\r\\n    padding: 0px;\\r\\n    float: right;\\r\\n}\\r\\n\\r\\n.particle .dg .c input[type=text]:hover {\\r\\n    background: #eee;\\r\\n}\\r\\n\\r\\n.particle .dg .c input[type=text]:focus {\\r\\n    background: #eee;\\r\\n    color: #555;\\r\\n}\\r\\n\\r\\n.particle .dg .c .slider {\\r\\n    background: #e9e9e9;\\r\\n    height: 28px;\\r\\n    margin-top: 0px;\\r\\n}\\r\\n\\r\\n.particle .dg .c .slider:hover {\\r\\n    background: #eee;\\r\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.css\n// module id = 1414\n// module chunks = 30","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\\r\\n\\r\\n.dockingPanel .dockingPanelTitle img, .dockingPanel .dockingPanelTitle img:before {\\r\\n    content: url('data:image/png;base64,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');\\r\\n}\\r\\n\\r\\n.toolPanelBase .dockingPanelClose {\\r\\n    position: absolute;\\r\\n    top: -3px;\\r\\n}\\r\\n\\r\\n.toolPanelBase .dockingPanelTitle {\\r\\n    padding: 4px 10px 4px 10px;\\r\\n    text-transform: none;\\r\\n}\\r\\n\\r\\n.dockingPanel .dockingPanelTitle .dockingPanelTitleText {\\r\\n    margin-top: 4px;\\r\\n    text-transform: none;\\r\\n}\\r\\n\\r\\n.dockingPanel .dockingPanelTitle img, .dockingPanel .dockingPanelTitle img:before {\\r\\n    float: left;\\r\\n    width: 24px;\\r\\n    height: 24px;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.css\n// module id = 1415\n// module chunks = 30","\r\nexport default class EventsEmitter {\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  constructor() {\r\n\r\n    this._events = {};\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  on(event, fct) {\r\n\r\n    this._events[event] = this._events[event]\t|| [];\r\n    this._events[event].push(fct);\r\n\r\n    return this;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  off(event, fct) {\r\n\r\n    if(event == undefined){\r\n      this._events = {};\r\n      return;\r\n    }\r\n\r\n    if(event in this._events === false)\r\n      return;\r\n\r\n    if(fct){\r\n      this._events[event].splice(\r\n        this._events[event].indexOf(fct), 1);\r\n    }\r\n    else {\r\n      this._events[event] = [];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  emit(event /* , args... */) {\r\n\r\n    if(this._events[event] === undefined)\r\n      return;\r\n\r\n    var tmpArray = this._events[event].slice();\r\n\r\n    for(var i = 0; i < tmpArray.length; ++i) {\r\n\r\n      var result\t= tmpArray[i].apply(this,\r\n        Array.prototype.slice.call(arguments, 1));\r\n\r\n      if(result !== undefined )\r\n        return result;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  guid(format='xxxxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime();\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\r\n      });\r\n\r\n    return guid;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/EventsEmitter.js","import BaseObject from './BaseObject'\r\nimport Vector from './Vector'\r\n\r\nexport default class Field extends BaseObject {\r\n\r\n  constructor (id, type) {\r\n\r\n    super(id, type)\r\n  }\r\n\r\n  computeAcceleration (particle) {\r\n\r\n    return new Vector()\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Field.js","\r\nimport Field from './Field'\r\n\r\nexport default class MagneticField extends Field {\r\n\r\n  constructor (id) {\r\n\r\n    super(id, 1)\r\n\r\n    this._force = 0\r\n  }\r\n\r\n  applyForce (particle) {\r\n\r\n    let particlePos = particle._position\r\n\r\n    let fieldPos = this._position\r\n\r\n    let dX = fieldPos._x - particlePos._x\r\n    let dY = fieldPos._y - particlePos._y\r\n    let dZ = fieldPos._z - particlePos._z\r\n\r\n    let force = particle._charge * this._force / Math.pow((\r\n      dX * dX +\r\n      dY * dY +\r\n      dZ * dZ), 1.5)\r\n\r\n    if (Math.abs(force) > 0.001) {\r\n\r\n      let particleAcc = particle._acceleration\r\n\r\n      particleAcc._x += dX * force\r\n      particleAcc._y += dY * force\r\n      particleAcc._z += dZ * force\r\n    }\r\n  }\r\n\r\n  setForce (force) {\r\n\r\n    this._force = force\r\n  }\r\n\r\n  getForce () {\r\n\r\n    return this._force\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/MagneticField.js","import Vector from './Vector'\r\n\r\nexport default class Particle {\r\n\r\n  constructor (dof) {\r\n\r\n    this._velocity     = new Vector()\r\n    this._position     = new Vector()\r\n    this._acceleration = new Vector()\r\n    this._recycled     = false\r\n    this._radius       = 0.03\r\n    this._dof          = dof\r\n    this._lifeTime     = 30\r\n    this._charge       = 1\r\n    this.ptr           = 1  //compat with wasm\r\n  }\r\n\r\n  reset () {\r\n    this._recycled = false\r\n    this._lifeTime = 30\r\n  }\r\n\r\n  submitToFields (fields) {\r\n\r\n    this._acceleration._x = 0\r\n    this._acceleration._y = 0\r\n    this._acceleration._z = 0\r\n\r\n    fields.forEach((field) => {\r\n\r\n      field.applyForce(this)\r\n    })\r\n  }\r\n\r\n  step (dt) {\r\n\r\n    this._lifeTime -= dt\r\n\r\n    this._velocity._x += this._acceleration._x * dt\r\n    this._velocity._y += this._acceleration._y * dt\r\n    this._velocity._z += this._acceleration._z * dt\r\n\r\n    this._position._x += this._velocity._x * this._dof._x * dt\r\n    this._position._y += this._velocity._y * this._dof._y * dt\r\n    this._position._z += this._velocity._z * this._dof._z * dt\r\n  }\r\n\r\n  getRecycled () {\r\n\r\n    return this._recycled\r\n  }\r\n\r\n  getLifeTime () {\r\n\r\n    return this._lifeTime\r\n  }\r\n\r\n  setLifeTime (lifeTime) {\r\n\r\n    this._lifeTime = lifeTime\r\n  }\r\n\r\n  getAcceleration () {\r\n\r\n    return this._acceleration\r\n  }\r\n\r\n  getPosition () {\r\n\r\n    return this._position\r\n  }\r\n\r\n  getCharge () {\r\n\r\n    return this._charge\r\n  }\r\n\r\n  getRadius () {\r\n\r\n    return this._radius\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/Particle.js","import BaseObject from './BaseObject'\r\nimport Vector from './Vector'\r\n\r\nexport default class ParticleEmitter extends BaseObject {\r\n\r\n  constructor (id) {\r\n\r\n    super(id, 0)\r\n\r\n    this._spread       = 2 * Math.PI / 180\r\n    this._emissionRate = 500\r\n    this._velocity     = 10\r\n    this._charge       = 1\r\n  }\r\n\r\n  emitNumber (dt) {\r\n\r\n    return Math.floor(this._emissionRate * dt)\r\n  }\r\n\r\n  emitParticle (particle) {\r\n\r\n    var angle1 = this._spread * (2 * Math.random() - 1)\r\n    var angle2 = this._spread * (2 * Math.random() - 1)\r\n\r\n    particle._velocity._x = this._velocity *\r\n      Math.cos(angle1) * Math.cos(angle2)\r\n\r\n    particle._velocity._y = this._velocity *\r\n      Math.sin(angle1) * Math.cos(angle2)\r\n\r\n    particle._velocity._z = this._velocity *\r\n      Math.sin(angle2)\r\n\r\n    particle._position._x = this._position._x\r\n    particle._position._y = this._position._y\r\n    particle._position._z = this._position._z\r\n\r\n    particle._charge = this._charge\r\n  }\r\n\r\n  setEmissionRate (emissionRate) {\r\n\r\n    this._emissionRate = emissionRate\r\n  }\r\n\r\n  getEmissionRate () {\r\n\r\n    return this._emissionRate\r\n  }\r\n\r\n  setVelocity (velocity) {\r\n\r\n    this._velocity = velocity\r\n  }\r\n\r\n  getVelocity () {\r\n\r\n    return this._velocity\r\n  }\r\n\r\n  setSpread (spread) {\r\n\r\n    this._spread = spread\r\n  }\r\n\r\n  getSpread () {\r\n\r\n    return this._spread\r\n  }\r\n\r\n  setCharge (charge) {\r\n\r\n    this._charge = charge\r\n  }\r\n\r\n  getCharge () {\r\n\r\n    return this._charge\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/ParticleEmitter.js","import ParticleEmitter from './ParticleEmitter'\r\nimport MagneticField from './MagneticField'\r\nimport EventsEmitter from './EventsEmitter'\r\nimport Particle from './Particle'\r\nimport Vector from './Vector'\r\n\r\nexport default class ParticleSystem extends EventsEmitter {\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  constructor (maxParticles) {\r\n\r\n    super()\r\n\r\n    this._maxParticles = maxParticles\r\n    this._dof = new Vector(1, 1, 1)\r\n    this._emittedParticles = 0\r\n    this._particleIdx = 0\r\n    this._recycleBin = []\r\n    this._particles = []\r\n    this._emitters = []\r\n    this._fields = []\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  setMaxParticles (maxParticles) {\r\n\r\n    this._maxParticles = maxParticles\r\n  }\r\n\r\n  getMaxParticles () {\r\n\r\n    return this._maxParticles\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Returns object by id\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  getObjectById (id) {\r\n\r\n    for (var emitter of this._emitters) {\r\n      if (emitter.getId() === id) {\r\n        return emitter\r\n      }\r\n    }\r\n\r\n    for (var field of this._fields) {\r\n      if (field.getId() === id) {\r\n        return field\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Returns emitter by id\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  getEmitter (id) {\r\n\r\n    for (var emitter of this._emitters) {\r\n      if (emitter.getId() === id) {\r\n        return emitter\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Returns magnetic field by id\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  getMagneticField (id) {\r\n\r\n    for (var field of this._fields) {\r\n      if (field.getId() === id) {\r\n        return field\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  setDof (x, y, z) {\r\n\r\n    this._dof = new Vector(x, y, z)\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // clean up all objects\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  destroy () {\r\n\r\n    this._recycleBin = []\r\n\r\n    this._particles = []\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Adds emitter object\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  addEmitter (id) {\r\n\r\n    var emitter = new ParticleEmitter(id)\r\n\r\n    this._emitters.push(emitter)\r\n\r\n    return emitter\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // Adds magnetic field object\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  addMagneticField (id) {\r\n\r\n    var field = new MagneticField(id)\r\n\r\n    this._fields.push(field)\r\n\r\n    return field\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // updates simulation\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  step (dt) {\r\n\r\n    this.addNewParticles(dt)\r\n    this.filterParticles(dt)\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // add new particles step\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  addNewParticles (dt) {\r\n\r\n    this._emitters.forEach((emitter) => {\r\n\r\n      for (var i = 0; i < emitter.emitNumber(dt); ++i) {\r\n\r\n        var particle = this.popRecycle()\r\n\r\n        if (particle) {\r\n\r\n          emitter.emitParticle(particle)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // push a particle to recycle bin\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  pushRecycle (particle) {\r\n\r\n    --this._emittedParticles\r\n\r\n    particle._recycled = true\r\n\r\n    this._recycleBin.push(particle)\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // pop a particle from recycle bin\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  popRecycle () {\r\n\r\n    if (this._emittedParticles > this._maxParticles - 1) {\r\n      return null\r\n    }\r\n\r\n    ++this._emittedParticles\r\n\r\n    var particle = this._recycleBin.pop()\r\n\r\n    if (particle) {\r\n\r\n      particle.reset()\r\n\r\n      return particle\r\n    }\r\n\r\n    particle = new Particle(this._dof)\r\n\r\n    this._particles.push(particle)\r\n\r\n    return particle\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // filter particles using lifeTime\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  filterParticle (particle) {\r\n\r\n    if (particle._recycled) {\r\n\r\n      return true\r\n    }\r\n\r\n    if (particle._lifeTime < 0) {\r\n\r\n      this.pushRecycle(particle)\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // filter particles step\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  filterParticles (dt) {\r\n\r\n    this._particles.forEach((particle) => {\r\n\r\n      if (!this.filterParticle(particle)) {\r\n\r\n        particle.submitToFields(this._fields)\r\n\r\n        particle.step(dt)\r\n      }\r\n    })\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // initialize particle index\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  initParticleLoop () {\r\n\r\n    this._particleIdx = 0\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  // initialize particule index\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  nextParticle () {\r\n\r\n    if(this._particleIdx < this._particles.length) {\r\n\r\n      return this._particles[this._particleIdx++]\r\n    }\r\n\r\n    return { ptr:0 } //compatibility with asm.js/wasm\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/ParticleSystem/ParticleSystem.js","module.exports = require('./vendor/dat.gui')\nmodule.exports.color = require('./vendor/dat.color')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/dat-gui/index.js\n// module id = 1562\n// module chunks = 30","import './Viewing.Extension.Particle'\r\n\r\nexport default 'Viewing.Extension.Particle'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/index.js","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/dat-gui/vendor/dat.color.js\n// module id = 1619\n// module chunks = 30","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/dat-gui/vendor/dat.gui.js\n// module id = 1620\n// module chunks = 30","(function init_TransformGizmos() {\r\n\r\n  'use strict';\r\n\r\n  var GizmoMaterial = function ( parameters ) {\r\n\r\n    THREE.MeshBasicMaterial.call( this );\r\n\r\n    this.depthTest = false;\r\n    this.depthWrite = false;\r\n    this.side = THREE.FrontSide;\r\n    this.transparent = true;\r\n\r\n    this.setValues( parameters );\r\n\r\n    this.oldColor = this.color.clone();\r\n    this.oldOpacity = this.opacity;\r\n\r\n    this.highlight = function( highlighted ) {\r\n\r\n      if ( highlighted ) {\r\n\r\n        this.color.setRGB( 1, 230/255, 3/255 );\r\n        this.opacity = 1;\r\n\r\n      } else {\r\n\r\n        this.color.copy( this.oldColor );\r\n        this.opacity = this.oldOpacity;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  };\r\n\r\n  GizmoMaterial.prototype = Object.create( THREE.MeshBasicMaterial.prototype );\r\n\r\n  var GizmoLineMaterial = function ( parameters ) {\r\n\r\n    THREE.LineBasicMaterial.call( this );\r\n\r\n    this.depthTest = false;\r\n    this.depthWrite = false;\r\n    this.transparent = true;\r\n    this.linewidth = 3;\r\n\r\n    this.setValues( parameters );\r\n\r\n    this.oldColor = this.color.clone();\r\n    this.oldOpacity = this.opacity;\r\n\r\n    this.highlight = function( highlighted ) {\r\n\r\n      if ( highlighted ) {\r\n\r\n        this.color.setRGB( 1, 230/255, 3/255 );\r\n        this.opacity = 1;\r\n\r\n      } else {\r\n\r\n        this.color.copy( this.oldColor );\r\n        this.opacity = this.oldOpacity;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  };\r\n\r\n  GizmoLineMaterial.prototype = Object.create( THREE.LineBasicMaterial.prototype );\r\n\r\n  // polyfill\r\n  if (THREE.PolyhedronGeometry === undefined) {\r\n    THREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n      THREE.Geometry.call( this );\r\n\r\n      this.type = 'PolyhedronGeometry';\r\n\r\n      this.parameters = {\r\n        vertices: vertices,\r\n        indices: indices,\r\n        radius: radius,\r\n        detail: detail\r\n      };\r\n\r\n      radius = radius || 1;\r\n      detail = detail || 0;\r\n\r\n      var that = this;\r\n\r\n      for ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n        prepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n      }\r\n\r\n      var midpoints = [], p = this.vertices;\r\n\r\n      var faces = [];\r\n\r\n      for ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n        var v1 = p[ indices[ i     ] ];\r\n        var v2 = p[ indices[ i + 1 ] ];\r\n        var v3 = p[ indices[ i + 2 ] ];\r\n\r\n        faces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n\r\n      }\r\n\r\n      var centroid = new THREE.Vector3();\r\n\r\n      for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n        subdivide( faces[ i ], detail );\r\n\r\n      }\r\n\r\n\r\n      // Handle case when face straddles the seam\r\n\r\n      for ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n        var uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n        var x0 = uvs[ 0 ].x;\r\n        var x1 = uvs[ 1 ].x;\r\n        var x2 = uvs[ 2 ].x;\r\n\r\n        var max = Math.max( x0, Math.max( x1, x2 ) );\r\n        var min = Math.min( x0, Math.min( x1, x2 ) );\r\n\r\n        if ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\r\n\r\n          if ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n          if ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n          if ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n        }\r\n\r\n      }\r\n\r\n\r\n      // Apply radius\r\n\r\n      for ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n        this.vertices[ i ].multiplyScalar( radius );\r\n\r\n      }\r\n\r\n\r\n      // Merge vertices\r\n\r\n      this.mergeVertices();\r\n\r\n      this.computeFaceNormals();\r\n\r\n      this.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n      // Project vector onto sphere's surface\r\n\r\n      function prepare( vector ) {\r\n\r\n        var vertex = vector.normalize().clone();\r\n        vertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n        // Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n        var u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n        var v = inclination( vector ) / Math.PI + 0.5;\r\n        vertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n        return vertex;\r\n\r\n      }\r\n\r\n\r\n      // Approximate a curved face with recursively sub-divided triangles.\r\n\r\n      function make( v1, v2, v3 ) {\r\n\r\n        var face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\r\n        that.faces.push( face );\r\n\r\n        centroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n        var azi = azimuth( centroid );\r\n\r\n        that.faceVertexUvs[ 0 ].push( [\r\n          correctUV( v1.uv, v1, azi ),\r\n          correctUV( v2.uv, v2, azi ),\r\n          correctUV( v3.uv, v3, azi )\r\n        ] );\r\n\r\n      }\r\n\r\n\r\n      // Analytically subdivide a face to the required detail level.\r\n\r\n      function subdivide( face, detail ) {\r\n\r\n        var cols = Math.pow(2, detail);\r\n        var cells = Math.pow(4, detail);\r\n        var a = prepare( that.vertices[ face.a ] );\r\n        var b = prepare( that.vertices[ face.b ] );\r\n        var c = prepare( that.vertices[ face.c ] );\r\n        var v = [];\r\n\r\n        // Construct all of the vertices for this subdivision.\r\n\r\n        for ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n          v[ i ] = [];\r\n\r\n          var aj = prepare( a.clone().lerp( c, i / cols ) );\r\n          var bj = prepare( b.clone().lerp( c, i / cols ) );\r\n          var rows = cols - i;\r\n\r\n          for ( var j = 0; j <= rows; j ++) {\r\n\r\n            if ( j == 0 && i == cols ) {\r\n\r\n              v[ i ][ j ] = aj;\r\n\r\n            } else {\r\n\r\n              v[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n\r\n        // Construct all of the faces.\r\n\r\n        for ( var i = 0; i < cols ; i ++ ) {\r\n\r\n          for ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\r\n\r\n            var k = Math.floor( j / 2 );\r\n\r\n            if ( j % 2 == 0 ) {\r\n\r\n              make(\r\n                v[ i ][ k + 1],\r\n                v[ i + 1 ][ k ],\r\n                v[ i ][ k ]\r\n              );\r\n\r\n            } else {\r\n\r\n              make(\r\n                v[ i ][ k + 1 ],\r\n                v[ i + 1][ k + 1],\r\n                v[ i + 1 ][ k ]\r\n              );\r\n\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n\r\n      // Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n      function azimuth( vector ) {\r\n\r\n        return Math.atan2( vector.z, - vector.x );\r\n\r\n      }\r\n\r\n\r\n      // Angle above the XZ plane.\r\n\r\n      function inclination( vector ) {\r\n\r\n        return Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n      }\r\n\r\n\r\n      // Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n      function correctUV( uv, vector, azimuth ) {\r\n\r\n        if ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n        if ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n        return uv.clone();\r\n\r\n      }\r\n\r\n    };\r\n\r\n    THREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n  }\r\n\r\n  // polyfill\r\n  if (THREE.OctahedronGeometry === undefined) {\r\n    THREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n      this.parameters = {\r\n        radius: radius,\r\n        detail: detail\r\n      };\r\n\r\n      var vertices = [\r\n        1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\r\n      ];\r\n\r\n      var indices = [\r\n        0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n      ];\r\n\r\n      THREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n      this.type = 'OctahedronGeometry';\r\n\r\n      this.parameters = {\r\n        radius: radius,\r\n        detail: detail\r\n      };\r\n    };\r\n\r\n    THREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n  }\r\n\r\n  // polyfill\r\n  if (THREE.TorusGeometry === undefined) {\r\n    THREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n      THREE.Geometry.call( this );\r\n\r\n      this.type = 'TorusGeometry';\r\n\r\n      this.parameters = {\r\n        radius: radius,\r\n        tube: tube,\r\n        radialSegments: radialSegments,\r\n        tubularSegments: tubularSegments,\r\n        arc: arc\r\n      };\r\n\r\n      radius = radius || 100;\r\n      tube = tube || 40;\r\n      radialSegments = radialSegments || 8;\r\n      tubularSegments = tubularSegments || 6;\r\n      arc = arc || Math.PI * 2;\r\n\r\n      var center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n      for ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n        for ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n          var u = i / tubularSegments * arc;\r\n          var v = j / radialSegments * Math.PI * 2;\r\n\r\n          center.x = radius * Math.cos( u );\r\n          center.y = radius * Math.sin( u );\r\n\r\n          var vertex = new THREE.Vector3();\r\n          vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n          vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n          vertex.z = tube * Math.sin( v );\r\n\r\n          this.vertices.push( vertex );\r\n\r\n          uvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n          normals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n        }\r\n\r\n      }\r\n\r\n      for ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n        for ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n          var a = ( tubularSegments + 1 ) * j + i - 1;\r\n          var b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n          var c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n          var d = ( tubularSegments + 1 ) * j + i;\r\n\r\n          var face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n          this.faces.push( face );\r\n          this.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n          face = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n          this.faces.push( face );\r\n          this.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n        }\r\n\r\n      }\r\n\r\n      this.computeFaceNormals();\r\n\r\n    };\r\n\r\n    THREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n  }\r\n\r\n  var createCircleGeometry = function ( radius, facing, arc ) {\r\n\r\n    var geometry = new THREE.Geometry();\r\n    arc = arc ? arc : 1;\r\n    for ( var i = 0; i <= 64 * arc; ++i ) {\r\n      if ( facing == 'x' ) geometry.vertices.push( new THREE.Vector3( 0, Math.cos( i / 32 * Math.PI ), Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\r\n      if ( facing == 'y' ) geometry.vertices.push( new THREE.Vector3( Math.cos( i / 32 * Math.PI ), 0, Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\r\n      if ( facing == 'z' ) geometry.vertices.push( new THREE.Vector3( Math.sin( i / 32 * Math.PI ), Math.cos( i / 32 * Math.PI ), 0 ).multiplyScalar(radius) );\r\n    }\r\n\r\n    return geometry;\r\n  };\r\n\r\n  var createArrowGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) {\r\n\r\n    var arrowGeometry = new THREE.Geometry();\r\n    var mesh = new THREE.Mesh( new THREE.CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) );\r\n    mesh.position.y = 0.5;\r\n    mesh.updateMatrix();\r\n\r\n    arrowGeometry.merge( mesh.geometry, mesh.matrix );\r\n\r\n    return arrowGeometry;\r\n  };\r\n\r\n  var createLineGeometry = function ( axis ) {\r\n\r\n    var lineGeometry = new THREE.Geometry();\r\n    if ( axis === 'X')\r\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 1, 0, 0 ) );\r\n    else if ( axis === 'Y' )\r\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n    else if ( axis === 'Z' )\r\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, 1 ) );\r\n\r\n    return lineGeometry;\r\n  };\r\n\r\n  THREE.TransformGizmo = function () {\r\n\r\n    var scope = this;\r\n    var showPickers = false; //debug\r\n    var showActivePlane = false; //debug\r\n\r\n    this.init = function () {\r\n\r\n      THREE.Object3D.call( this );\r\n\r\n      this.handles = new THREE.Object3D();\r\n      this.pickers = new THREE.Object3D();\r\n      this.planes = new THREE.Object3D();\r\n      this.highlights = new THREE.Object3D();\r\n      this.hemiPicker = new THREE.Object3D();\r\n      this.subPickers = new THREE.Object3D();\r\n\r\n      this.add(this.handles);\r\n      this.add(this.pickers);\r\n      this.add(this.planes);\r\n      this.add(this.highlights);\r\n      this.add(this.hemiPicker);\r\n      this.add(this.subPickers);\r\n\r\n      //// PLANES\r\n\r\n      var planeGeometry = new THREE.PlaneBufferGeometry( 50, 50, 2, 2 );\r\n      var planeMaterial = new THREE.MeshBasicMaterial( { wireframe: true } );\r\n      planeMaterial.side = THREE.DoubleSide;\r\n\r\n      var planes = {\r\n        \"XY\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n        \"YZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n        \"XZ\":   new THREE.Mesh( planeGeometry, planeMaterial ),\r\n        \"XYZE\": new THREE.Mesh( planeGeometry, planeMaterial )\r\n      };\r\n\r\n      this.activePlane = planes[\"XYZE\"];\r\n\r\n      planes[\"YZ\"].rotation.set( 0, Math.PI/2, 0 );\r\n      planes[\"XZ\"].rotation.set( -Math.PI/2, 0, 0 );\r\n\r\n      for (var i in planes) {\r\n        planes[i].name = i;\r\n        this.planes.add(planes[i]);\r\n        this.planes[i] = planes[i];\r\n        planes[i].visible = false;\r\n      }\r\n\r\n      this.setupGizmos();\r\n      this.activeMode = \"\";\r\n\r\n      // reset Transformations\r\n\r\n      this.traverse(function ( child ) {\r\n        if (child instanceof THREE.Mesh) {\r\n          child.updateMatrix();\r\n\r\n          var tempGeometry = new THREE.Geometry();\r\n          if (child.geometry instanceof THREE.BufferGeometry) {\r\n            child.geometry = new THREE.Geometry().fromBufferGeometry( child.geometry );\r\n          }\r\n          tempGeometry.merge( child.geometry, child.matrix );\r\n\r\n          child.geometry = tempGeometry;\r\n          child.position.set( 0, 0, 0 );\r\n          child.rotation.set( 0, 0, 0 );\r\n          child.scale.set( 1, 1, 1 );\r\n        }\r\n      });\r\n\r\n    };\r\n\r\n    this.hide = function () {\r\n      this.traverse(function( child ) {\r\n        child.visible = false;\r\n      });\r\n    };\r\n\r\n    this.show = function () {\r\n      this.traverse(function( child ) {\r\n        child.visible = true;\r\n        if (child.parent == scope.pickers || child.parent == scope.hemiPicker ) child.visible = showPickers;\r\n        if (child.parent == scope.planes ) child.visible = false;\r\n      });\r\n      this.activePlane.visible = showActivePlane;\r\n    };\r\n\r\n    this.highlight = function ( axis ) {\r\n      this.traverse(function( child ) {\r\n        if ( child.material && child.material.highlight ) {\r\n          if ( child.name == axis ) {\r\n            child.material.highlight( true );\r\n          } else {\r\n            child.material.highlight( false );\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    this.setupGizmos = function () {\r\n\r\n      var addGizmos = function( gizmoMap, parent ) {\r\n\r\n        for ( var name in gizmoMap ) {\r\n\r\n          for ( var i = gizmoMap[name].length; i--;) {\r\n\r\n            var object = gizmoMap[name][i][0];\r\n            var position = gizmoMap[name][i][1];\r\n            var rotation = gizmoMap[name][i][2];\r\n            var visble = gizmoMap[name][i][3];\r\n\r\n            object.name = name;\r\n\r\n            if ( position ) object.position.set( position[0], position[1], position[2] );\r\n            if ( rotation ) object.rotation.set( rotation[0], rotation[1], rotation[2] );\r\n            if ( visble ) object.visble = visble;\r\n\r\n            parent.add( object );\r\n\r\n          }\r\n\r\n        }\r\n\r\n      };\r\n\r\n      this.setHandlePickerGizmos();\r\n\r\n      addGizmos(this.handleGizmos, this.handles);\r\n      addGizmos(this.pickerGizmos, this.pickers);\r\n      addGizmos(this.highlightGizmos, this.highlights);\r\n      addGizmos(this.hemiPickerGizmos, this.hemiPicker);\r\n      addGizmos(this.subPickerGizmos, this.subPickers);\r\n\r\n      this.hide();\r\n      this.show();\r\n\r\n    };\r\n\r\n  };\r\n\r\n  THREE.TransformGizmo.prototype = Object.create( THREE.Object3D.prototype );\r\n\r\n  THREE.TransformGizmo.prototype.update = function ( rotation, eye ) {\r\n\r\n    var vec1 = new THREE.Vector3( 0, 0, 0 );\r\n    var vec2 = new THREE.Vector3( 0, 1, 0 );\r\n    var lookAtMatrix = new THREE.Matrix4();\r\n\r\n    this.traverse(function(child) {\r\n      if ( child.name ) {\r\n        if ( child.name.search(\"E\") != -1 ) {\r\n          child.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( eye, vec1, vec2 ) );\r\n        } else if ( child.name.search(\"X\") != -1 || child.name.search(\"Y\") != -1 || child.name.search(\"Z\") != -1 ) {\r\n          child.quaternion.setFromEuler( rotation );\r\n        }\r\n      }\r\n    });\r\n\r\n  };\r\n\r\n  THREE.TransformGizmoTranslate = function () {\r\n\r\n    THREE.TransformGizmo.call( this );\r\n\r\n    this.setHandlePickerGizmos = function () {\r\n\r\n      var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\r\n      var lineXGeometry = createLineGeometry( 'X' );\r\n      var lineYGeometry = createLineGeometry( 'Y' );\r\n      var lineZGeometry = createLineGeometry( 'Z' );\r\n\r\n      this.handleGizmos = {\r\n        X: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xf12c2c } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\r\n          [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xf12c2c } ) ) ]\r\n        ],\r\n        Y: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0bb80b } ) ), [ 0, 0.5, 0 ] ],\r\n          [   new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x0bb80b } ) ) ]\r\n        ],\r\n        Z: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x2c2cf1 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\r\n          [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x2c2cf1 } ) ) ]\r\n        ],\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.1, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, 0 ] ]\r\n        ],\r\n        XY: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.15, 0.15, 0 ] ]\r\n        ],\r\n        YZ: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.15, 0.15 ], [ 0, Math.PI/2, 0 ] ]\r\n        ],\r\n        XZ: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.15, 0, 0.15 ], [ -Math.PI/2, 0, 0 ] ]\r\n        ]\r\n      };\r\n\r\n      this.pickerGizmos = {\r\n        X: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\r\n        ],\r\n        Y: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\r\n        ],\r\n        Z: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.2, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\r\n        ],\r\n        XY: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.2, 0.2, 0 ] ]\r\n        ],\r\n        YZ: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.2, 0.2 ], [ 0, Math.PI/2, 0 ] ]\r\n        ],\r\n        XZ: [\r\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.2, 0, 0.2 ], [ -Math.PI/2, 0, 0 ] ]\r\n        ]\r\n      };\r\n\r\n      this.hemiPickerGizmos = {\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.BoxGeometry( 1.2, 1.2, 1.2 ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0.5, 0.5, 0.5 ], null, false ]\r\n        ]\r\n      };\r\n\r\n    };\r\n\r\n    this.setActivePlane = function ( axis, eye ) {\r\n\r\n      var tempMatrix = new THREE.Matrix4();\r\n      eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\r\n\r\n      if ( axis == \"X\" ) {\r\n        this.activePlane = this.planes[ \"XY\" ];\r\n        if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\r\n      }\r\n\r\n      if ( axis == \"Y\" ){\r\n        this.activePlane = this.planes[ \"XY\" ];\r\n        if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\r\n      }\r\n\r\n      if ( axis == \"Z\" ){\r\n        this.activePlane = this.planes[ \"XZ\" ];\r\n        if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\r\n      }\r\n\r\n      if ( axis == \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n      if ( axis == \"XY\" ) this.activePlane = this.planes[ \"XY\" ];\r\n\r\n      if ( axis == \"YZ\" ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n      if ( axis == \"XZ\" ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n      this.hide();\r\n      this.show();\r\n\r\n    };\r\n\r\n    this.init();\r\n\r\n  };\r\n\r\n  THREE.TransformGizmoTranslate.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\r\n  THREE.TransformGizmoRotate = function () {\r\n\r\n    THREE.TransformGizmo.call( this );\r\n\r\n    this.setHandlePickerGizmos = function () {\r\n\r\n      this.handleGizmos = {\r\n        RX: [\r\n          [ new THREE.Line( createCircleGeometry(1,'x',0.5), new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\r\n        ],\r\n        RY: [\r\n          [ new THREE.Line( createCircleGeometry(1,'y',0.5), new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\r\n        ],\r\n        RZ: [\r\n          [ new THREE.Line( createCircleGeometry(1,'z',0.5), new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\r\n        ],\r\n        RE: [\r\n          [ new THREE.Line( createCircleGeometry(1.25,'z',1), new GizmoLineMaterial( { color: 0x00ffff } ) ) ]\r\n        ],\r\n        RXYZE: [\r\n          [ new THREE.Line( createCircleGeometry(1,'z',1), new GizmoLineMaterial( { color: 0xff00ff } ) ) ]\r\n        ]\r\n      };\r\n\r\n      this.pickerGizmos = {\r\n        RX: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ] ]\r\n        ],\r\n        RY: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        RZ: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\r\n        ],\r\n        RE: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1.25, 0.12, 2, 24 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ) ]\r\n        ],\r\n        RXYZE: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 2, 24 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ) ]\r\n        ]\r\n      };\r\n\r\n    };\r\n\r\n    this.setActivePlane = function ( axis ) {\r\n\r\n      if ( axis == \"RE\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n      if ( axis == \"RX\" ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n      if ( axis == \"RY\" ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n      if ( axis == \"RZ\" ) this.activePlane = this.planes[ \"XY\" ];\r\n\r\n      this.hide();\r\n      this.show();\r\n\r\n    };\r\n\r\n    this.update = function ( rotation, eye2 ) {\r\n\r\n      THREE.TransformGizmo.prototype.update.apply( this, arguments );\r\n\r\n      var tempMatrix = new THREE.Matrix4();\r\n      var worldRotation = new THREE.Euler( 0, 0, 1 );\r\n      var tempQuaternion = new THREE.Quaternion();\r\n      var unitX = new THREE.Vector3( 1, 0, 0 );\r\n      var unitY = new THREE.Vector3( 0, 1, 0 );\r\n      var unitZ = new THREE.Vector3( 0, 0, 1 );\r\n      var quaternionX = new THREE.Quaternion();\r\n      var quaternionY = new THREE.Quaternion();\r\n      var quaternionZ = new THREE.Quaternion();\r\n      var eye = eye2.clone();\r\n\r\n      worldRotation.copy( this.planes[\"XY\"].rotation );\r\n      tempQuaternion.setFromEuler( worldRotation );\r\n\r\n      tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\r\n      eye.applyMatrix4( tempMatrix );\r\n\r\n      this.traverse(function(child) {\r\n\r\n        tempQuaternion.setFromEuler( worldRotation );\r\n\r\n        if ( child.name == \"RX\" ) {\r\n          quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n          child.quaternion.copy( tempQuaternion );\r\n        }\r\n\r\n        if ( child.name == \"RY\" ) {\r\n          quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\r\n          child.quaternion.copy( tempQuaternion );\r\n        }\r\n\r\n        if ( child.name == \"RZ\" ) {\r\n          quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\r\n          child.quaternion.copy( tempQuaternion );\r\n        }\r\n\r\n      });\r\n\r\n    };\r\n\r\n    this.init();\r\n\r\n  };\r\n\r\n  THREE.TransformGizmoRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\r\n  THREE.TransformGizmoTranslateRotate = function () {\r\n\r\n    THREE.TransformGizmo.call( this );\r\n\r\n    var scope = this;\r\n\r\n    this.setHandlePickerGizmos = function () {\r\n\r\n      var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\r\n      var lineGeometry = new THREE.Geometry();\r\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, -0.1 ), new THREE.Vector3( 0, 0, 0.1 ), new THREE.Vector3( -0.1, 0, 0 ), new THREE.Vector3( 0.1, 0, 0 ) );\r\n      var theta = 0.15;\r\n\r\n      this.handleGizmos = {\r\n        Z: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.25 ], [ Math.PI/2, 0, 0 ] ],\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.015, 0.015, 0.6, 4, 1, false ), new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.5 ],[ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        RX: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ],\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.015, 60, 1, false ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 1 ], [ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        RY: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ],\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.01, 60, 1, false ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 1 ] ]\r\n        ]\r\n      };\r\n\r\n      this.pickerGizmos = {\r\n        Z: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        RX: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ]\r\n        ],\r\n        RY: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ]\r\n        ]\r\n      };\r\n\r\n      this.subPickerGizmos = {\r\n        Z: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\r\n        ]\r\n      };\r\n\r\n      this.highlightGizmos = {\r\n        Z: [\r\n        ],\r\n        RX: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 1 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ], false ]\r\n        ],\r\n        RY: [\r\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 1 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ], false ]\r\n        ]\r\n      };\r\n\r\n      this.hemiPickerGizmos = {\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.SphereGeometry( 1.2, 8, 8, 0, Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), null, null, false ]\r\n        ]\r\n      };\r\n\r\n    };\r\n\r\n    this.setActivePlane = function ( axis, eye ) {\r\n\r\n      if ( this.activeMode == \"translate\" ) {\r\n\r\n        var tempMatrix = new THREE.Matrix4();\r\n        eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\r\n\r\n        if ( axis == \"X\" ) {\r\n          this.activePlane = this.planes[ \"XY\" ];\r\n          if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\r\n        }\r\n\r\n        if ( axis == \"Y\" ){\r\n          this.activePlane = this.planes[ \"XY\" ];\r\n          if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\r\n        }\r\n\r\n        if ( axis == \"Z\" ){\r\n          this.activePlane = this.planes[ \"XZ\" ];\r\n          if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\r\n        }\r\n\r\n      } else if ( this.activeMode == \"rotate\" ){\r\n\r\n        if ( axis == \"RX\" ) this.activePlane = this.planes[ \"YZ\" ];\r\n\r\n        if ( axis == \"RY\" ) this.activePlane = this.planes[ \"XZ\" ];\r\n\r\n        if ( axis == \"RZ\" ) this.activePlane = this.planes[ \"XY\" ];\r\n\r\n      }\r\n\r\n      this.hide();\r\n      this.show();\r\n\r\n    };\r\n\r\n    this.update = function ( rotation, eye2 ) {\r\n\r\n      if ( this.activeMode == \"translate\" ) {\r\n\r\n        THREE.TransformGizmo.prototype.update.apply( this, arguments );\r\n\r\n      } else if ( this.activeMode == \"rotate\" ) {\r\n\r\n        THREE.TransformGizmo.prototype.update.apply( this, arguments );\r\n\r\n        var tempMatrix = new THREE.Matrix4();\r\n        var worldRotation = new THREE.Euler( 0, 0, 1 );\r\n        var tempQuaternion = new THREE.Quaternion();\r\n        var unitX = new THREE.Vector3( 1, 0, 0 );\r\n        var unitY = new THREE.Vector3( 0, 1, 0 );\r\n        var unitZ = new THREE.Vector3( 0, 0, 1 );\r\n        var quaternionX = new THREE.Quaternion();\r\n        var quaternionY = new THREE.Quaternion();\r\n        var quaternionZ = new THREE.Quaternion();\r\n        var eye = eye2.clone();\r\n\r\n        worldRotation.copy( this.planes[\"XY\"].rotation );\r\n        tempQuaternion.setFromEuler( worldRotation );\r\n\r\n        tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\r\n        eye.applyMatrix4( tempMatrix );\r\n\r\n        this.traverse(function(child) {\r\n\r\n          tempQuaternion.setFromEuler( worldRotation );\r\n\r\n          if ( child.name == \"RX\" ) {\r\n            quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\r\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n            child.quaternion.copy( tempQuaternion );\r\n          }\r\n\r\n          if ( child.name == \"RY\" ) {\r\n            quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\r\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\r\n            child.quaternion.copy( tempQuaternion );\r\n          }\r\n\r\n          if ( child.name == \"RZ\" ) {\r\n            quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\r\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\r\n            child.quaternion.copy( tempQuaternion );\r\n          }\r\n\r\n        });\r\n\r\n      }\r\n\r\n    };\r\n\r\n    this.show = function () {\r\n      this.traverse(function( child ) {\r\n        if ( scope.parent == null || (scope.parent.useAllPickers || child.parent != scope.handles) ) child.visible = true;\r\n        if ( child.material ) child.material.opacity = child.material.oldOpacity;\r\n        if ( child.parent == scope.pickers || child.parent == scope.hemiPicker || child.parent == scope.subPickers) child.visible = false;\r\n        if ( child.parent == scope.planes || child.parent == scope.highlights ) child.visible = false;\r\n      });\r\n      this.activePlane.visible = false;\r\n    };\r\n\r\n    this.highlight = function ( axis ) {\r\n      this.traverse(function( child ) {\r\n        if ( child.material && child.material.highlight ) {\r\n          if ( child.name == axis ) {\r\n            if ( child.parent == scope.highlights || child.parent == scope.handles ) child.visible = true;\r\n            child.material.highlight( true );\r\n          } else {\r\n            child.material.highlight( false );\r\n            child.material.opacity = 0.1;\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    this.init();\r\n\r\n  };\r\n\r\n  THREE.TransformGizmoTranslateRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\r\n  THREE.TransformGizmoScale = function () {\r\n\r\n    THREE.TransformGizmo.call( this );\r\n\r\n    this.setHandlePickerGizmos = function () {\r\n\r\n      var arrowGeometry = createArrowGeometry( 0.125, 0.125, 0.125 );\r\n      var lineXGeometry = createLineGeometry( 'X' );\r\n      var lineYGeometry = createLineGeometry( 'Y' );\r\n      var lineZGeometry = createLineGeometry( 'Z' );\r\n\r\n      this.handleGizmos = {\r\n        X: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\r\n          [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\r\n        ],\r\n        Y: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\r\n          [ new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\r\n        ],\r\n        Z: [\r\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\r\n          [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\r\n        ],\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.BoxGeometry( 0.125, 0.125, 0.125 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\r\n        ]\r\n      };\r\n\r\n      this.pickerGizmos = {\r\n        X: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\r\n        ],\r\n        Y: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\r\n        ],\r\n        Z: [\r\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\r\n        ],\r\n        XYZ: [\r\n          [ new THREE.Mesh( new THREE.BoxGeometry( 0.4, 0.4, 0.4 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\r\n        ]\r\n      };\r\n\r\n    };\r\n\r\n    this.setActivePlane = function ( axis, eye ) {\r\n\r\n      var tempMatrix = new THREE.Matrix4();\r\n      eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \"XY\" ].matrixWorld ) ) );\r\n\r\n      if ( axis == \"X\" ) {\r\n        this.activePlane = this.planes[ \"XY\" ];\r\n        if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"XZ\" ];\r\n      }\r\n\r\n      if ( axis == \"Y\" ){\r\n        this.activePlane = this.planes[ \"XY\" ];\r\n        if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \"YZ\" ];\r\n      }\r\n\r\n      if ( axis == \"Z\" ){\r\n        this.activePlane = this.planes[ \"XZ\" ];\r\n        if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \"YZ\" ];\r\n      }\r\n\r\n      if ( axis == \"XYZ\" ) this.activePlane = this.planes[ \"XYZE\" ];\r\n\r\n      this.hide();\r\n      this.show();\r\n\r\n    };\r\n\r\n    this.init();\r\n\r\n  };\r\n\r\n  THREE.TransformGizmoScale.prototype = Object.create( THREE.TransformGizmo.prototype );\r\n\r\n  THREE.TransformControls = function ( camera, domElement, mode ) {\r\n\r\n    // TODO: Make non-uniform scale and rotate play nice in hierarchies\r\n    // TODO: ADD RXYZ contol\r\n\r\n    THREE.Object3D.call( this );\r\n\r\n    domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n    this.gizmo = {};\r\n    switch ( mode ) {\r\n      case \"translate\":\r\n        this.gizmo[mode] = new THREE.TransformGizmoTranslate();\r\n        break;\r\n      case \"rotate\":\r\n        this.gizmo[mode] = new THREE.TransformGizmoRotate();\r\n        break;\r\n      case \"transrotate\":\r\n        this.gizmo[mode] = new THREE.TransformGizmoTranslateRotate();\r\n        break;\r\n      case \"scale\":\r\n        this.gizmo[mode] = new THREE.TransformGizmoScale();\r\n        break;\r\n    }\r\n\r\n    this.add(this.gizmo[mode]);\r\n    this.gizmo[mode].hide();\r\n\r\n    this.object = undefined;\r\n    this.snap = null;\r\n    this.snapDelta = 0;\r\n    this.space = \"world\";\r\n    this.size = 1;\r\n    this.axis = null;\r\n    this.useAllPickers = true;\r\n\r\n    this.unitX = new THREE.Vector3( 1, 0, 0 );\r\n    this.unitY = new THREE.Vector3( 0, 1, 0 );\r\n    this.unitZ = new THREE.Vector3( 0, 0, 1 );\r\n    this.normal = new THREE.Vector3(0, 0, 1);\r\n\r\n    if ( mode === \"transrotate\" ) {\r\n      var geometry = new THREE.Geometry();\r\n      geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\r\n      var material = new THREE.LineBasicMaterial( {color: 0x000000, linewidth:2, depthTest: false} );\r\n      this.startLine = new THREE.Line( geometry, material );\r\n      var geometry = new THREE.Geometry();\r\n      var material = new THREE.LineBasicMaterial( {color: 0xffe603, linewidth:2, depthTest: false} );\r\n      geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\r\n      this.endLine = new THREE.Line( geometry, material );\r\n      var geometry = new THREE.Geometry();\r\n      var material = new THREE.LineDashedMaterial({color: 0x000000, linewidth:1, depthTest: false});\r\n      geometry.vertices.push( new THREE.Vector3(0, -1, 0), new THREE.Vector3(0, 1, 0) );\r\n      this.centerLine = new THREE.Line( geometry, material );\r\n\r\n      var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\"res/textures/centerMarker_X.png\"));\r\n      map.magFilter = map.minFilter = THREE.NearestFilter;\r\n      var geometry = new THREE.CircleGeometry( 0.1, 32 );\r\n      var material = new THREE.MeshBasicMaterial({opacity: 1, side: THREE.DoubleSide, transparent:true, map:map});\r\n      this.centerMark = new THREE.Mesh( geometry, material );\r\n      this.centerMark.rotation.set(Math.PI/2, 0, 0);\r\n\r\n      this.ticks = {};\r\n      var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\"res/textures/cardinalPoint.png\"));\r\n      map.magFilter = map.minFilter = THREE.NearestFilter;\r\n      var material = new THREE.MeshBasicMaterial({depthTest: false, opacity: 1, transparent:true, side: THREE.DoubleSide, map:map});\r\n      var w = 0.12, h = 0.25, d = 1.15;\r\n\r\n      this.ticks[\"RX\"] = new THREE.Object3D();\r\n      var geometry = new THREE.PlaneBufferGeometry(w, h);\r\n      var mesh = new THREE.Mesh(geometry, material);\r\n      mesh.position.set(0, 0, -d-h/2);\r\n      mesh.rotation.set(Math.PI/2, Math.PI/2, 0);\r\n      this.ticks[\"RX\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(0, d+h/2, 0);\r\n      mesh.rotation.set(0, Math.PI/2, 0);\r\n      this.ticks[\"RX\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(0, 0, d+h/2);\r\n      mesh.rotation.set(0, Math.PI/2, Math.PI/2);\r\n      this.ticks[\"RX\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(0, -d-h/2, 0);\r\n      mesh.rotation.set(0, Math.PI/2, 0);\r\n      this.ticks[\"RX\"].add(mesh);\r\n\r\n      this.ticks[\"RY\"] = new THREE.Object3D();\r\n      mesh = mesh.clone();\r\n      mesh.position.set(0, 0, -d-h/2);\r\n      mesh.rotation.set(Math.PI/2, 0, 0);\r\n      this.ticks[\"RY\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(-d-h/2, 0, 0);\r\n      mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\r\n      this.ticks[\"RY\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(0, 0, d+h/2);\r\n      mesh.rotation.set(Math.PI/2, 0, 0);\r\n      this.ticks[\"RY\"].add(mesh);\r\n\r\n      mesh = mesh.clone();\r\n      mesh.position.set(d+h/2, 0, 0);\r\n      mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\r\n      this.ticks[\"RY\"].add(mesh);\r\n    }\r\n\r\n    var scope = this;\r\n\r\n    var _dragging = false;\r\n    var _mode = mode;\r\n    var _plane = \"XY\";\r\n\r\n    var changeEvent = { type: \"change\" };\r\n    var mouseDownEvent = { type: \"mouseDown\" };\r\n    var mouseUpEvent = { type: \"mouseUp\", mode: _mode };\r\n    var objectChangeEvent = { type: \"objectChange\" };\r\n\r\n    var ray = new THREE.Raycaster();\r\n    var pointerVector = new THREE.Vector3();\r\n    var pointerDir = new THREE.Vector3();\r\n\r\n    var point = new THREE.Vector3();\r\n    var offset = new THREE.Vector3();\r\n\r\n    var rotation = new THREE.Vector3();\r\n    var offsetRotation = new THREE.Vector3();\r\n    var scale = 1;\r\n\r\n    var lookAtMatrix = new THREE.Matrix4();\r\n    var eye = new THREE.Vector3();\r\n\r\n    var tempMatrix = new THREE.Matrix4();\r\n    var tempVector = new THREE.Vector3();\r\n    var tempQuaternion = new THREE.Quaternion();\r\n    var projX = new THREE.Vector3();\r\n    var projY = new THREE.Vector3();\r\n    var projZ = new THREE.Vector3();\r\n\r\n    var quaternionXYZ = new THREE.Quaternion();\r\n    var quaternionX = new THREE.Quaternion();\r\n    var quaternionY = new THREE.Quaternion();\r\n    var quaternionZ = new THREE.Quaternion();\r\n    var quaternionE = new THREE.Quaternion();\r\n\r\n    var oldPosition = new THREE.Vector3();\r\n    var oldScale = new THREE.Vector3();\r\n    var oldRotationMatrix = new THREE.Matrix4();\r\n\r\n    var parentRotationMatrix  = new THREE.Matrix4();\r\n    var parentScale = new THREE.Vector3();\r\n\r\n    var worldPosition = new THREE.Vector3();\r\n    var worldRotation = new THREE.Euler();\r\n    var worldRotationMatrix  = new THREE.Matrix4();\r\n    var camPosition = new THREE.Vector3();\r\n    var camRotation = new THREE.Euler();\r\n\r\n    this.attach = function ( object ) {\r\n\r\n      scope.object = object;\r\n\r\n      this.gizmo[_mode].show();\r\n\r\n      scope.update();\r\n\r\n      scope.updateUnitVectors();\r\n\r\n    };\r\n\r\n    this.detach = function ( object ) {\r\n\r\n      scope.object = undefined;\r\n      this.axis = null;\r\n\r\n      this.gizmo[_mode].hide();\r\n\r\n    };\r\n\r\n    this.setMode = function ( mode ) {\r\n\r\n      _mode = mode ? mode : _mode;\r\n\r\n      if ( _mode == \"scale\" ) scope.space = \"local\";\r\n\r\n      this.gizmo[_mode].show();\r\n\r\n      this.update();\r\n      scope.dispatchEvent( changeEvent );\r\n\r\n    };\r\n\r\n    this.getPicker = function () {\r\n\r\n      return scope.gizmo[_mode].hemiPicker.children;\r\n\r\n    };\r\n\r\n    this.setPosition = function ( position ) {\r\n\r\n      this.object.position.copy ( position );\r\n      this.update();\r\n\r\n    };\r\n\r\n    this.setNormal = function ( normal ) {\r\n\r\n      tempQuaternion.setFromUnitVectors( this.normal, normal );\r\n      this.unitX.applyQuaternion( tempQuaternion );\r\n      this.unitY.applyQuaternion( tempQuaternion );\r\n      this.unitZ.applyQuaternion( tempQuaternion );\r\n      this.normal.copy( normal );\r\n      if (this.object) {\r\n        this.object.quaternion.multiply ( tempQuaternion );\r\n      }\r\n      this.update();\r\n    };\r\n\r\n    this.setSnap = function ( snap, delta ) {\r\n\r\n      scope.snap = snap;\r\n      scope.snapDelta = delta;\r\n\r\n    };\r\n\r\n    this.setSize = function ( size ) {\r\n\r\n      scope.size = size;\r\n      this.update();\r\n      scope.dispatchEvent( changeEvent );\r\n\r\n    };\r\n\r\n    this.setSpace = function ( space ) {\r\n\r\n      scope.space = space;\r\n      this.update();\r\n      scope.dispatchEvent( changeEvent );\r\n\r\n    };\r\n\r\n    this.update = function (highlight) {\r\n\r\n      if ( scope.object === undefined ) return;\r\n\r\n      scope.object.updateMatrixWorld();\r\n      worldPosition.setFromMatrixPosition( scope.object.matrixWorld );\r\n      worldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );\r\n\r\n      camera.updateMatrixWorld();\r\n      camPosition.setFromMatrixPosition( camera.matrixWorld );\r\n      //camRotation.setFromRotationMatrix( tempMatrix.extractRotation( camera.matrixWorld ) );\r\n\r\n      this.position.copy( worldPosition );\r\n\r\n      this.quaternion.setFromEuler( worldRotation );\r\n\r\n      this.normal.set( 0, 0, 1 );\r\n      this.normal.applyEuler( worldRotation );\r\n\r\n      // keep same screen height (100px)\r\n      var dist = worldPosition.distanceTo( camPosition );\r\n      var height = camera.isPerspective? 2 * Math.tan( camera.fov * Math.PI / 360 ) * dist : dist;\r\n      var rect = domElement.getBoundingClientRect();\r\n      scale = 100 * height / rect.height;\r\n      this.scale.set( scale, scale, scale );\r\n\r\n      //eye.copy( camPosition ).sub( worldPosition ).normalize();\r\n\r\n      //if ( scope.space == \"local\" )\r\n      //    this.gizmo[_mode].update( worldRotation, eye );\r\n      //else if ( scope.space == \"world\" )\r\n      //    this.gizmo[_mode].update( new THREE.Euler(), eye );\r\n\r\n      if (highlight)\r\n        this.gizmo[_mode].highlight( scope.axis );\r\n\r\n    };\r\n\r\n    this.updateUnitVectors = function () {\r\n\r\n      this.unitX.set( 1, 0, 0 );\r\n      this.unitY.set( 0, 1, 0 );\r\n      this.unitZ.set( 0, 0, 1 );\r\n      this.unitX.applyEuler( worldRotation );\r\n      this.unitY.applyEuler( worldRotation );\r\n      this.unitZ.applyEuler( worldRotation );\r\n\r\n    };\r\n\r\n    this.showRotationGizmos = function (set) {\r\n\r\n      var handles = this.gizmo[_mode].handles.children;\r\n      for ( var i = 0; i < handles.length; i++ ) {\r\n        var child = handles[i];\r\n        child.visible = true;\r\n        if ( child.name.search(\"R\") !== -1 ) child.visible = set;\r\n      }\r\n      this.useAllPickers = set;\r\n\r\n    };\r\n\r\n    this.highlight = function () {\r\n\r\n      this.gizmo[_mode].highlight( this.axis || \"Z\" );\r\n\r\n    };\r\n\r\n    this.onPointerHover = function( event ) {\r\n\r\n      if ( scope.object === undefined || _dragging === true ) return false;\r\n\r\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\r\n\r\n      var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\r\n\r\n      var axis = null;\r\n      var mode = \"\";\r\n\r\n      if ( intersect ) {\r\n\r\n        axis = intersect.object.name;\r\n        mode = axis.search(\"R\") != -1 ? \"rotate\" : \"translate\";\r\n\r\n      }\r\n\r\n      if ( scope.axis !== axis ) {\r\n\r\n        scope.axis = axis;\r\n        scope.gizmo[_mode].activeMode = mode;\r\n        scope.update(true);\r\n        scope.dispatchEvent( changeEvent );\r\n\r\n      }\r\n\r\n      if (scope.axis === null) {\r\n\r\n        scope.gizmo[_mode].show();\r\n\r\n      }\r\n\r\n      return intersect? true : false;\r\n\r\n    }\r\n\r\n    this.onPointerDown = function( event ) {\r\n\r\n      if ( scope.object === undefined || _dragging === true ) return false;\r\n\r\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\r\n\r\n      if ( event.pointerType === 'touch' ) {\r\n\r\n        var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\r\n\r\n        var axis = null;\r\n        var mode = \"\";\r\n\r\n        if ( intersect ) {\r\n\r\n          axis = intersect.object.name;\r\n          mode = axis.search(\"R\") != -1 ? \"rotate\" : \"translate\";\r\n\r\n        }\r\n\r\n        if ( scope.axis !== axis ) {\r\n\r\n          scope.axis = axis;\r\n          scope.gizmo[_mode].activeMode = mode;\r\n        }\r\n      }\r\n\r\n      var intersect = null;\r\n\r\n      if ( pointer.button === 0 || pointer.button === undefined ) {\r\n\r\n        intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\r\n\r\n        if ( intersect ) {\r\n\r\n          scope.dispatchEvent( mouseDownEvent );\r\n\r\n          scope.axis = intersect.object.name;\r\n\r\n          scope.update();\r\n\r\n          eye.copy( camera.position ).sub( worldPosition ).normalize();\r\n\r\n          scope.gizmo[_mode].setActivePlane( scope.axis, eye );\r\n\r\n          var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\r\n\r\n          if ( planeIntersect )\r\n            offset.copy( planeIntersect.point );\r\n\r\n          oldPosition.copy( scope.object.position );\r\n          oldScale.copy( scope.object.scale );\r\n\r\n          oldRotationMatrix.extractRotation( scope.object.matrix );\r\n          worldRotationMatrix.extractRotation( scope.object.matrixWorld );\r\n\r\n          if ( scope.object.parent ) {\r\n            parentRotationMatrix.extractRotation( scope.object.parent.matrixWorld );\r\n            parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.parent.matrixWorld ) );\r\n          } else {\r\n            parentRotationMatrix.extractRotation( scope.object.matrixWorld );\r\n            parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.matrixWorld ) );\r\n          }\r\n\r\n          // show rotation start line and ticks\r\n          if ( _mode === \"transrotate\" && scope.gizmo[_mode].activeMode === \"rotate\" ) {\r\n            scope.startLine.geometry.vertices[0].set(0, 0, 0).applyMatrix4( scope.matrixWorld );\r\n            scope.startLine.geometry.vertices[1].set(0, 0, 1).applyMatrix4( scope.matrixWorld );\r\n            scope.startLine.geometry.verticesNeedUpdate = true;\r\n            scope.parent.add( scope.startLine );\r\n\r\n            var pos = scope.object.geometry.getAttribute('position');\r\n            var pt1 = new THREE.Vector3().fromAttribute(pos, 0).applyMatrix4( scope.object.matrixWorld );\r\n            var pt2 = new THREE.Vector3().fromAttribute(pos, 1).applyMatrix4( scope.object.matrixWorld );\r\n            var pt3 = new THREE.Vector3().fromAttribute(pos, 2).applyMatrix4( scope.object.matrixWorld );\r\n            var pt4 = new THREE.Vector3().fromAttribute(pos, 3).applyMatrix4( scope.object.matrixWorld );\r\n            if (scope.axis === \"RX\") {\r\n              pt1.lerp(pt3, 0.5);\r\n              pt2.lerp(pt4, 0.5);\r\n              var dist = pt1.distanceTo(pt2);\r\n              scope.centerLine.material.dashSize = dist / 15;\r\n              scope.centerLine.material.gapSize = dist / 30;\r\n              scope.centerLine.geometry.vertices[0].copy(pt1);\r\n              scope.centerLine.geometry.vertices[1].copy(pt2);\r\n            } else {\r\n              pt1.lerp(pt2, 0.5);\r\n              pt3.lerp(pt4, 0.5);\r\n              var dist = pt1.distanceTo(pt3);\r\n              scope.centerLine.material.dashSize = dist / 15;\r\n              scope.centerLine.material.gapSize = dist / 30;\r\n              scope.centerLine.geometry.vertices[0].copy(pt1);\r\n              scope.centerLine.geometry.vertices[1].copy(pt3);\r\n            }\r\n            scope.centerLine.geometry.computeLineDistances();\r\n            scope.centerLine.geometry.verticesNeedUpdate = true;\r\n            scope.parent.add( scope.centerLine );\r\n\r\n            scope.ticks[scope.axis].position.copy( scope.position );\r\n            scope.ticks[scope.axis].quaternion.copy( scope.quaternion );\r\n            scope.ticks[scope.axis].scale.copy( scope.scale );\r\n            scope.parent.add( scope.ticks[scope.axis] );\r\n          }\r\n\r\n        }\r\n\r\n      }\r\n\r\n      _dragging = true;\r\n\r\n      return intersect? true: false;\r\n\r\n    }\r\n\r\n    this.onPointerMove = function( event ) {\r\n\r\n      if ( scope.object === undefined || scope.axis === null || _dragging === false ) return false;\r\n\r\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\r\n\r\n      var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\r\n\r\n      if ( planeIntersect )\r\n        point.copy( planeIntersect.point );\r\n\r\n      var mode = scope.gizmo[_mode].activeMode;\r\n      if ( mode == \"translate\" ) {\r\n\r\n        point.sub( offset );\r\n        point.multiply(parentScale);\r\n\r\n        if ( scope.space == \"local\" ) {\r\n\r\n          point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n          projX.copy( this.unitX );\r\n          projY.copy( this.unitY );\r\n          projZ.copy( this.unitZ );\r\n          tempVector.set( 0, 0, 0 );\r\n          if ( scope.axis.search(\"X\") != -1 ) {\r\n            projX.multiplyScalar( point.dot( this.unitX ) );\r\n            tempVector.add( projX );\r\n          }\r\n          if ( scope.axis.search(\"Y\") != -1 ) {\r\n            projY.multiplyScalar( point.dot( this.unitY ) );\r\n            tempVector.add(projY);\r\n          }\r\n          if ( scope.axis.search(\"Z\") != -1 ) {\r\n            projZ.multiplyScalar( point.dot( this.unitZ ) );\r\n            tempVector.add( projZ );\r\n          }\r\n          point.copy( tempVector );\r\n\r\n          point.applyMatrix4( oldRotationMatrix );\r\n\r\n          scope.object.position.copy( oldPosition );\r\n          scope.object.position.add( point );\r\n\r\n        }\r\n\r\n        if ( scope.space == \"world\" || scope.axis.search(\"XYZ\") != -1 ) {\r\n\r\n          projX.copy( this.unitX );\r\n          projY.copy( this.unitY );\r\n          projZ.copy( this.unitZ );\r\n          tempVector.set( 0, 0, 0 );\r\n          if ( scope.axis.search(\"X\") != -1 ) {\r\n            projX.multiplyScalar( point.dot( this.unitX ) );\r\n            tempVector.add( projX );\r\n          }\r\n          if ( scope.axis.search(\"Y\") != -1 ) {\r\n            projY.multiplyScalar( point.dot( this.unitY ) );\r\n            tempVector.add(projY);\r\n          }\r\n          if ( scope.axis.search(\"Z\") != -1 ) {\r\n            projZ.multiplyScalar( point.dot( this.unitZ ) );\r\n            tempVector.add( projZ );\r\n          }\r\n          point.copy( tempVector );\r\n\r\n          point.applyMatrix4( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n          scope.object.position.copy( oldPosition );\r\n          scope.object.position.add( point );\r\n\r\n        }\r\n\r\n      } else if ( mode == \"scale\" ) {\r\n\r\n        point.sub( offset );\r\n        point.multiply(parentScale);\r\n\r\n        if ( scope.space == \"local\" ) {\r\n\r\n          if ( scope.axis == \"XYZ\") {\r\n\r\n            scale = 1 + ( ( point.y ) / 50 );\r\n\r\n            scope.object.scale.x = oldScale.x * scale;\r\n            scope.object.scale.y = oldScale.y * scale;\r\n            scope.object.scale.z = oldScale.z * scale;\r\n\r\n          } else {\r\n\r\n            point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n            if ( scope.axis == \"X\" ) scope.object.scale.x = oldScale.x * ( 1 + point.x / 50 );\r\n            if ( scope.axis == \"Y\" ) scope.object.scale.y = oldScale.y * ( 1 + point.y / 50 );\r\n            if ( scope.axis == \"Z\" ) scope.object.scale.z = oldScale.z * ( 1 + point.z / 50 );\r\n\r\n          }\r\n\r\n        }\r\n\r\n      } else if ( mode == \"rotate\") {\r\n\r\n        point.sub( worldPosition );\r\n        point.multiply(parentScale);\r\n        tempVector.copy(offset).sub( worldPosition );\r\n        tempVector.multiply(parentScale);\r\n\r\n        if ( scope.axis == \"RE\" ) {\r\n\r\n          point.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\r\n          tempVector.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\r\n\r\n          rotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\r\n          offsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\r\n\r\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n          var rotz = rotation.z - offsetRotation.z;\r\n          if ( scope.snap !== null ) {\r\n            var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\r\n            if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\r\n              rotz = rotsnap;\r\n            }\r\n          }\r\n          quaternionE.setFromAxisAngle( eye, rotz );\r\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionE );\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n          scope.object.quaternion.copy( tempQuaternion );\r\n\r\n        } else if ( scope.axis == \"RXYZE\" ) {\r\n\r\n          var tempAxis = point.clone().cross(tempVector).normalize(); // rotation axis\r\n\r\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n          var rot = - point.clone().angleTo(tempVector);\r\n          if ( scope.snap !== null ) {\r\n            var rotsnap = Math.round( rot / scope.snap ) * scope.snap;\r\n            if ( Math.abs(rotsnap-rot) < scope.snapDelta ) {\r\n              rot = rotsnap;\r\n            }\r\n          }\r\n          quaternionX.setFromAxisAngle( tempAxis, rot );\r\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n          scope.object.quaternion.copy( tempQuaternion );\r\n\r\n        } else if ( scope.space == \"local\" ) {\r\n\r\n          point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n          tempVector.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\r\n\r\n          var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\r\n          var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\r\n          rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\r\n          offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\r\n\r\n          var rotx = rotation.x - offsetRotation.x;\r\n          var roty = rotation.y - offsetRotation.y;\r\n          var rotz = rotation.z - offsetRotation.z;\r\n          if ( scope.snap !== null ) {\r\n            if ( scope.axis.search(\"X\") != -1 ) {\r\n              var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\r\n                rotx = rotsnap;\r\n              }\r\n            }\r\n            if ( scope.axis.search(\"Y\") != -1 ) {\r\n              var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\r\n                roty = rotsnap;\r\n              }\r\n            }\r\n            if ( scope.axis.search(\"Z\") != -1 ) {\r\n              var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\r\n                rotz = rotsnap;\r\n              }\r\n            }\r\n          }\r\n          quaternionX.setFromAxisAngle( this.unitX, rotx );\r\n          quaternionY.setFromAxisAngle( this.unitY, roty );\r\n          quaternionZ.setFromAxisAngle( this.unitZ, rotz );\r\n          quaternionXYZ.setFromRotationMatrix( oldRotationMatrix );\r\n\r\n          if ( scope.axis == \"RX\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionX );\r\n          if ( scope.axis == \"RY\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionY );\r\n          if ( scope.axis == \"RZ\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionZ );\r\n\r\n          scope.object.quaternion.copy( quaternionXYZ );\r\n\r\n        } else if ( scope.space == \"world\" ) {\r\n\r\n          var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\r\n          var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\r\n          rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\r\n          offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\r\n\r\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\r\n\r\n          var rotx = rotation.x - offsetRotation.x;\r\n          var roty = rotation.y - offsetRotation.y;\r\n          var rotz = rotation.z - offsetRotation.z;\r\n          if ( scope.snap !== null ) {\r\n            if ( scope.axis.search(\"X\") != -1 ) {\r\n              var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\r\n                rotx = rotsnap;\r\n              }\r\n            }\r\n            if ( scope.axis.search(\"Y\") != -1 ) {\r\n              var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\r\n                roty = rotsnap;\r\n              }\r\n            }\r\n            if ( scope.axis.search(\"Z\") != -1 ) {\r\n              var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\r\n              if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\r\n                rotz = rotsnap;\r\n              }\r\n            }\r\n          }\r\n          quaternionX.setFromAxisAngle( this.unitX, rotx );\r\n          quaternionY.setFromAxisAngle( this.unitY, roty );\r\n          quaternionZ.setFromAxisAngle( this.unitZ, rotz );\r\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\r\n\r\n          if ( scope.axis == \"RX\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\r\n          if ( scope.axis == \"RY\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\r\n          if ( scope.axis == \"RZ\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\r\n\r\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\r\n\r\n          scope.object.quaternion.copy( tempQuaternion );\r\n\r\n        }\r\n\r\n        // show rotation end line\r\n        if (_mode === \"transrotate\" ) {\r\n          scope.add( scope.endLine );\r\n          scope.add( scope.centerMark );\r\n        }\r\n\r\n      }\r\n\r\n      // update matrix\r\n      scope.object.matrixAutoUpdate = true;\r\n\r\n      scope.update(true);\r\n      scope.dispatchEvent( changeEvent );\r\n      scope.dispatchEvent( objectChangeEvent );\r\n\r\n      return planeIntersect? true : false;\r\n\r\n    }\r\n\r\n    this.onPointerUp = function( event ) {\r\n\r\n      if ( _dragging && ( scope.axis !== null ) ) {\r\n        mouseUpEvent.mode = _mode;\r\n        scope.dispatchEvent( mouseUpEvent )\r\n      }\r\n      _dragging = false;\r\n\r\n      this.gizmo[_mode].show();\r\n\r\n      this.updateUnitVectors();\r\n\r\n      // remove rotation start/end lines\r\n      if ( _mode === \"transrotate\" && this.gizmo[_mode].activeMode === \"rotate\" ) {\r\n        this.remove( this.endLine );\r\n        this.remove( this.centerMark );\r\n        this.parent.remove( this.centerLine );\r\n        this.parent.remove( this.startLine );\r\n        this.parent.remove( this.ticks[this.axis] );\r\n      }\r\n\r\n      return false;\r\n\r\n    }\r\n\r\n    function intersectObjects( pointer, objects ) {\r\n\r\n      var rect = domElement.getBoundingClientRect();\r\n      var x = ( ( pointer.clientX - rect.left ) / rect.width ) * 2 - 1;\r\n      var y = - ( ( pointer.clientY - rect.top ) / rect.height ) * 2 + 1;\r\n\r\n      if ( camera.isPerspective ) {\r\n        pointerVector.set( x, y, 0.5 );\r\n        pointerVector.unproject( camera );\r\n        ray.set( camera.position, pointerVector.sub( camera.position ).normalize() );\r\n      } else {\r\n        pointerVector.set( x, y, -1 );\r\n        pointerVector.unproject( camera );\r\n        pointerDir.set( 0, 0, -1 );\r\n        ray.set( pointerVector, pointerDir.transformDirection( camera.matrixWorld ) );\r\n      }\r\n\r\n      var intersections = ray.intersectObjects( objects, true );\r\n      return intersections[0] ? intersections[0] : false;\r\n\r\n    }\r\n\r\n  };\r\n\r\n  THREE.TransformControls.prototype = Object.create( THREE.Object3D.prototype );\r\n})()\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/TransformGizmos.js","\r\nimport GUIObjectAdapter from './utils/GUIObjectAdapter'\r\nimport ToolPanelBase from './utils/ToolPanelBase'\r\nimport './Viewing.Extension.Particle.css'\r\nimport dat from 'dat-gui'\r\n\r\nexport default class ParticlePanel extends ToolPanelBase {\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  constructor (extension, viewer, btnElement) {\r\n\r\n    super(viewer.container, 'Particle Controls', {\r\n      buttonElement: btnElement,\r\n      closable: false\r\n    })\r\n\r\n    $(this.container).addClass('particle')\r\n\r\n    this.particleSystem = extension.particleSystem\r\n\r\n    var gui = new dat.GUI({\r\n      autoPlace: false\r\n    })\r\n\r\n    var guiContainer = document.getElementById(\r\n      this.container.id + '-gui')\r\n\r\n    guiContainer.appendChild(\r\n      gui.domElement)\r\n\r\n    var folder = gui.addFolder('Particle System Settings')\r\n\r\n    this.maxParticleCtrl = folder.add(\r\n      extension,\r\n      'maxParticles', 0, 50000).name(\r\n        'Max Particles').step(1)\r\n\r\n    this.maxParticleCtrl.onFinishChange((value) => {\r\n\r\n      this.emit('maxParticles.changed', value)\r\n    })\r\n\r\n    this.toolCtrl = folder.add(\r\n      extension,\r\n      'tool', ['Mesh', 'Point Cloud']).name(\r\n      'Tool')\r\n\r\n    this.toolCtrl.onFinishChange((value) => {\r\n\r\n      this.emit('tool.changed', value)\r\n    })\r\n\r\n    folder.open()\r\n\r\n    setTimeout(() => {\r\n      gui.domElement.style.width = '100%'\r\n    }, 0)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  htmlContent (id) {\r\n\r\n    return `\r\n     <div class=\"container\">\r\n          <div id=\"${id}-gui\">\r\n          </div>\r\n      </div>`\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  loadObjectGUI (obj) {\r\n\r\n    $('#' + this.container.id + '-obj-gui').remove()\r\n\r\n    if (!obj || !obj.getSelectable()) {\r\n      return\r\n    }\r\n\r\n    var gui = new dat.GUI({\r\n      autoPlace: false\r\n    })\r\n\r\n    $('#' + this.container.id + '-gui').append(\r\n      `<div id=\"${this.container.id}-obj-gui\"></div>`\r\n    )\r\n\r\n    var guiContainer = document.getElementById(\r\n      this.container.id + '-obj-gui')\r\n\r\n    guiContainer.appendChild(\r\n      gui.domElement)\r\n\r\n    switch (obj.getType()) {\r\n\r\n      case 0:\r\n\r\n        this.selectedObjectGUI = new GUIObjectAdapter(\r\n          this.particleSystem.getEmitter(obj.getId()), {\r\n            emissionRate: {\r\n              getter: 'getEmissionRate',\r\n              setter: 'setEmissionRate'\r\n            },\r\n            spread: {\r\n              getter: 'getSpread',\r\n              setter: 'setSpread'\r\n            },\r\n            velocity: {\r\n              getter: 'getVelocity',\r\n              setter: 'setVelocity'\r\n            },\r\n            charge: {\r\n              getter: 'getCharge',\r\n              setter: 'setCharge'\r\n            }\r\n          })\r\n\r\n        var emitterFolder = gui.addFolder(\r\n          'Emitter Settings')\r\n\r\n        emitterFolder.add(\r\n          this.selectedObjectGUI,\r\n          'emissionRate', 10, 2000).name('Emission Rate').\r\n          onChange(() => {\r\n            this.selectedObjectGUI.update()\r\n          })\r\n\r\n        emitterFolder.add(\r\n          this.selectedObjectGUI,\r\n          'spread', 0.0, 6 * Math.PI / 180).name('Spread').\r\n          onChange(() => {\r\n            this.selectedObjectGUI.update()\r\n          })\r\n\r\n        emitterFolder.add(\r\n          this.selectedObjectGUI,\r\n          'velocity', 0.1, 10).name('Particles Velocity').\r\n          onChange(() => {\r\n            this.selectedObjectGUI.update()\r\n          })\r\n\r\n        var chargeCtrl = emitterFolder.add(\r\n          this.selectedObjectGUI,\r\n          'charge', -10, 10).name('Particles Charge')\r\n\r\n        chargeCtrl.onChange((value) => {\r\n\r\n          this.selectedObjectGUI.update()\r\n\r\n          this.emit('objectModified', {\r\n            property: 'charge',\r\n            value: value,\r\n            object: obj\r\n          })\r\n        })\r\n\r\n        emitterFolder.open()\r\n        break\r\n\r\n      case 1:\r\n\r\n        this.selectedObjectGUI = new GUIObjectAdapter(\r\n          this.particleSystem.getMagneticField(obj.getId()), {\r\n            force: {\r\n              getter: 'getForce',\r\n              setter: 'setForce'\r\n            }\r\n          })\r\n\r\n        var fieldFolder = gui.addFolder('Field Settings')\r\n\r\n        var forceCtrl = fieldFolder.add(\r\n          this.selectedObjectGUI,\r\n          'force', -100, 100).name('Force')\r\n\r\n        forceCtrl.onChange((value) => {\r\n\r\n          this.selectedObjectGUI.update()\r\n\r\n          this.emit('objectModified', {\r\n            property: 'force',\r\n            value: value,\r\n            object: obj\r\n          })\r\n        })\r\n\r\n        fieldFolder.open()\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n\r\n    window.setTimeout(() => {\r\n      gui.domElement.style.width = '100%'\r\n    }, 0)\r\n\r\n    this.setVisible(true)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  loadToolGUI (tool) {\r\n\r\n    $('#' + this.container.id + '-tool-gui').remove()\r\n\r\n    var gui = new dat.GUI({\r\n      autoPlace: false\r\n    })\r\n\r\n    $('#' + this.container.id + '-gui').append(\r\n      `<div id=\"${this.container.id}-tool-gui\"></div>`\r\n    )\r\n\r\n    var guiContainer = document.getElementById(\r\n      this.container.id + '-tool-gui')\r\n\r\n    guiContainer.appendChild(\r\n      gui.domElement)\r\n\r\n    switch (tool.getName()) {\r\n\r\n      case 'Viewing.Particle.Tool.Mesh':\r\n\r\n        var meshFolder = gui.addFolder(\r\n          'Mesh Tool Settings')\r\n\r\n        this.shadersCtrl = meshFolder.add(\r\n          tool,\r\n          'shaders', ['ON', 'OFF']).name(\r\n          'Shaders')\r\n\r\n        this.shadersCtrl.onFinishChange((value) => {\r\n\r\n          this.emit('shaders.changed', value)\r\n        })\r\n\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n\r\n    window.setTimeout(() => {\r\n      gui.domElement.style.width = '100%'\r\n    }, 0)\r\n\r\n    this.setVisible(true)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  setSelected (obj) {\r\n\r\n    this.loadObjectGUI(obj)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Panel.js","import EventsEmitter from 'EventsEmitter'\r\nimport Toolkit from 'Viewer.Toolkit'\r\nimport Stopwatch from 'Stopwatch'\r\n\r\nconst vertexShader = `\r\n\r\n  // switch on high precision floats\r\n  #ifdef GL_ES\r\n  precision highp float;\r\n  #endif\r\n\r\n  uniform vec3 offset;\r\n\r\n  void main() {\r\n\r\n    vec3 newPosition = position + offset;\r\n\r\n    gl_Position = projectionMatrix *\r\n      modelViewMatrix *\r\n      vec4(newPosition, 1.0);\r\n  }\r\n`\r\n\r\nconst fragmentShader = `\r\n\r\n  #ifdef GL_ES\r\n  precision highp float;\r\n  #endif\r\n\r\n  uniform vec4 color;\r\n\r\n  void main() {\r\n\r\n    gl_FragColor = color;\r\n  }\r\n`\r\n\r\nexport default class ParticleToolMesh extends EventsEmitter {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (viewer, particleSystem, options = {}){\r\n\r\n    super()\r\n\r\n    this.viewer = viewer\r\n\r\n    viewer.toolController.registerTool(this)\r\n\r\n    this.particleSystem = particleSystem\r\n\r\n    this.stopwatch = new Stopwatch()\r\n\r\n    this.nbParticleTypes = 50\r\n\r\n    this.particleMaterials =\r\n      this.createRandomMaterials(\r\n        this.nbParticleTypes)\r\n\r\n    this.activateShaders (true)\r\n\r\n    this.options = options\r\n\r\n    this.shaders = 'ON'\r\n\r\n    this.active = false\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Tool names\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getNames () {\r\n\r\n    return [\"Viewing.Particle.Tool.Mesh\"]\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Tool name\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getName () {\r\n\r\n    return \"Viewing.Particle.Tool.Mesh\"\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Activate Tool\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  activate () {\r\n\r\n    if (!this.active) {\r\n\r\n      console.log(this.getName() + ' activated')\r\n\r\n      this.stopwatch.getElapsedMs()\r\n\r\n      this.active = true\r\n\r\n      this.viewer.toolController.activateTool(\r\n        this.getName())\r\n\r\n      this.emit('activate')\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Deactivate tool\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  deactivate () {\r\n\r\n    if (this.active) {\r\n\r\n      console.log(this.getName() + ' deactivated')\r\n\r\n      this.active = false\r\n\r\n      this.viewer.toolController.deactivateTool(\r\n        this.getName())\r\n\r\n      this.clearParticles()\r\n\r\n      this.emit('deactivate')\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  setMaxParticles (maxParticles) {\r\n\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  clearParticles () {\r\n\r\n    this.particleSystem.initParticleLoop()\r\n\r\n    while (true) {\r\n\r\n      var particle = this.particleSystem.nextParticle()\r\n\r\n      if (!particle.ptr) {\r\n        break\r\n      }\r\n\r\n      this.destroyParticle(particle)\r\n    }\r\n\r\n    this.viewer.impl.invalidate(true)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Creates a bunch of materials with random colors\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  createRandomMaterials (nb) {\r\n\r\n    var materials = []\r\n\r\n    for (var i = 0; i < nb; ++i) {\r\n\r\n      var clr = Math.random() * 16777215\r\n\r\n      materials.push(this.createMaterial({\r\n        shading: THREE.FlatShading,\r\n        name: Toolkit.guid(),\r\n        shininess: 50,\r\n        specular: clr,\r\n        color: clr\r\n      }))\r\n    }\r\n\r\n    return materials\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  destroyParticle (particle) {\r\n\r\n    this.viewer.impl.scene.remove(\r\n      particle.mesh)\r\n\r\n    particle.mesh = null\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  filterParticle (particle) {\r\n\r\n    var result = false\r\n\r\n    this.bounds.forEach((bound)=>{\r\n\r\n      switch(bound.type){\r\n\r\n        case 'sphere':\r\n\r\n          if(bound.max){\r\n            if(!particle.getPosition().withinSphere(\r\n                bound.center, bound.max)) {\r\n              result = true\r\n            }\r\n          }\r\n\r\n          if(bound.min){\r\n            if(particle.getPosition().withinSphere(\r\n                bound.center, bound.min)) {\r\n              result = true\r\n            }\r\n          }\r\n\r\n          break\r\n\r\n        case 'box':\r\n\r\n          if(!particle.getPosition().withinBox(\r\n              bound.center, bound.size)) {\r\n            result = true\r\n          }\r\n\r\n          break\r\n      }\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Update loop without shaders\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  update () {\r\n\r\n    this.particleSystem.step(\r\n      this.stopwatch.getElapsedMs() * 0.001)\r\n\r\n    this.updateChunk ()\r\n\r\n    // invalidate (needsClear, needsRender, overlayDirty)\r\n    this.viewer.impl.invalidate(true, false, false)\r\n\r\n    this.emit('fps.tick')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  updateChunk () {\r\n\r\n    this.particleSystem.initParticleLoop()\r\n\r\n    let particle\r\n\r\n    let tick = () => {\r\n\r\n      var start = new Date().getTime()\r\n\r\n      while (true) {\r\n\r\n        particle = this.particleSystem.nextParticle()\r\n\r\n        if (!particle.ptr) {\r\n\r\n          break\r\n\r\n        } else if ((new Date().getTime() - start) > 50) {\r\n\r\n          // Yield execution to rendering logic\r\n          setTimeout(tick, 25)\r\n\r\n          break\r\n\r\n        } else {\r\n\r\n          this.updateParticle(particle)\r\n        }\r\n      }\r\n    }\r\n\r\n    setTimeout(tick, 25)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  updateParticleShadersOff (particle) {\r\n\r\n    if (!particle.mesh) {\r\n\r\n      var type = this.randomInt(0, this.nbParticleTypes)\r\n\r\n      particle.mesh = this.createMesh(\r\n        particle.getRadius(),\r\n        this.particleMaterials[type])\r\n\r\n        this.viewer.impl.scene.add(particle.mesh)\r\n    }\r\n\r\n    particle.mesh.visible = !particle.getRecycled()\r\n\r\n    if (this.filterParticle(particle)) {\r\n\r\n      particle.setLifeTime(-1)\r\n\r\n    } else if (particle.mesh.visible) {\r\n\r\n      var pos = particle.getPosition()\r\n\r\n      particle.mesh.position.x = pos.getX()\r\n      particle.mesh.position.y = pos.getY()\r\n      particle.mesh.position.z = pos.getZ()\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  updateParticleShadersOn (particle) {\r\n\r\n    if (!particle.mesh) {\r\n\r\n      particle.shader = {\r\n        uniforms: {\r\n          offset: {\r\n            type: 'v3',\r\n            value: new THREE.Vector3(0,0,0)\r\n          },\r\n          color: {\r\n            type: 'v4',\r\n            value: new THREE.Vector4(\r\n              Math.random(),\r\n              Math.random(),\r\n              Math.random(), 1)\r\n          }\r\n        },\r\n        vertexShader,\r\n        fragmentShader\r\n      }\r\n\r\n      var shaderMaterial = new THREE.ShaderMaterial(\r\n        particle.shader)\r\n\r\n      particle.mesh = this.createMesh(\r\n        particle.getRadius(),\r\n        shaderMaterial)\r\n\r\n      this.viewer.impl.scene.add(particle.mesh)\r\n    }\r\n\r\n    particle.mesh.visible = !particle.getRecycled()\r\n\r\n    if (this.filterParticle(particle)) {\r\n\r\n      particle.setLifeTime(-1)\r\n\r\n    } else if (particle.mesh.visible) {\r\n\r\n      var pos = particle.getPosition()\r\n\r\n      var offset = particle.shader.uniforms.offset.value\r\n\r\n      offset.x = pos.getX()\r\n      offset.y = pos.getY()\r\n      offset.z = pos.getZ()\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  activateShaders (activate) {\r\n\r\n    this.updateParticle = (activate ?\r\n      this.updateParticleShadersOn :\r\n      this.updateParticleShadersOff)\r\n\r\n    this.clearParticles()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  createMaterial (props) {\r\n\r\n    var material = new THREE.MeshPhongMaterial(props)\r\n\r\n    this.viewer.impl.matman().addMaterial(\r\n      props.name,\r\n      material,\r\n      true)\r\n\r\n    return material\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  createMesh (size, material) {\r\n\r\n    var geometry = new THREE.SphereGeometry(\r\n      size, 4, 4)\r\n\r\n    var mesh = new THREE.Mesh(\r\n      geometry,\r\n      material)\r\n\r\n    return mesh\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Random int in [min, max[\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  randomInt(min, max) {\r\n\r\n    return Math.floor(Math.random() * (max - min)) + min\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Tool.Mesh.js","import EventsEmitter from 'EventsEmitter'\r\nimport Toolkit from 'Viewer.Toolkit'\r\nimport Stopwatch from 'Stopwatch'\r\n\r\nconst vertexShader = `\r\n\r\n  // switch on high precision floats\r\n  #ifdef GL_ES\r\n  precision highp float;\r\n  #endif\r\n\r\n  varying vec3 vColor;\r\n  uniform vec3 offset;\r\n\r\n  void main() {\r\n\r\n    vColor = color;\r\n\r\n    gl_PointSize = 4.0;\r\n\r\n    gl_Position = projectionMatrix *\r\n      modelViewMatrix *\r\n      vec4(position, 1.0);\r\n  }\r\n`\r\n\r\nconst fragmentShader = `\r\n\r\n  #ifdef GL_ES\r\n  precision highp float;\r\n  #endif\r\n\r\n  varying vec3 vColor;\r\n\r\n  void main() {\r\n\r\n    gl_FragColor = vec4(vColor, 1);\r\n  }\r\n`\r\n\r\nconst vertexshader = `\r\n  attribute vec3 ca;\r\n  varying vec3 vColor;\r\n  void main() {\r\n    vColor = ca;\r\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n    vec3 viewDir = normalize( -mvPosition.xyz );\r\n    gl_PointSize = 4.0;\r\n    vec4 newPos = mvPosition;\r\n    gl_Position = projectionMatrix * newPos;\r\n  }\r\n`\r\n\r\nconst fragmentshader = `\r\n  uniform vec3 color;\r\n  uniform sampler2D texture;\r\n  varying vec3 vColor;\r\n  void main() {\r\n    vec4 color = vec4(color*vColor, 1.0 ) * texture2D(texture, gl_PointCoord);\r\n    if ( color.w < 0.5 ) discard;\r\n    gl_FragColor = color;\r\n  }\r\n`\r\n\r\n//this.sprite = THREE.ImageUtils.loadTexture('/img/disc.png');\r\n//\r\n//let geometry = new THREE.Geometry();\r\n//let colors: any[] = [];\r\n//let nodes = this._dataModel.sensorNodes;\r\n//let sensorInfo = this._dataModel.sensorInfo;\r\n//for (let i = 0; i < nodes.length; i++) {\r\n//  let vertex = new THREE.Vector3();\r\n//  // logger.log('addSensorMarkers', sensorInfo[nodes[i]]);\r\n//  let myInfo: any;\r\n//  if (sensorInfo[nodes[i]].source === 'bim') {\r\n//    // logger.log('addSensorMarkers done', sensorInfo[nodes[i]]);\r\n//    myInfo = sensorInfo[nodes[i]];\r\n//    let box = this.getBounds(Number(myInfo.nodeid));\r\n//    vertex.x = box.center().x;\r\n//    vertex.y = box.center().y;\r\n//    vertex.z = box.center().z;\r\n//    geometry.vertices.push( vertex );\r\n//    let col = new THREE.Color( 0x78c679 );\r\n//    // col.setHSL( Math.random(), 0.75, 0.7);\r\n//    (<any>this.material).attributes.ca.value.push(col);\r\n//  }  else if (sensorInfo[nodes[i]].source === 'dasher') {\r\n//    myInfo = sensorInfo[nodes[i]];\r\n//    if (myInfo.id) {\r\n//      vertex.x = myInfo.location[0];\r\n//      vertex.y = myInfo.location[1];\r\n//      vertex.z = myInfo.location[2];\r\n//      geometry.vertices.push( vertex );\r\n//      let col = new THREE.Color( 0x78c679 );\r\n//      // col.setHSL( Math.random(), 0.75, 0.7);\r\n//      (<any>this.material).attributes.ca.value.push(col);\r\n//    }\r\n//  }\r\n//}\r\n\r\nexport default class ParticleToolPointCloud extends EventsEmitter {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (viewer, particleSystem, options = {}){\r\n\r\n    super()\r\n\r\n    this.viewer = viewer\r\n\r\n    viewer.toolController.registerTool(this)\r\n\r\n    this.particleSystem = particleSystem\r\n\r\n    this.stopwatch = new Stopwatch()\r\n\r\n    this.nbParticleTypes = 50\r\n\r\n    this.shader = {\r\n      vertexColors: THREE.VertexColors,\r\n      side: THREE.DoubleSide,\r\n      //transparent:true,\r\n      uniforms: {},\r\n      fragmentShader,\r\n      vertexShader\r\n    }\r\n\r\n    this.options = options\r\n\r\n    this.active = false\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Tool names\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getNames () {\r\n\r\n    return [\"Viewing.Particle.Tool.PointCloud\"]\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Tool name\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getName () {\r\n\r\n    return \"Viewing.Particle.Tool.PointCloud\"\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Activate Tool\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  activate () {\r\n\r\n    if (!this.active) {\r\n\r\n      console.log(this.getName() + ' activated')\r\n\r\n      this.stopwatch.getElapsedMs()\r\n\r\n      this.active = true\r\n\r\n      this.viewer.toolController.activateTool(\r\n        this.getName())\r\n\r\n      this.emit('activate')\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Deactivate tool\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  deactivate () {\r\n\r\n    if (this.active) {\r\n\r\n      console.log(this.getName() + ' deactivated')\r\n\r\n      this.active = false\r\n\r\n      this.viewer.toolController.deactivateTool(\r\n        this.getName())\r\n\r\n      this.clearParticles()\r\n\r\n      this.emit('deactivate')\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  setMaxParticles (maxParticles) {\r\n\r\n    if (this.pointCloud) {\r\n\r\n      this.viewer.impl.scene.remove(this.pointCloud)\r\n    }\r\n\r\n    const shaderMaterial = new THREE.ShaderMaterial(\r\n      this.shader)\r\n\r\n    this.pointCloud = this.createPointCloud(\r\n      maxParticles,\r\n      shaderMaterial)\r\n\r\n    this.viewer.impl.scene.add(this.pointCloud)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  clearParticles () {\r\n\r\n    if (this.pointCloud) {\r\n\r\n      this.viewer.impl.scene.remove(this.pointCloud)\r\n    }\r\n\r\n    this.viewer.impl.invalidate(true)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  filterParticle (particle) {\r\n\r\n    var result = false\r\n\r\n    this.bounds.forEach((bound)=>{\r\n\r\n      switch(bound.type){\r\n\r\n        case 'sphere':\r\n\r\n          if(bound.max){\r\n            if(!particle.getPosition().withinSphere(\r\n                bound.center, bound.max)) {\r\n              result = true\r\n            }\r\n          }\r\n\r\n          if(bound.min){\r\n            if(particle.getPosition().withinSphere(\r\n                bound.center, bound.min)) {\r\n              result = true\r\n            }\r\n          }\r\n\r\n          break\r\n\r\n        case 'box':\r\n\r\n          if(!particle.getPosition().withinBox(\r\n              bound.center, bound.size)) {\r\n            result = true\r\n          }\r\n\r\n          break\r\n      }\r\n    })\r\n\r\n    return result\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Update loop without shaders\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  update () {\r\n\r\n    this.particleSystem.step(\r\n      this.stopwatch.getElapsedMs() * 0.001)\r\n\r\n    this.particleSystem.initParticleLoop()\r\n\r\n    let index = -1\r\n\r\n    let particle\r\n\r\n    while (true) {\r\n\r\n      particle = this.particleSystem.nextParticle()\r\n\r\n      ++index\r\n\r\n      if (!particle.ptr) {\r\n\r\n        break\r\n      }\r\n\r\n      this.updateParticle(particle, index)\r\n    }\r\n\r\n    // invalidate (needsClear, needsRender, overlayDirty)\r\n    this.viewer.impl.invalidate(true, false, false)\r\n    //this.viewer.impl.invalidate(false, false, true)\r\n\r\n    this.emit('fps.tick')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  updateParticle (particle, index) {\r\n\r\n    var positions = this.bufferGeometry.attributes.position.array\r\n\r\n    if(particle.getRecycled()) {\r\n\r\n      positions[3 * index]     = -5000.0\r\n      positions[3 * index + 1] = -5000.0\r\n      positions[3 * index + 2] = -5000.0\r\n\r\n    } else if (this.filterParticle(particle)) {\r\n\r\n      particle.setLifeTime(-1)\r\n\r\n      positions[3 * index]     = -5000.0\r\n      positions[3 * index + 1] = -5000.0\r\n      positions[3 * index + 2] = -5000.0\r\n\r\n    } else {\r\n\r\n      const pos = particle.getPosition()\r\n\r\n      //console.log(index + ': ' + pos.getX() + ', ' + pos.getX() + ', ' + pos.getX())\r\n\r\n      positions[3 * index]     = pos.getX()\r\n      positions[3 * index + 1] = pos.getY()\r\n      positions[3 * index + 2] = pos.getZ()\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  createPointCloud (maxPoints, material) {\r\n\r\n    this.bufferGeometry = new THREE.BufferGeometry()\r\n\r\n    this.bufferGeometry.dynamic = true\r\n\r\n    this.bufferGeometry.addAttribute(\r\n      'position',\r\n      new THREE.BufferAttribute(\r\n        new Float32Array(maxPoints * 3), 3))\r\n\r\n    this.bufferGeometry.addAttribute(\r\n      'color',\r\n      new THREE.BufferAttribute(\r\n        new Float32Array(maxPoints * 3), 3))\r\n\r\n    var colors = this.bufferGeometry.attributes.color.array\r\n\r\n    for(let i = 0; i < maxPoints; ++i) {\r\n\r\n      colors[3 * i] = Math.random()\r\n      colors[3 * i + 1] = Math.random()\r\n      colors[3 * i + 2] = Math.random()\r\n    }\r\n\r\n    return new THREE.PointCloud(\r\n      this.bufferGeometry,\r\n      material)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Random int in [min, max[\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  randomInt(min, max) {\r\n\r\n    return Math.floor(Math.random() * (max - min)) + min\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.Tool.PointCloud.js","/////////////////////////////////////////////////////////////////////\r\n// Viewing.Extension.Particle\r\n// by Philippe Leefsma, March 2016\r\n//\r\n/////////////////////////////////////////////////////////////////////\r\nimport ParticleToolPointCloud from './Viewing.Extension.Particle.Tool.PointCloud'\r\nimport ParticleToolMesh from './Viewing.Extension.Particle.Tool.Mesh'\r\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\r\nimport TranslateTool from './Viewing.Tool.Particle.Translate'\r\nimport ParticlePanel from './Viewing.Extension.Particle.Panel'\r\nimport ExtensionBase from 'Viewer.ExtensionBase'\r\nimport ParticleSystem from './ParticleSystem'\r\nimport Toolkit from 'Viewer.Toolkit'\r\nimport FPS from './utils/FPSMeter'\r\nimport dat from 'dat-gui'\r\n\r\nclass ParticleExtension extends MultiModelExtensionBase {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor(viewer, options) {\r\n\r\n    super (viewer, options)\r\n\r\n    this.options = options\r\n\r\n    this.viewer = viewer\r\n\r\n    this.particlePanel = null\r\n\r\n    this.transformTool = new TranslateTool(\r\n      this.viewer)\r\n\r\n    this.objectMaterials =\r\n      this.createObjectMaterials()\r\n\r\n    this.maxParticles = this.options.maxParticles || 0\r\n\r\n    this.particleSystem = new ParticleSystem.Instance(\r\n      this.maxParticles)\r\n\r\n    this.particleToolPointCloud = new ParticleToolPointCloud(\r\n      this.viewer, this.particleSystem, options)\r\n\r\n    this.particleToolMesh = new ParticleToolMesh(\r\n      this.viewer, this.particleSystem, options)\r\n\r\n    this.activeParticleTool = this.particleToolMesh\r\n\r\n    this.tool = 'Mesh'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.Particle'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  load() {\r\n\r\n    console.log('Viewing.Extension.Particle loaded')\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onModelRootLoaded () {\r\n\r\n    this.options.loader.show(false)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  onGeometryLoaded () {\r\n\r\n    this.loadScene().then(() => {\r\n\r\n      this.viewer.setProgressiveRendering(false)\r\n\r\n      $(this.viewer.container).append(\r\n        '<div id=\"particle-toolbar\"> </div>')\r\n\r\n      $('#particle-toolbar').css({\r\n        position: 'absolute',\r\n        left: '10px',\r\n        top: '90px'\r\n      })\r\n\r\n      var fps = new FPSMeter(\r\n        document.getElementById('particle-toolbar'), {\r\n          maxFps:    20, //expected\r\n          smoothing: 10,\r\n          show: 'fps',\r\n          decimals: 1,\r\n          left: '0px',\r\n          top: '-80px',\r\n          theme: 'transparent',\r\n          heat: 1,\r\n          graph: 1,\r\n          toggleOn: null,\r\n          history: 32\r\n        })\r\n\r\n      this.onTxChange =\r\n        this.onTxChange.bind(this)\r\n\r\n      this.transformTool.on('transform.TxChange',\r\n        this.onTxChange)\r\n\r\n      this.transformTool.on('transform.select',\r\n        (event) => {\r\n\r\n          return this.onSelect(event)\r\n        })\r\n\r\n      this.particleToolMesh.on('fps.tick',()=>{\r\n        fps.tick()\r\n      })\r\n\r\n      this.transformTool.activate()\r\n\r\n      this.activeParticleTool = this.particleToolMesh\r\n\r\n      if (this.options.autoStart) {\r\n\r\n        this.particleToolMesh.activate()\r\n      }\r\n\r\n      this.loadPanel()\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // load control panel\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  loadPanel () {\r\n\r\n    this.particlePanel = new ParticlePanel(\r\n      this, this.viewer, null)\r\n\r\n    this.particlePanel.on('objectModified', (event) => {\r\n\r\n      this.onObjectModified(event)\r\n    })\r\n\r\n    this.particlePanel.on('maxParticles.changed', (value) => {\r\n\r\n      this.particleToolPointCloud.setMaxParticles(value)\r\n\r\n      this.particleToolMesh.setMaxParticles(value)\r\n\r\n      this.particleSystem.setMaxParticles(value)\r\n\r\n      if (value > 0) {\r\n\r\n        if(!this.activeParticleTool.active) {\r\n\r\n          this.activeParticleTool.activate()\r\n\r\n        } else {\r\n\r\n          this.activeParticleTool.clearParticles()\r\n        }\r\n\r\n      } else {\r\n\r\n        this.activeParticleTool.deactivate()\r\n      }\r\n    })\r\n\r\n    this.particlePanel.on('tool.changed', (value) => {\r\n\r\n      switch (value) {\r\n\r\n        case 'Mesh':\r\n          this.activeParticleTool = this.particleToolMesh\r\n          this.particleToolPointCloud.deactivate()\r\n          this.particleToolMesh.activate()\r\n          break\r\n\r\n        case 'Point Cloud':\r\n          this.activeParticleTool = this.particleToolPointCloud\r\n          this.particleToolPointCloud.activate()\r\n          this.particleToolMesh.deactivate()\r\n          break\r\n      }\r\n\r\n      this.particlePanel.loadToolGUI(this.activeParticleTool)\r\n    })\r\n\r\n    this.particlePanel.on('shaders.changed', (value) => {\r\n\r\n      this.particleToolMesh.activateShaders(value === 'ON')\r\n    })\r\n\r\n    this.particlePanel.setVisible(true)\r\n\r\n    this.particlePanel.loadToolGUI(\r\n      this.activeParticleTool)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  unload() {\r\n\r\n    console.log('Viewing.Extension.Particle unloaded')\r\n\r\n    $('#particle-toolbar').remove()\r\n\r\n    if (this.particlePanel) {\r\n\r\n      this.particlePanel.setVisible(false)\r\n    }\r\n\r\n    if (this.viewer.activeParticleTool) {\r\n\r\n      this.viewer.activeParticleTool.deactivate()\r\n    }\r\n\r\n    this.transformTool.off()\r\n\r\n    this.transformTool.deactivate()\r\n\r\n    this.particleToolMesh.particleSystem.destroy()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  onTxChange(txChange) {\r\n\r\n    txChange.dbIds.forEach((dbId) => {\r\n\r\n      this.updateObjectPosition(dbId)\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  onSelect (select) {\r\n\r\n    if (select.dbIds.length) {\r\n\r\n      var obj = this.particleSystem.getObjectById(\r\n        select.dbIds[0])\r\n\r\n      if(this.particlePanel) {\r\n\r\n        this.particlePanel.setSelected(obj)\r\n      }\r\n\r\n      if (obj) {\r\n\r\n        return {\r\n          transformable: obj.getTransformable(),\r\n          selectable: obj.getSelectable()\r\n        }\r\n      }\r\n\r\n      return { selectable: false }\r\n\r\n    } else {\r\n\r\n      if(this.particlePanel) {\r\n\r\n        this.particlePanel.setSelected(null)\r\n      }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  onObjectModified (event) {\r\n\r\n    switch (event.property) {\r\n\r\n      case 'charge':\r\n      case 'force':\r\n\r\n        // red material < 0\r\n        // blue material >= 0\r\n        var matIdx = event.value < 0 ? 0 : 1\r\n\r\n        var material = this.objectMaterials[matIdx]\r\n\r\n        Toolkit.setMaterial(\r\n          this.viewer.model,\r\n          event.object.getId(),\r\n          material)\r\n\r\n        break\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  createMaterial (props) {\r\n\r\n    var material = new THREE.MeshPhongMaterial(props)\r\n\r\n    this.viewer.impl.matman().addMaterial(\r\n      props.name,\r\n      material,\r\n      true)\r\n\r\n    return material\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Creates object materials\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  createObjectMaterials () {\r\n\r\n    var materials = [\r\n\r\n      this.createMaterial({\r\n        shading: THREE.FlatShading,\r\n        name: Toolkit.guid(),\r\n        shininess: 80,\r\n        specular: parseInt('B80000', 16),\r\n        color: parseInt('B80000', 16)\r\n      }),\r\n\r\n      this.createMaterial({\r\n        shading: THREE.FlatShading,\r\n        name: Toolkit.guid(),\r\n        shininess: 80,\r\n        specular: parseInt('0000B8', 16),\r\n        color: parseInt('0000B8', 16)\r\n      })\r\n    ]\r\n\r\n    return materials\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Update object position\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  async updateObjectPosition (dbId) {\r\n\r\n    var bbox = await Toolkit.getWorldBoundingBox(\r\n      this.viewer.model, dbId)\r\n\r\n    var obj = this.particleSystem.getObjectById(dbId)\r\n\r\n    obj.setPosition(\r\n      (bbox.min.x + bbox.max.x) / 2,\r\n      (bbox.min.y + bbox.max.y) / 2,\r\n      (bbox.min.z + bbox.max.z) / 2)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Load Scene settings from properties\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  loadScene () {\r\n\r\n    return new Promise((resolve, reject)=> {\r\n\r\n      this.viewer.search('particle.scene', async(dbIds)=>{\r\n\r\n        if (dbIds.length != 1)\r\n          return reject('Invalid Particle scene')\r\n\r\n        try {\r\n\r\n          var propSettings = await Toolkit.getProperty(\r\n            this.viewer.model, dbIds[0], 'particle.settings')\r\n\r\n          var settings = JSON.parse(\r\n            propSettings.displayValue)\r\n\r\n          this.particleSystem.setDof(\r\n            settings.dof[0],\r\n            settings.dof[1],\r\n            settings.dof[2])\r\n\r\n          this.bounds = []\r\n\r\n          for (var i = 1; i <= settings.bounds; ++i) {\r\n\r\n            var propBounds = await Toolkit.getProperty(\r\n              this.viewer.model, dbIds[0], 'particle.bound' + i)\r\n\r\n            this.bounds.push(this.parseBound(propBounds))\r\n          }\r\n\r\n          this.particleToolPointCloud.bounds = this.bounds\r\n\r\n          this.particleToolMesh.bounds = this.bounds\r\n\r\n          var tasks = [\r\n            this.loadEmitters(),\r\n            this.loadObjects(),\r\n            this.loadFields()\r\n          ]\r\n\r\n          return resolve(Promise.all(tasks))\r\n        }\r\n        catch (ex) {\r\n          return reject(ex)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Parses scene bounds\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  parseBound (propBound) {\r\n\r\n    var bound = JSON.parse(propBound.displayValue)\r\n\r\n    switch(bound.type) {\r\n\r\n      case 'box':\r\n\r\n        return {\r\n\r\n          center: new ParticleSystem.Vector(\r\n            bound.center[0],\r\n            bound.center[1],\r\n            bound.center[2]),\r\n\r\n          size: new ParticleSystem.Vector(\r\n            bound.size[0],\r\n            bound.size[1],\r\n            bound.size[2]),\r\n\r\n          type: 'box'\r\n        }\r\n\r\n      case 'sphere':\r\n\r\n        return {\r\n\r\n          center: new ParticleSystem.Vector(\r\n            bound.center[0],\r\n            bound.center[1],\r\n            bound.center[2]),\r\n\r\n          min: bound.min,\r\n          max: bound.max,\r\n          type: 'sphere'\r\n        }\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Loads scene objects\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  loadObject (dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var propSettings = await Toolkit.getProperty(\r\n          this.viewer.model, dbId, 'particle.settings')\r\n\r\n        var settings = JSON.parse(\r\n          propSettings.displayValue)\r\n\r\n        var color = parseInt(settings.clr, 16)\r\n\r\n        var material = this.createMaterial({\r\n          transparent: settings.transparent,\r\n          opacity: settings.opacity,\r\n          shading: THREE.FlatShading,\r\n          name: Toolkit.guid(),\r\n          shininess: 30,\r\n          specular: color,\r\n          color: color\r\n        })\r\n\r\n        Toolkit.setMaterial(\r\n          this.viewer.model, dbId, material)\r\n\r\n        return resolve()\r\n      }\r\n      catch (ex) {\r\n\r\n        //throwing Invalid DbId\r\n        //return reject(ex)\r\n        return resolve()\r\n      }\r\n    })\r\n  }\r\n\r\n  loadObjects () {\r\n\r\n    return new Promise((resolve, reject)=> {\r\n\r\n      this.viewer.search('particle.object', (dbIds)=>{\r\n\r\n        var tasks = dbIds.map((dbId)=> {\r\n\r\n          return this.loadObject(dbId)\r\n        })\r\n\r\n        return resolve(Promise.all(tasks))\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Load scene emitters\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  loadEmitter (dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var bbox = await Toolkit.getWorldBoundingBox(\r\n          this.viewer.model, dbId)\r\n\r\n        var emitter = this.particleSystem.addEmitter(dbId)\r\n\r\n        var propSettings = await Toolkit.getProperty(\r\n          this.viewer.model, dbId, 'particle.settings')\r\n\r\n        var settings = JSON.parse(\r\n          propSettings.displayValue)\r\n\r\n        emitter.setTransformable(settings.transfo)\r\n        emitter.setEmissionRate(settings.rate)\r\n        emitter.setSelectable(settings.select)\r\n        emitter.setVelocity(settings.velocity)\r\n        emitter.setCharge(settings.charge)\r\n        emitter.setSpread(settings.spread)\r\n\r\n        var offset = new ParticleSystem.Vector(\r\n          settings.dir[0],\r\n          settings.dir[1],\r\n          settings.dir[2])\r\n\r\n        var magnitude = offset.magnitude();\r\n\r\n        emitter.setOffset(\r\n          offset.getX() * 0.5 / magnitude,\r\n          offset.getY() * 0.5 / magnitude,\r\n          offset.getZ() * 0.5 / magnitude)\r\n\r\n        emitter.setPosition(\r\n          (bbox.min.x + bbox.max.x) /2,\r\n          (bbox.min.y + bbox.max.y) /2,\r\n          (bbox.min.z + bbox.max.z) /2)\r\n\r\n        var matIdx = emitter.charge < 0 ? 0 : 1\r\n\r\n        var material = this.objectMaterials[matIdx]\r\n\r\n        Toolkit.setMaterial(\r\n          this.viewer.model,\r\n          dbId, material)\r\n\r\n        return resolve()\r\n      }\r\n      catch(ex){\r\n\r\n        console.log(ex)\r\n\r\n        //throwing Invalid DbId\r\n        //return reject(ex)\r\n        return resolve()\r\n      }\r\n    })\r\n  }\r\n\r\n  loadEmitters () {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      this.viewer.search('particle.emitter', (dbIds) => {\r\n\r\n        var tasks = dbIds.map((dbId)=> {\r\n\r\n          return this.loadEmitter(dbId)\r\n        })\r\n\r\n        return resolve(Promise.all(tasks))\r\n      })\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Load scene fields\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  loadField (dbId) {\r\n\r\n    return new Promise(async(resolve, reject) => {\r\n\r\n      try {\r\n\r\n        var bbox = await Toolkit.getWorldBoundingBox(\r\n          this.viewer.model, dbId)\r\n\r\n        var field = this.particleSystem.addMagneticField(dbId)\r\n\r\n        var propSettings = await Toolkit.getProperty(\r\n          this.viewer.model, dbId,\r\n          'particle.settings')\r\n\r\n        var settings = JSON.parse(\r\n          propSettings.displayValue)\r\n\r\n        field.setTransformable(settings.transfo)\r\n        field.setSelectable(settings.select)\r\n        field.setForce(settings.force)\r\n\r\n        field.setPosition(\r\n          (bbox.min.x + bbox.max.x) /2,\r\n          (bbox.min.y + bbox.max.y) /2,\r\n          (bbox.min.z + bbox.max.z) /2)\r\n\r\n        var matIdx = settings.force < 0 ? 0 : 1\r\n\r\n        var material = this.objectMaterials[matIdx]\r\n\r\n        Toolkit.setMaterial(\r\n          this.viewer.model,\r\n          dbId, material)\r\n\r\n        return resolve()\r\n      }\r\n      catch(ex){\r\n\r\n        //throwing Invalid DbId\r\n        //return reject(ex)\r\n        return resolve()\r\n      }\r\n    })\r\n  }\r\n\r\n  loadFields () {\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n      this.viewer.search('particle.field', (dbIds) => {\r\n\r\n        var tasks = dbIds.map((dbId)=> {\r\n\r\n          return this.loadField(dbId)\r\n        })\r\n\r\n        return resolve(Promise.all(tasks))\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nAutodesk.Viewing.theExtensionManager.registerExtension(\r\n  ParticleExtension.ExtensionId,\r\n  ParticleExtension)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.js","import EventsEmitter from 'EventsEmitter'\r\nimport './TransformGizmos'\r\n\r\nexport default class TransformTool extends EventsEmitter {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (viewer) {\r\n\r\n    super()\r\n\r\n    viewer.toolController.registerTool(this)\r\n\r\n    this.viewer = viewer\r\n\r\n    this._dbIds = []\r\n\r\n    this._hitPoint = null\r\n\r\n    this._selectSet = null\r\n\r\n    this._isDragging = false\r\n\r\n    this._transformMesh = null\r\n\r\n    this._modifiedFragIdMap = {}\r\n\r\n    this._transformControlTx = null\r\n\r\n    this._selectedFragProxyMap = {}\r\n\r\n    this.onTxChange =\r\n      this.onTxChange.bind(this)\r\n\r\n    this.onAggregateSelectionChanged =\r\n      this.onAggregateSelectionChanged.bind(this)\r\n\r\n    this.onCameraChanged =\r\n      this.onCameraChanged.bind(this)\r\n\r\n    this.handleSelectionChanged =\r\n      this.handleSelectionChanged.bind(this)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getNames() {\r\n\r\n    return [\"Viewing.Transform.Tool\"]\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  getName() {\r\n\r\n    return \"Viewing.Transform.Tool\"\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // Creates a dummy mesh to attach control to\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  createTransformMesh() {\r\n\r\n    var material = new THREE.MeshPhongMaterial(\r\n      { color: 0xff0000 })\r\n\r\n    this.viewer.impl.matman().addMaterial(\r\n      'transform-tool-material',\r\n      material,\r\n      true)\r\n\r\n    var sphere = new THREE.Mesh(\r\n      new THREE.SphereGeometry(0.0001, 5),\r\n      material)\r\n\r\n    sphere.position.set(0, 0, 0)\r\n\r\n    return sphere\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // on translation change\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  onTxChange() {\r\n\r\n    for(var fragId in this._selectedFragProxyMap) {\r\n\r\n      var fragProxy = this._selectedFragProxyMap[fragId]\r\n\r\n      var position = new THREE.Vector3(\r\n        this._transformMesh.position.x - fragProxy.offset.x,\r\n        this._transformMesh.position.y - fragProxy.offset.y,\r\n        this._transformMesh.position.z - fragProxy.offset.z)\r\n\r\n      fragProxy.position = position\r\n\r\n      fragProxy.updateAnimTransform()\r\n    }\r\n\r\n    this.viewer.impl.sceneUpdated(true)\r\n\r\n    this.emit('transform.TxChange', {\r\n      dbIds: this._dbIds,\r\n      fragIds: Object.keys(this._selectedFragProxyMap)\r\n    })\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // on camera changed\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  onCameraChanged() {\r\n\r\n    if(this._transformControlTx) {\r\n\r\n      this._transformControlTx.update()\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // item selected callback\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  onAggregateSelectionChanged(event) {\r\n\r\n    var dbIdArray = []\r\n    var fragIdsArray = []\r\n\r\n    if(event.selections && event.selections.length) {\r\n\r\n      var selection = event.selections[0]\r\n\r\n      dbIdArray = selection.dbIdArray\r\n\r\n      fragIdsArray = selection.fragIdsArray\r\n    }\r\n\r\n    this.handleSelectionChanged(dbIdArray, fragIdsArray)\r\n  }\r\n\r\n  handleSelectionChanged(dbIdArray, fragIdsArray) {\r\n\r\n    this._selectedFragProxyMap = {}\r\n\r\n    this._dbIds = dbIdArray\r\n\r\n    //component unselected\r\n\r\n    if(!fragIdsArray.length) {\r\n\r\n      this._hitPoint = null\r\n\r\n      this._transformControlTx.visible = false\r\n\r\n      this._transformControlTx.removeEventListener(\r\n        'change', this.onTxChange)\r\n\r\n      this.viewer.removeEventListener(\r\n        Autodesk.Viewing.CAMERA_CHANGE_EVENT,\r\n        this.onCameraChanged)\r\n\r\n      this.emit('transform.select', {\r\n        dbIds: this._dbIds\r\n      })\r\n\r\n      return\r\n    }\r\n\r\n    if (this._hitPoint) {\r\n\r\n      this._selectSet = this.emit('transform.select', {\r\n        dbIds: this._dbIds\r\n      })\r\n\r\n      if (this._selectSet) {\r\n\r\n        if (!this._selectSet.selectable) {\r\n          this._hitPoint = null\r\n          this.viewer.select([])\r\n          return\r\n        }\r\n\r\n        if (!this._selectSet.transformable) {\r\n          this._hitPoint = null\r\n          return\r\n        }\r\n      }\r\n\r\n      this._transformControlTx.visible = true\r\n\r\n      this._transformControlTx.setPosition(\r\n        this._hitPoint)\r\n\r\n      this._transformControlTx.addEventListener(\r\n        'change', this.onTxChange)\r\n\r\n      this.viewer.addEventListener(\r\n        Autodesk.Viewing.CAMERA_CHANGE_EVENT,\r\n        this.onCameraChanged)\r\n\r\n      fragIdsArray.forEach((fragId)=> {\r\n\r\n        var fragProxy = this.viewer.impl.getFragmentProxy(\r\n          this.viewer.model,\r\n          fragId)\r\n\r\n        fragProxy.getAnimTransform()\r\n\r\n        var offset = {\r\n\r\n          x: this._hitPoint.x - fragProxy.position.x,\r\n          y: this._hitPoint.y - fragProxy.position.y,\r\n          z: this._hitPoint.z - fragProxy.position.z\r\n        }\r\n\r\n        fragProxy.offset = offset\r\n\r\n        this._selectedFragProxyMap[fragId] = fragProxy\r\n\r\n        this._modifiedFragIdMap[fragId] = {}\r\n      })\r\n\r\n      this._hitPoint = null\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // normalize screen coordinates\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  normalize(screenPoint) {\r\n\r\n    var viewport = this.viewer.navigation.getScreenViewport()\r\n\r\n    var n = {\r\n      x: (screenPoint.x - viewport.left) / viewport.width,\r\n      y: (screenPoint.y - viewport.top) / viewport.height\r\n    }\r\n\r\n    return n\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // get 3d hit point on mesh\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  getHitPoint(event) {\r\n\r\n    var screenPoint = {\r\n      x: event.clientX,\r\n      y: event.clientY\r\n    }\r\n\r\n    var n = this.normalize(screenPoint)\r\n\r\n    var hitPoint = this.viewer.utilities.getHitPoint(n.x, n.y)\r\n\r\n    return hitPoint\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  activate() {\r\n\r\n    if (!this.active) {\r\n\r\n      console.log(this.getName() + ' activated')\r\n\r\n      this.active = true\r\n\r\n      this.viewer.select([])\r\n\r\n      var bbox = this.viewer.model.getBoundingBox()\r\n\r\n      this.viewer.impl.createOverlayScene(\r\n        'TransformToolOverlay')\r\n\r\n      this._transformControlTx = new THREE.TransformControls(\r\n        this.viewer.impl.camera,\r\n        this.viewer.impl.canvas,\r\n        \"translate\")\r\n\r\n      this._transformControlTx.setSize(\r\n        bbox.getBoundingSphere().radius * 5)\r\n\r\n      this._transformControlTx.visible = false\r\n\r\n      this.viewer.impl.addOverlay(\r\n        'TransformToolOverlay',\r\n        this._transformControlTx)\r\n\r\n      this._transformMesh = this.createTransformMesh()\r\n\r\n      this._transformControlTx.attach(\r\n        this._transformMesh)\r\n\r\n      this.viewer.addEventListener(\r\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n        this.onAggregateSelectionChanged)\r\n\r\n      this.viewer.toolController.activateTool(\r\n        this.getName())\r\n\r\n      this.emit('activate')\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  // deactivate tool\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  deactivate() {\r\n\r\n    if (this.active) {\r\n\r\n      this.active = false\r\n\r\n      this.viewer.toolController.deactivateTool(\r\n        this.getName())\r\n\r\n      this.viewer.impl.removeOverlay(\r\n        'TransformToolOverlay',\r\n        this._transformControlTx)\r\n\r\n      this._transformControlTx.removeEventListener(\r\n        'change',\r\n        this.onTxChange)\r\n\r\n      this._transformControlTx = null\r\n\r\n      this.viewer.impl.removeOverlayScene(\r\n        'TransformToolOverlay')\r\n\r\n      this.viewer.removeEventListener(\r\n        Autodesk.Viewing.CAMERA_CHANGE_EVENT,\r\n        this.onCameraChanged)\r\n\r\n      this.viewer.removeEventListener(\r\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n        this.onAggregateSelectionChanged)\r\n\r\n      this.emit('deactivate')\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  handleButtonDown(event, button) {\r\n\r\n    this._hitPoint = this.getHitPoint(event)\r\n\r\n    this._isDragging = true\r\n\r\n    if (this._transformControlTx.onPointerDown(event))\r\n      return true\r\n\r\n    //return _transRotControl.onPointerDown(event)\r\n    return false\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  handleButtonUp(event, button) {\r\n\r\n    this._isDragging = false\r\n\r\n    if (this._transformControlTx.onPointerUp(event))\r\n      return true\r\n\r\n    //return _transRotControl.onPointerUp(event)\r\n    return false\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////////////\r\n  handleMouseMove(event) {\r\n\r\n    if (this._isDragging) {\r\n\r\n      if (this._transformControlTx.onPointerMove(event) ) {\r\n\r\n        return true\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    if (this._transformControlTx.onPointerHover(event))\r\n      return true\r\n\r\n    //return _transRotControl.onPointerHover(event)\r\n    return false\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Tool.Particle.Translate.js","/*!\r\n * FPSMeter 0.3.1 - 9th May 2013\r\n * https://github.com/Darsain/fpsmeter\r\n *\r\n * Licensed under the MIT license.\r\n * http://opensource.org/licenses/MIT\r\n */\r\n;(function (w, undefined) {\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * Create a new element.\r\n\t *\r\n\t * @param  {String} name Element type name.\r\n\t *\r\n\t * @return {Element}\r\n\t */\r\n\tfunction newEl(name) {\r\n\t\treturn document.createElement(name);\r\n\t}\r\n\r\n\t/**\r\n\t * Apply theme CSS properties to element.\r\n\t *\r\n\t * @param  {Element} element DOM element.\r\n\t * @param  {Object}  theme   Theme object.\r\n\t *\r\n\t * @return {Element}\r\n\t */\r\n\tfunction applyTheme(element, theme) {\r\n\t\tfor (var name in theme) {\r\n\t\t\ttry {\r\n\t\t\t\telement.style[name] = theme[name];\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Return type of the value.\r\n\t *\r\n\t * @param  {Mixed} value\r\n\t *\r\n\t * @return {String}\r\n\t */\r\n\tfunction type(value) {\r\n\t\tif (value == null) {\r\n\t\t\treturn String(value);\r\n\t\t}\r\n\r\n\t\tif (typeof value === 'object' || typeof value === 'function') {\r\n\t\t\treturn Object.prototype.toString.call(value).match(/\\s([a-z]+)/i)[1].toLowerCase() || 'object';\r\n\t\t}\r\n\r\n\t\treturn typeof value;\r\n\t}\r\n\r\n\t/**\r\n\t * Check whether the value is in an array.\r\n\t *\r\n\t * @param  {Mixed} value\r\n\t * @param  {Array} array\r\n\t *\r\n\t * @return {Integer} Array index or -1 when not found.\r\n\t */\r\n\tfunction inArray(value, array) {\r\n\t\tif (type(array) !== 'array') {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (array.indexOf) {\r\n\t\t\treturn array.indexOf(value);\r\n\t\t}\r\n\t\tfor (var i = 0, l = array.length; i < l; i++) {\r\n\t\t\tif (array[i] === value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Poor man's deep object extend.\r\n\t *\r\n\t * Example:\r\n\t *   extend({}, defaults, options);\r\n\t *\r\n\t * @return {Void}\r\n\t */\r\n\tfunction extend() {\r\n\t\tvar args = arguments;\r\n\t\tfor (var key in args[1]) {\r\n\t\t\tif (args[1].hasOwnProperty(key)) {\r\n\t\t\t\tswitch (type(args[1][key])) {\r\n\t\t\t\t\tcase 'object':\r\n\t\t\t\t\t\targs[0][key] = extend({}, args[0][key], args[1][key]);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'array':\r\n\t\t\t\t\t\targs[0][key] = args[1][key].slice(0);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\targs[0][key] = args[1][key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn args.length > 2 ?\r\n\t\t\textend.apply(null, [args[0]].concat(Array.prototype.slice.call(args, 2))) :\r\n\t\t\targs[0];\r\n\t}\r\n\r\n\t/**\r\n\t * Convert HSL color to HEX string.\r\n\t *\r\n\t * @param  {Array} hsl Array with [hue, saturation, lightness].\r\n\t *\r\n\t * @return {Array} Array with [red, green, blue].\r\n\t */\r\n\tfunction hslToHex(h, s, l) {\r\n\t\tvar r, g, b;\r\n\t\tvar v, min, sv, sextant, fract, vsf;\r\n\r\n\t\tif (l <= 0.5) {\r\n\t\t\tv = l * (1 + s);\r\n\t\t} else {\r\n\t\t\tv = l + s - l * s;\r\n\t\t}\r\n\r\n\t\tif (v === 0) {\r\n\t\t\treturn '#000';\r\n\t\t} else {\r\n\t\t\tmin = 2 * l - v;\r\n\t\t\tsv = (v - min) / v;\r\n\t\t\th = 6 * h;\r\n\t\t\tsextant = Math.floor(h);\r\n\t\t\tfract = h - sextant;\r\n\t\t\tvsf = v * sv * fract;\r\n\t\t\tif (sextant === 0 || sextant === 6) {\r\n\t\t\t\tr = v;\r\n\t\t\t\tg = min + vsf;\r\n\t\t\t\tb = min;\r\n\t\t\t} else if (sextant === 1) {\r\n\t\t\t\tr = v - vsf;\r\n\t\t\t\tg = v;\r\n\t\t\t\tb = min;\r\n\t\t\t} else if (sextant === 2) {\r\n\t\t\t\tr = min;\r\n\t\t\t\tg = v;\r\n\t\t\t\tb = min + vsf;\r\n\t\t\t} else if (sextant === 3) {\r\n\t\t\t\tr = min;\r\n\t\t\t\tg = v - vsf;\r\n\t\t\t\tb = v;\r\n\t\t\t} else if (sextant === 4) {\r\n\t\t\t\tr = min + vsf;\r\n\t\t\t\tg = min;\r\n\t\t\t\tb = v;\r\n\t\t\t} else {\r\n\t\t\t\tr = v;\r\n\t\t\t\tg = min;\r\n\t\t\t\tb = v - vsf;\r\n\t\t\t}\r\n\t\t\treturn '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Helper function for hslToHex.\r\n\t */\r\n\tfunction componentToHex(c) {\r\n\t\tc = Math.round(c * 255).toString(16);\r\n\t\treturn c.length === 1 ? '0' + c : c;\r\n\t}\r\n\r\n\t/**\r\n\t * Manage element event listeners.\r\n\t *\r\n\t * @param  {Node}     element\r\n\t * @param  {Event}    eventName\r\n\t * @param  {Function} handler\r\n\t * @param  {Bool}     remove\r\n\t *\r\n\t * @return {Void}\r\n\t */\r\n\tfunction listener(element, eventName, handler, remove) {\r\n\t\tif (element.addEventListener) {\r\n\t\t\telement[remove ? 'removeEventListener' : 'addEventListener'](eventName, handler, false);\r\n\t\t} else if (element.attachEvent) {\r\n\t\t\telement[remove ? 'detachEvent' : 'attachEvent']('on' + eventName, handler);\r\n\t\t}\r\n\t}\r\n\r\n\t// Preferred timing funtion\r\n\tvar getTime;\r\n\t(function () {\r\n\t\tvar perf = w.performance;\r\n\t\tif (perf && (perf.now || perf.webkitNow)) {\r\n\t\t\tvar perfNow = perf.now ? 'now' : 'webkitNow';\r\n\t\t\tgetTime = perf[perfNow].bind(perf);\r\n\t\t} else {\r\n\t\t\tgetTime = function () {\r\n\t\t\t\treturn +new Date();\r\n\t\t\t};\r\n\t\t}\r\n\t}());\r\n\r\n\t// Local WindowAnimationTiming interface polyfill\r\n\tvar cAF = w.cancelAnimationFrame || w.cancelRequestAnimationFrame;\r\n\tvar rAF = w.requestAnimationFrame;\r\n\t(function () {\r\n\t\tvar vendors = ['moz', 'webkit', 'o'];\r\n\t\tvar lastTime = 0;\r\n\r\n\t\t// For a more accurate WindowAnimationTiming interface implementation, ditch the native\r\n\t\t// requestAnimationFrame when cancelAnimationFrame is not present (older versions of Firefox)\r\n\t\tfor (var i = 0, l = vendors.length; i < l && !cAF; ++i) {\r\n\t\t\tcAF = w[vendors[i]+'CancelAnimationFrame'] || w[vendors[i]+'CancelRequestAnimationFrame'];\r\n\t\t\trAF = cAF && w[vendors[i]+'RequestAnimationFrame'];\r\n\t\t}\r\n\r\n\t\tif (!cAF) {\r\n\t\t\trAF = function (callback) {\r\n\t\t\t\tvar currTime = getTime();\r\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\treturn w.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n\t\t\t};\r\n\r\n\t\t\tcAF = function (id) {\r\n\t\t\t\tclearTimeout(id);\r\n\t\t\t};\r\n\t\t}\r\n\t}());\r\n\r\n\t// Property name for assigning element text content\r\n\tvar textProp = type(document.createElement('div').textContent) === 'string' ? 'textContent' : 'innerText';\r\n\r\n\t/**\r\n\t * FPSMeter class.\r\n\t *\r\n\t * @param {Element} anchor  Element to append the meter to. Default is document.body.\r\n\t * @param {Object}  options Object with options.\r\n\t */\r\n\tfunction FPSMeter(anchor, options) {\r\n\t\t// Optional arguments\r\n\t\tif (type(anchor) === 'object' && anchor.nodeType === undefined) {\r\n\t\t\toptions = anchor;\r\n\t\t\tanchor = document.body;\r\n\t\t}\r\n\t\tif (!anchor) {\r\n\t\t\tanchor = document.body;\r\n\t\t}\r\n\r\n\t\t// Private properties\r\n\t\tvar self = this;\r\n\t\tvar o = extend({}, FPSMeter.defaults, options || {});\r\n\r\n\t\tvar el = {};\r\n\t\tvar cols = [];\r\n\t\tvar theme, heatmaps;\r\n\t\tvar heatDepth = 100;\r\n\t\tvar heating = [];\r\n\r\n\t\tvar thisFrameTime = 0;\r\n\t\tvar frameTime = o.threshold;\r\n\t\tvar frameStart = 0;\r\n\t\tvar lastLoop = getTime() - frameTime;\r\n\t\tvar time;\r\n\r\n\t\tvar fpsHistory = [];\r\n\t\tvar durationHistory = [];\r\n\r\n\t\tvar frameID, renderID;\r\n\t\tvar showFps = o.show === 'fps';\r\n\t\tvar graphHeight, count, i, j;\r\n\r\n\t\t// Exposed properties\r\n\t\tself.options = o;\r\n\t\tself.fps = 0;\r\n\t\tself.duration = 0;\r\n\t\tself.isPaused = 0;\r\n\r\n\t\t/**\r\n\t\t * Tick start for measuring the actual rendering duration.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tself.tickStart = function () {\r\n\t\t\tframeStart = getTime();\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * FPS tick.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tself.tick = function () {\r\n\t\t\ttime = getTime();\r\n\t\t\tthisFrameTime = time - lastLoop;\r\n\t\t\tframeTime += (thisFrameTime - frameTime) / o.smoothing;\r\n\t\t\tself.fps = 1000 / frameTime;\r\n\t\t\tself.duration = frameStart < lastLoop ? frameTime : time - frameStart;\r\n\t\t\tlastLoop = time;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Pause display rendering.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.pause = function () {\r\n\t\t\tif (frameID) {\r\n\t\t\t\tself.isPaused = 1;\r\n\t\t\t\tclearTimeout(frameID);\r\n\t\t\t\tcAF(frameID);\r\n\t\t\t\tcAF(renderID);\r\n\t\t\t\tframeID = renderID = 0;\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Resume display rendering.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.resume = function () {\r\n\t\t\tif (!frameID) {\r\n\t\t\t\tself.isPaused = 0;\r\n\t\t\t\trequestRender();\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Update options.\r\n\t\t *\r\n\t\t * @param {String} name  Option name.\r\n\t\t * @param {Mixed}  value New value.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.set = function (name, value) {\r\n\t\t\to[name] = value;\r\n\t\t\tshowFps = o.show === 'fps';\r\n\r\n\t\t\t// Rebuild or reposition elements when specific option has been updated\r\n\t\t\tif (inArray(name, rebuilders) !== -1) {\r\n\t\t\t\tcreateMeter();\r\n\t\t\t}\r\n\t\t\tif (inArray(name, repositioners) !== -1) {\r\n\t\t\t\tpositionMeter();\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Change meter into rendering duration mode.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.showDuration = function () {\r\n\t\t\tself.set('show', 'ms');\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Change meter into FPS mode.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.showFps = function () {\r\n\t\t\tself.set('show', 'fps');\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Toggles between show: 'fps' and show: 'duration'.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.toggle = function () {\r\n\t\t\tself.set('show', showFps ? 'ms' : 'fps');\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Hide the FPSMeter. Also pauses the rendering.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.hide = function () {\r\n\t\t\tself.pause();\r\n\t\t\tel.container.style.display = 'none';\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Show the FPSMeter. Also resumes the rendering.\r\n\t\t *\r\n\t\t * @return {Object} FPSMeter instance.\r\n\t\t */\r\n\t\tself.show = function () {\r\n\t\t\tself.resume();\r\n\t\t\tel.container.style.display = 'block';\r\n\t\t\treturn self;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Check the current FPS and save it in history.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction historyTick() {\r\n\t\t\tfor (i = o.history; i--;) {\r\n\t\t\t\tfpsHistory[i] = i === 0 ? self.fps : fpsHistory[i-1];\r\n\t\t\t\tdurationHistory[i] = i === 0 ? self.duration : durationHistory[i-1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns heat hex color based on values passed.\r\n\t\t *\r\n\t\t * @param  {Integer} heatmap\r\n\t\t * @param  {Integer} value\r\n\t\t * @param  {Integer} min\r\n\t\t * @param  {Integer} max\r\n\t\t *\r\n\t\t * @return {Integer}\r\n\t\t */\r\n\t\tfunction getHeat(heatmap, value, min, max) {\r\n\t\t\treturn heatmaps[0|heatmap][Math.round(Math.min((value - min) / (max - min) * heatDepth, heatDepth))];\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Update counter number and legend.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction updateCounter() {\r\n\t\t\t// Update legend only when changed\r\n\t\t\tif (el.legend.fps !== showFps) {\r\n\t\t\t\tel.legend.fps = showFps;\r\n\t\t\t\tel.legend[textProp] = showFps ? o.legend[0] : o.legend[1]; //ADN modif\r\n\t\t\t}\r\n\t\t\t// Update counter with a nicely formated & readable number\r\n\t\t\tcount = showFps ? self.fps : self.duration;\r\n\t\t\tel.count[textProp] = count.toFixed(count > 99 ? 0 : o.decimals);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Render current FPS state.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction render() {\r\n\t\t\ttime = getTime();\r\n\t\t\t// If renderer stopped reporting, do a simulated drop to 0 fps\r\n\t\t\tif (lastLoop < time - o.threshold) {\r\n\t\t\t\tself.fps -= self.fps / Math.max(1, o.smoothing * 60 / o.interval);\r\n\t\t\t\tself.duration = 1000 / self.fps;\r\n\t\t\t}\r\n\r\n\t\t\thistoryTick();\r\n\t\t\tupdateCounter();\r\n\r\n\t\t\t// Apply heat to elements\r\n\t\t\tif (o.heat) {\r\n\t\t\t\tif (heating.length) {\r\n\t\t\t\t\tfor (i = heating.length; i--;) {\r\n\t\t\t\t\t\theating[i].el.style[theme[heating[i].name].heatOn] = showFps ?\r\n\t\t\t\t\t\t\tgetHeat(theme[heating[i].name].heatmap, self.fps, 0, o.maxFps) :\r\n\t\t\t\t\t\t\tgetHeat(theme[heating[i].name].heatmap, self.duration, o.threshold, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (el.graph && theme.column.heatOn) {\r\n\t\t\t\t\tfor (i = cols.length; i--;) {\r\n\t\t\t\t\t\tcols[i].style[theme.column.heatOn] = showFps ?\r\n\t\t\t\t\t\t\tgetHeat(theme.column.heatmap, fpsHistory[i], 0, o.maxFps) :\r\n\t\t\t\t\t\t\tgetHeat(theme.column.heatmap, durationHistory[i], o.threshold, 0);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Update graph columns height\r\n\t\t\tif (el.graph) {\r\n\t\t\t\tfor (j = 0; j < o.history; j++) {\r\n\t\t\t\t\tcols[j].style.height = (showFps ?\r\n\t\t\t\t\t\t(fpsHistory[j] ? Math.round(graphHeight / o.maxFps * Math.min(fpsHistory[j], o.maxFps)) : 0) :\r\n\t\t\t\t\t\t(durationHistory[j] ? Math.round(graphHeight / o.threshold * Math.min(durationHistory[j], o.threshold)) : 0)\r\n\t\t\t\t\t) + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Request rendering loop.\r\n\t\t *\r\n\t\t * @return {Int} Animation frame index.\r\n\t\t */\r\n\t\tfunction requestRender() {\r\n\t\t\tif (o.interval < 20) {\r\n\t\t\t\tframeID = rAF(requestRender);\r\n\t\t\t\trender();\r\n\t\t\t} else {\r\n\t\t\t\tframeID = setTimeout(requestRender, o.interval);\r\n\t\t\t\trenderID = rAF(render);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Meter events handler.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction eventHandler(event) {\r\n\t\t\tevent = event || window.event;\r\n\t\t\tif (event.preventDefault) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t} else {\r\n\t\t\t\tevent.returnValue = false;\r\n\t\t\t\tevent.cancelBubble = true;\r\n\t\t\t}\r\n\t\t\tself.toggle();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Destroys the current FPSMeter instance.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tself.destroy = function () {\r\n\t\t\t// Stop rendering\r\n\t\t\tself.pause();\r\n\t\t\t// Remove elements\r\n\t\t\tremoveMeter();\r\n\t\t\t// Stop listening\r\n\t\t\tself.tick = self.tickStart = function () {};\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Remove meter element.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction removeMeter() {\r\n\t\t\t// Unbind listeners\r\n\t\t\tif (o.toggleOn) {\r\n\t\t\t\tlistener(el.container, o.toggleOn, eventHandler, 1);\r\n\t\t\t}\r\n\t\t\t// Detach element\r\n\t\t\tanchor.removeChild(el.container);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets the theme, and generates heatmaps when needed.\r\n\t\t */\r\n\t\tfunction setTheme() {\r\n\t\t\ttheme = FPSMeter.theme[o.theme];\r\n\r\n\t\t\t// Generate heatmaps\r\n\t\t\theatmaps = theme.compiledHeatmaps || [];\r\n\t\t\tif (!heatmaps.length && theme.heatmaps.length) {\r\n\t\t\t\tfor (j = 0; j < theme.heatmaps.length; j++) {\r\n\t\t\t\t\theatmaps[j] = [];\r\n\t\t\t\t\tfor (i = 0; i <= heatDepth; i++) {\r\n\t\t\t\t\t\theatmaps[j][i] = hslToHex(0.33 / heatDepth * i, theme.heatmaps[j].saturation, theme.heatmaps[j].lightness);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttheme.compiledHeatmaps = heatmaps;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Creates and attaches the meter element.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction createMeter() {\r\n\t\t\t// Remove old meter if present\r\n\t\t\tif (el.container) {\r\n\t\t\t\tremoveMeter();\r\n\t\t\t}\r\n\r\n\t\t\t// Set theme\r\n\t\t\tsetTheme();\r\n\r\n\t\t\t// Create elements\r\n\t\t\tel.container = applyTheme(newEl('div'), theme.container);\r\n\t\t\tel.count = el.container.appendChild(applyTheme(newEl('div'), theme.count));\r\n\t\t\tel.legend = el.container.appendChild(applyTheme(newEl('div'), theme.legend));\r\n\t\t\tel.graph = o.graph ? el.container.appendChild(applyTheme(newEl('div'), theme.graph)) : 0;\r\n\r\n\t\t\t// Add elements to heating array\r\n\t\t\theating.length = 0;\r\n\t\t\tfor (var key in el) {\r\n\t\t\t\tif (el[key] && theme[key].heatOn) {\r\n\t\t\t\t\theating.push({\r\n\t\t\t\t\t\tname: key,\r\n\t\t\t\t\t\tel: el[key]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Graph\r\n\t\t\tcols.length = 0;\r\n\t\t\tif (el.graph) {\r\n\t\t\t\t// Create graph\r\n\t\t\t\tel.graph.style.width = (o.history * theme.column.width + (o.history - 1) * theme.column.spacing) + 'px';\r\n\r\n\t\t\t\t// Add columns\r\n\t\t\t\tfor (i = 0; i < o.history; i++) {\r\n\t\t\t\t\tcols[i] = el.graph.appendChild(applyTheme(newEl('div'), theme.column));\r\n\t\t\t\t\tcols[i].style.position = 'absolute';\r\n\t\t\t\t\tcols[i].style.bottom = 0;\r\n\t\t\t\t\tcols[i].style.right = (i * theme.column.width + i * theme.column.spacing) + 'px';\r\n\t\t\t\t\tcols[i].style.width = theme.column.width + 'px';\r\n\t\t\t\t\tcols[i].style.height = '0px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set the initial state\r\n\t\t\tpositionMeter();\r\n\t\t\tupdateCounter();\r\n\r\n\t\t\t// Append container to anchor\r\n\t\t\tanchor.appendChild(el.container);\r\n\r\n\t\t\t// Retrieve graph height after it was appended to DOM\r\n\t\t\tif (el.graph) {\r\n\t\t\t\tgraphHeight = el.graph.clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\t// Add event listeners\r\n\t\t\tif (o.toggleOn) {\r\n\t\t\t\tif (o.toggleOn === 'click') {\r\n\t\t\t\t\tel.container.style.cursor = 'pointer';\r\n\t\t\t\t}\r\n\t\t\t\tlistener(el.container, o.toggleOn, eventHandler);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Positions the meter based on options.\r\n\t\t *\r\n\t\t * @return {Void}\r\n\t\t */\r\n\t\tfunction positionMeter() {\r\n\t\t\tapplyTheme(el.container, o);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Construct.\r\n\t\t */\r\n\t\t(function () {\r\n\t\t\t// Create meter element\r\n\t\t\tcreateMeter();\r\n\t\t\t// Start rendering\r\n\t\t\trequestRender();\r\n\t\t}());\r\n\t}\r\n\r\n\t// Expose the extend function\r\n\tFPSMeter.extend = extend;\r\n\r\n\t// Expose the FPSMeter class\r\n\twindow.FPSMeter = FPSMeter;\r\n\r\n\t// Default options\r\n\tFPSMeter.defaults = {\r\n\t\tinterval:  100,     // Update interval in milliseconds.\r\n\t\tsmoothing: 10,      // Spike smoothing strength. 1 means no smoothing.\r\n\t\tshow:      'fps',   // Whether to show 'fps', or 'ms' = frame duration in milliseconds.\r\n\t\ttoggleOn:  'click', // Toggle between show 'fps' and 'ms' on this event.\r\n\t\tdecimals:  1,       // Number of decimals in FPS number. 1 = 59.9, 2 = 59.94, ...\r\n\t\tmaxFps:    60,      // Max expected FPS value.\r\n\t\tthreshold: 100,     // Minimal tick reporting interval in milliseconds.\r\n\r\n\t\t// Meter position\r\n\t\tposition: 'absolute', // Meter position.\r\n\t\tzIndex:   10,         // Meter Z index.\r\n\t\tleft:     '5px',      // Meter left offset.\r\n\t\ttop:      '5px',      // Meter top offset.\r\n\t\tright:    'auto',     // Meter right offset.\r\n\t\tbottom:   'auto',     // Meter bottom offset.\r\n\t\tmargin:   '0 0 0 0',  // Meter margin. Helps with centering the counter when left: 50%;\r\n\r\n\t\t// Theme\r\n\t\ttheme: 'dark', // Meter theme. Build in: 'dark', 'light', 'transparent', 'colorful'.\r\n\t\theat:  0,      // Allow themes to use coloring by FPS heat. 0 FPS = red, maxFps = green.\r\n\r\n\t\t// Graph\r\n\t\tgraph:   0, // Whether to show history graph.\r\n\t\thistory: 20, // How many history states to show in a graph.\r\n\t\tlegend: ['FPS', 'ms']\r\n\t};\r\n\r\n\t// Option names that trigger FPSMeter rebuild or reposition when modified\r\n\tvar rebuilders = [\r\n\t\t'toggleOn',\r\n\t\t'theme',\r\n\t\t'heat',\r\n\t\t'graph',\r\n\t\t'history'\r\n\t];\r\n\tvar repositioners = [\r\n\t\t'position',\r\n\t\t'zIndex',\r\n\t\t'left',\r\n\t\t'top',\r\n\t\t'right',\r\n\t\t'bottom',\r\n\t\t'margin'\r\n\t];\r\n}(window));\r\n;(function (w, FPSMeter, undefined) {\r\n\t'use strict';\r\n\r\n\t// Themes object\r\n\tFPSMeter.theme = {};\r\n\r\n\t// Base theme with layout, no colors\r\n\tvar base = FPSMeter.theme.base = {\r\n\t\theatmaps: [],\r\n\t\tcontainer: {\r\n\t\t\t// Settings\r\n\t\t\theatOn: null,\r\n\t\t\theatmap: null,\r\n\r\n\t\t\t// Styles\r\n\t\t\tpadding: '5px',\r\n\t\t\tminWidth: '95px',\r\n\t\t\theight: '30px',\r\n\t\t\tlineHeight: '30px',\r\n\t\t\ttextAlign: 'right',\r\n\t\t\ttextShadow: 'none'\r\n\t\t},\r\n\t\tcount: {\r\n\t\t\t// Settings\r\n\t\t\theatOn: null,\r\n\t\t\theatmap: null,\r\n\r\n\t\t\t// Styles\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tpadding: '5px 10px',\r\n\t\t\theight: '30px',\r\n\t\t\tfontSize: '24px',\r\n\t\t\tfontFamily: 'Consolas, Andale Mono, monospace',\r\n\t\t\tzIndex: 2\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\t// Settings\r\n\t\t\theatOn: null,\r\n\t\t\theatmap: null,\r\n\r\n\t\t\t// Styles\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tpadding: '5px 10px',\r\n\t\t\theight: '30px',\r\n\t\t\tfontSize: '12px',\r\n\t\t\tlineHeight: '32px',\r\n\t\t\tfontFamily: 'sans-serif',\r\n\t\t\ttextAlign: 'left',\r\n\t\t\tzIndex: 2\r\n\t\t},\r\n\t\tgraph: {\r\n\t\t\t// Settings\r\n\t\t\theatOn: null,\r\n\t\t\theatmap: null,\r\n\r\n\t\t\t// Styles\r\n\t\t\tposition: 'relative',\r\n\t\t\tboxSizing: 'padding-box',\r\n\t\t\tMozBoxSizing: 'padding-box',\r\n\t\t\theight: '100%',\r\n\t\t\tzIndex: 1\r\n\t\t},\r\n\t\tcolumn: {\r\n\t\t\t// Settings\r\n\t\t\twidth: 4,\r\n\t\t\tspacing: 1,\r\n\t\t\theatOn: null,\r\n\t\t\theatmap: null\r\n\t\t}\r\n\t};\r\n\r\n\t// Dark theme\r\n\tFPSMeter.theme.dark = FPSMeter.extend({}, base, {\r\n\t\theatmaps: [{\r\n\t\t\tsaturation: 0.8,\r\n\t\t\tlightness: 0.8\r\n\t\t}],\r\n\t\tcontainer: {\r\n\t\t\tbackground: 'rgba(60, 60, 60, 0.5)',\r\n\t\t\tcolor: '#fff',\r\n\t\t\tborder: '1px solid #1a1a1a',\r\n\t\t\ttextShadow: '1px 1px 0 #222'\r\n\t\t},\r\n\t\tcount: {\r\n\t\t\theatOn: 'color'\r\n\t\t},\r\n\t\tcolumn: {\r\n\t\t\tbackground: '#3f3f3f'\r\n\t\t}\r\n\t});\r\n\r\n\t// Light theme\r\n\tFPSMeter.theme.light = FPSMeter.extend({}, base, {\r\n\t\theatmaps: [{\r\n\t\t\tsaturation: 0.5,\r\n\t\t\tlightness: 0.5\r\n\t\t}],\r\n\t\tcontainer: {\r\n\t\t\tcolor: '#666',\r\n\t\t\tbackground: '#fff',\r\n\t\t\ttextShadow: '1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)',\r\n\t\t\tboxShadow: '0 0 0 1px rgba(0,0,0,.1)'\r\n\t\t},\r\n\t\tcount: {\r\n\t\t\theatOn: 'color'\r\n\t\t},\r\n\t\tcolumn: {\r\n\t\t\tbackground: '#eaeaea'\r\n\t\t}\r\n\t});\r\n\r\n\t// Colorful theme\r\n\tFPSMeter.theme.colorful = FPSMeter.extend({}, base, {\r\n\t\theatmaps: [{\r\n\t\t\tsaturation: 0.5,\r\n\t\t\tlightness: 0.6\r\n\t\t}],\r\n\t\tcontainer: {\r\n\t\t\theatOn: 'backgroundColor',\r\n\t\t\tbackground: '#888',\r\n\t\t\tcolor: '#fff',\r\n\t\t\ttextShadow: '1px 1px 0 rgba(0,0,0,.2)',\r\n\t\t\tboxShadow: '0 0 0 1px rgba(0,0,0,.1)'\r\n\t\t},\r\n\t\tcolumn: {\r\n\t\t\tbackground: '#777',\r\n\t\t\tbackgroundColor: 'rgba(0,0,0,.2)'\r\n\t\t}\r\n\t});\r\n\r\n\t// Transparent theme\r\n\tFPSMeter.theme.transparent = FPSMeter.extend({}, base, {\r\n\t\theatmaps: [{\r\n\t\t\tsaturation: 0.8,\r\n\t\t\tlightness: 0.5\r\n\t\t}],\r\n\t\tcontainer: {\r\n\t\t\tbackground: 'rgba(60, 60, 60, 0.5)',\r\n\t\t\tcolor: '#fff',\r\n\t\t\tborder: '1px solid #1a1a1a',\r\n\t\t\ttextShadow: '1px 1px 0 #222'\r\n\t\t},\r\n\t\tcount: {\r\n\t\t\tpadding: '0 5px',\r\n\t\t\theight: '40px',\r\n\t\t\tlineHeight: '40px'\r\n\t\t},\r\n\t\t//legend: {\r\n\t\t//\tpadding: '0 5px',\r\n\t\t//\theight: '40px',\r\n\t\t//\tlineHeight: '42px'\r\n\t\t//},\r\n\t\t//graph: {\r\n\t\t//\theight: '40px'\r\n\t\t//},\r\n\t\tcolumn: {\r\n\t\t\twidth: 5,\r\n\t\t\tbackground: '#999',\r\n\t\t\theatOn: 'backgroundColor',\r\n\t\t\topacity: 0.5\r\n\t\t}\r\n\t});\r\n}(window, FPSMeter));\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/FPSMeter.js","\r\nexport default class GUIObjectAdapter {\r\n\r\n  constructor (obj, mapping) {\r\n\r\n    this.mapping = mapping\r\n\r\n    this.object = obj\r\n\r\n    for (let key in this.mapping) {\r\n\r\n      let getter = this.mapping[key].getter\r\n\r\n      this[key] = this.object[getter]()\r\n    }\r\n  }\r\n\r\n  update() {\r\n\r\n    for (let key in this.mapping) {\r\n\r\n      if(this.mapping[key].setter) {\r\n\r\n        let setter = this.mapping[key].setter\r\n  \r\n        this.object[setter](this[key])\r\n      }\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/GUIObjectAdapter.js","/////////////////////////////////////////////////////////////////\r\n//\r\n//\r\n/////////////////////////////////////////////////////////////////\r\nimport './ToolPanelBase.css'\r\n\r\nfunction getDefaultOptions () {\r\n\r\n  return {\r\n    shadow: true,\r\n    movable: true,\r\n    closable: true\r\n  }\r\n}\r\n\r\nexport default class ToolPanelBase extends\r\n  Autodesk.Viewing.UI.DockingPanel {\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime()\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n      })\r\n\r\n    return guid\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  constructor(container, title, options = {}) {\r\n\r\n    super(container,\r\n      ToolPanelBase.guid(),\r\n      title,\r\n      Object.assign(getDefaultOptions(), options))\r\n\r\n    this._dialogResult = 'CANCEL'\r\n\r\n    this._events = {}\r\n\r\n    this._isVisible = false\r\n    this._isMinimized = false\r\n\r\n    this._btnElement = options.buttonElement\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  htmlContent(id) {\r\n\r\n    return '<div></div>'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  unload() {\r\n\r\n    this.setVisible(false)\r\n\r\n    $(this.container).remove()\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  isVisible() {\r\n\r\n    return this._isVisible\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // setVisible override\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  setVisible(show = false) {\r\n\r\n    if(show !== this._isVisible){\r\n\r\n      if(typeof this._events !== 'undefined') {\r\n\r\n        this.emit((show ? 'open' : 'close'), {\r\n          result: this._dialogResult\r\n        })\r\n      }\r\n    }\r\n\r\n    this._isVisible = show\r\n\r\n    if(this._btnElement) {\r\n\r\n      if(show)\r\n        this._btnElement.classList.add('active')\r\n      else\r\n        this._btnElement.classList.remove('active')\r\n    }\r\n\r\n    super.setVisible(show)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // Toggles panel visibility\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  toggleVisibility () {\r\n\r\n    this.setVisible(!this._isVisible)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // initialize override\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  initialize() {\r\n\r\n    this.title = this.createTitleBar(\r\n      this.titleLabel || this.container.id)\r\n\r\n    $(this.container).append(this.title)\r\n\r\n    this.setTitle(\r\n      this.titleLabel || this.container.id,\r\n      this.options)\r\n\r\n    if(this.options.movable) {\r\n      this.initializeMoveHandlers(this.title)\r\n    }\r\n\r\n    if(this.options.closable){\r\n      this.closer = this.createCloseButton()\r\n      $(this.title).append(this.closer)\r\n    }\r\n\r\n    var $content = $(this.htmlContent(\r\n      this.container.id))\r\n\r\n    this.content = $content[0]\r\n\r\n    $(this.container).append($content)\r\n\r\n    this.container.classList.add('toolPanelBase')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // createTitleBar override\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  createTitleBar (title) {\r\n    \r\n    var titleBar = document.createElement(\"div\")\r\n\r\n    titleBar.className = \"dockingPanelTitle\"\r\n\r\n    this.titleTextId = ToolPanelBase.guid()\r\n\r\n    this.titleImgId = ToolPanelBase.guid()\r\n\r\n    var html = `\r\n      <img id=\"${this.titleImgId}\"></img>\r\n      <div id=\"${this.titleTextId}\" class=\"dockingPanelTitleText\">\r\n        ${title}\r\n      </div>\r\n    `\r\n\r\n    $(titleBar).append(html)\r\n\r\n    this.addEventListener(titleBar, 'click', (event)=> {\r\n      \r\n      if (!this.movedSinceLastClick) {\r\n        \r\n        this.onTitleClick(event)\r\n      }\r\n      \r\n      this.movedSinceLastClick = false\r\n    })\r\n\r\n    this.addEventListener(titleBar, 'dblclick', (event) => {\r\n      \r\n      this.onTitleDoubleClick(event)\r\n    })\r\n\r\n    return titleBar\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // setTitle override\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  setTitle (text, options) {\r\n  \r\n    if (options && options.localizeTitle) {\r\n\r\n      $(`#${this.titleTextId}`).attr('data-i18n', text)\r\n\r\n      text = Autodesk.Viewing.i18n.translate(text)\r\n      \r\n    } else {\r\n\r\n      $(`#${this.titleTextId}`).removeAttr('data-i18n')\r\n    }\r\n\r\n    $(`#${this.titleTextId}`).text(text)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // onTitleDoubleClick override\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  onTitleDoubleClick(event) {\r\n\r\n    this._isMinimized = !this._isMinimized\r\n\r\n    if(this._isMinimized) {\r\n\r\n      this._height = $(this.container).css('height')\r\n\r\n      $(this.container).css({\r\n        'height':'32px',\r\n        'min-height':'32px'\r\n      })\r\n    }\r\n    else {\r\n\r\n      $(this.container).css({\r\n        'height':this._height,\r\n        'min-height':'100px'\r\n      })\r\n    }\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  on(event, fct) {\r\n\r\n    this._events[event] = this._events[event]\t|| []\r\n    this._events[event].push(fct)\r\n    return fct\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  off(event, fct) {\r\n\r\n    if(event in this._events === false)\r\n      return\r\n\r\n    this._events[event].splice(\r\n      this._events[event].indexOf(fct), 1)\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  emit(event /* , args... */) {\r\n\r\n    if(this._events[event] === undefined)\r\n      return\r\n\r\n    var handlers = this._events[event].slice()\r\n\r\n    for(var i = 0; i < handlers.length; ++i) {\r\n\r\n      var result = handlers[i].apply(this,\r\n        Array.prototype.slice.call(arguments, 1))\r\n\r\n      if(result !== undefined )\r\n        return result\r\n    }\r\n\r\n    return undefined\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--1-2!./Viewing.Extension.Particle.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--1-2!./Viewing.Extension.Particle.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--1-2!./Viewing.Extension.Particle.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/Viewing.Extension.Particle.css\n// module id = 1781\n// module chunks = 30","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--1-2!./ToolPanelBase.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--1-2!./ToolPanelBase.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--1-2!./ToolPanelBase.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.Particle/utils/ToolPanelBase.css\n// module id = 1782\n// module chunks = 30"],"sourceRoot":""}