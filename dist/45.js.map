{"version":3,"sources":["webpack:///./~/babel-runtime/helpers/get.js?a320*************************","webpack:///./src/client/components/UIComponents/UIComponent/index.js?269b*****","webpack:///./src/client/components/UIComponents/UIComponent/UIComponent.js?c63f*****","webpack:///./src/client/components/UIComponents/Popover/Popover.scss","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.scss","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/index.js","webpack:///./src/client/components/UIComponents/Popover/Popover.js","webpack:///./src/client/components/UIComponents/Popover/index.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.js","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/smoothie.js","webpack:///./src/client/components/UIComponents/Popover/Popover.scss?8889","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.scss?cfa7"],"names":["UIComponent","uri","target","link","document","createElement","href","click","format","d","Date","getTime","guid","replace","c","r","Math","random","floor","toString","Popover","options","onClick","bind","popoverId","popoverHtml","$","container","append","$target","attr","popover","placement","trigger","html","content","popoverContent","visible","data","$clone","clone","removeClass","screenPoint","$tip","tip","tipOffset","offset","x","y","left","top","show","IoTPopover","chart","ts","intervalId","addTimeSeries","strokeStyle","fillStyle","lineWidth","$content","clearInterval","setInterval","streamTo","find","stop","exports","Util","extend","arguments","i","length","key","hasOwnProperty","Array","TimeSeries","defaultOptions","clear","resetBoundsInterval","resetBounds","prototype","maxValue","Number","NaN","minValue","value","timestamp","sumRepeatedTimeStampValues","splice","push","isNaN","max","min","dropOldData","oldestValidTime","maxDataSetLength","removeCount","SmoothieChart","defaultChartOptions","seriesSet","currentValueRange","currentVisMinValue","lastRenderTimeMillis","millisPerPixel","enableDpiScaling","yMinFormatter","precision","parseFloat","toFixed","yMaxFormatter","maxValueScale","interpolation","scaleSmoothing","grid","sharpLines","millisPerLine","verticalSections","borderVisible","labels","disabled","fontSize","fontFamily","horizontalLines","AnimateCompatibility","requestAnimationFrame","callback","element","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","call","cancelAnimationFrame","id","clearTimeout","defaultSeriesPresentationOptions","timeSeries","resetBoundsTimerId","removeTimeSeries","numSeries","getTimeSeriesOptions","bringToFront","set","canvas","delayMillis","delay","start","resize","devicePixelRatio","dpr","width","parseInt","getAttribute","height","originalWidth","setAttribute","style","getContext","scale","originalHeight","frame","animate","render","updateValueRange","chartOptions","chartMaxValue","chartMinValue","yRangeFunction","range","targetValueRange","valueRangeDiff","minValueDiff","isAnimatingScale","abs","valueRange","time","nowMillis","maxIdleMillis","context","dimensions","clientWidth","clientHeight","valueToYPixel","round","timeToXPixel","t","font","save","translate","beginPath","rect","clip","clearRect","fillRect","restore","gx","moveTo","lineTo","stroke","closePath","v","gy","strokeRect","hl","line","hly","color","dataSet","seriesOptions","firstX","lastX","lastY","bezierCurveTo","fill","maxValueString","minValueString","fillText","measureText","timestampFormatter","textUntilX","tx","tsWidth","timeFormatter","date","pad2","number","getHours","getMinutes","getSeconds"],"mappings":"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","file":"45.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 1022\n// module chunks = 0 10 11 12 13 14 15 16 20 21 22 23 24 25 26 27 28 29 30 31 32 33 35 36 37 42 45 46 47 50 51 54","import UIComponent from './UIComponent'\r\n\r\nexport default UIComponent\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/UIComponents/UIComponent/index.js","/////////////////////////////////////////////////////////////\r\n//\r\n//\r\n/////////////////////////////////////////////////////////////\r\nimport EventsEmitter from 'EventsEmitter';\r\n\r\nexport default class UIComponent extends EventsEmitter {\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  constructor () {\r\n\r\n    super()\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  showPayload (uri, target = '_blank') {\r\n\r\n    var link = document.createElement('a')\r\n    link.target = target\r\n    link.href = uri\r\n    link.click()\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  guid (format = 'xxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime()\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n      })\r\n\r\n    return guid\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////////////\r\n  static guid (format = 'xxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime()\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n      })\r\n\r\n    return guid\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/UIComponents/UIComponent/UIComponent.js","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".popover-content {\\n  padding: 0; }\\n\\n.popover.left > .arrow:after {\\n  border-left-color: #ededed; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/components/UIComponents/Popover/Popover.scss\n// module id = 1373\n// module chunks = 45","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".popover-content .IoT {\\n  height: 180px;\\n  width: 200px;\\n  padding: 0; }\\n\\n.IoT .popoverTitle {\\n  border-bottom: solid 1px #aeaeae;\\n  border-radius: 4px 4px 0 0;\\n  background-color: #ededed;\\n  padding: 4px 4px 4px 10px;\\n  margin-bottom: 2px;\\n  position: absolute;\\n  width: 100%;\\n  left: 0;\\n  top: 0; }\\n\\n.IoT .graph-container {\\n  position: absolute;\\n  height: 150px;\\n  width: 200px;\\n  padding: 4px;\\n  left: -2px;\\n  top: 32px; }\\n\\n.IoT .graph {\\n  border-radius: 4px;\\n  position: absolute; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./~/sass-loader!./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.scss\n// module id = 1394\n// module chunks = 45","import IoTPopover from './IoT.Popover'\r\nimport './IoT.Popover.scss'\r\n\r\nexport default IoTPopover\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/index.js","import UIComponent from 'UIComponent'\r\n\r\nexport default class Popover extends UIComponent {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (options) {\r\n\r\n    super ()\r\n\r\n    this.onClick = this.onClick.bind (this)\r\n\r\n    this.popoverId = this.guid()\r\n\r\n    this.options = options\r\n\r\n    const popoverHtml =\r\n      this.popoverHtml(this.popoverId)\r\n\r\n    $(options.container).append(popoverHtml)\r\n\r\n    const $target = $(options.target)\r\n\r\n    $target.attr(\r\n      'data-popover-content',\r\n      '#' + this.popoverId)\r\n\r\n    $target.popover({\r\n      placement: 'auto left',\r\n      container: 'body',\r\n      trigger: 'focus',\r\n      html: true,\r\n      content: () => {\r\n        return this.popoverContent()\r\n      }\r\n    })\r\n\r\n    this.visible = false\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  popoverHtml (popoverId) {\r\n\r\n    return  `\r\n      <div id=\"${popoverId}\" class=\"hide\">\r\n      </div>\r\n    `\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  popoverContent () {\r\n\r\n    const $target = $(this.options.target)\r\n    const content = $target.data('popover-content')\r\n    const $clone = $(content).clone(true)\r\n\r\n    $clone.removeClass('hide')\r\n\r\n    $clone.click(this.onClick)\r\n\r\n    return $clone\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setPosition (screenPoint) {\r\n\r\n    if (this.visible) {\r\n\r\n      const data = $(this.options.target).data()\r\n\r\n      const $tip = data['bs.popover'].tip()\r\n\r\n      const tipOffset = $tip.offset()\r\n\r\n      const offset = {\r\n        x: screenPoint.x - this.screenPoint.x,\r\n        y: screenPoint.y - this.screenPoint.y\r\n      }\r\n\r\n      $tip.offset({\r\n        left: tipOffset.left + offset.x,\r\n        top: tipOffset.top + offset.y\r\n      })\r\n\r\n      this.screenPoint = screenPoint\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setVisible (show) {\r\n\r\n    const $target = $(this.options.target)\r\n\r\n    $target.popover(show\r\n      ? 'show'\r\n      : 'hide')\r\n\r\n    this.visible = show\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onClick () {\r\n\r\n    const $target = $(this.options.target)\r\n\r\n    $target.popover('hide')\r\n\r\n    this.visible = false\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/UIComponents/Popover/Popover.js","import Popover from './Popover'\r\nimport './Popover.scss'\r\n\r\nexport default Popover\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/UIComponents/Popover/index.js","import { TimeSeries, SmoothieChart } from './smoothie'\r\nimport Popover from 'Popover'\r\n\r\nexport default class IoTPopover extends Popover {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (options) {\r\n\r\n    super (options)\r\n\r\n    this.chart = new SmoothieChart()\r\n    this.ts = new TimeSeries()\r\n    this.intervalId = 0\r\n\r\n    this.ts.append(new Date().getTime(), Math.random() * 100)\r\n\r\n    this.chart.addTimeSeries(this.ts, {\r\n      strokeStyle: 'rgba(0, 255, 0, 1)',\r\n      fillStyle: 'rgba(0, 255, 0, 0.2)',\r\n      lineWidth: 1\r\n    })\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  popoverHtml (popoverId) {\r\n\r\n    return  `\r\n      <div id=\"${popoverId}\" class=\"hide predix\"> \r\n        <div class=\"popoverTitle\">\r\n          Component Temperature\r\n        </div> \r\n        <div class=\"graph-container\"> \r\n          <canvas class=\"graph\" width=\"192\" height=\"138\"> \r\n          </canvas> \r\n        </div>\r\n       </div>\r\n    `\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  popoverContent () {\r\n\r\n    const $content = super.popoverContent()\r\n\r\n    clearInterval(this.intervalId)\r\n\r\n    this.intervalId = setInterval(() => {\r\n      this.ts.append(\r\n        new Date().getTime(),\r\n        Math.random() * 100)\r\n    }, 1000)\r\n\r\n    this.chart.streamTo(\r\n      $content.find('.graph')[0],\r\n      100)\r\n\r\n    return $content\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  setVisible (show) {\r\n\r\n    super.setVisible (show)\r\n\r\n    if (!show) {\r\n\r\n      clearInterval(this.intervalId)\r\n\r\n      this.chart.stop()\r\n    }\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onClick () {\r\n\r\n    super.onClick()\r\n\r\n    clearInterval(this.intervalId)\r\n\r\n    this.chart.stop()\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.js","// MIT License:\r\n//\r\n// Copyright (c) 2010-2013, Joe Walnes\r\n//               2013-2014, Drew Noakes\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n\r\n/**\r\n * Smoothie Charts - http://smoothiecharts.org/\r\n * (c) 2010-2013, Joe Walnes\r\n *     2013-2014, Drew Noakes\r\n *\r\n * v1.0: Main charting library, by Joe Walnes\r\n * v1.1: Auto scaling of axis, by Neil Dunn\r\n * v1.2: fps (frames per second) option, by Mathias Petterson\r\n * v1.3: Fix for divide by zero, by Paul Nikitochkin\r\n * v1.4: Set minimum, top-scale padding, remove timeseries, add optional timer to reset bounds, by Kelley Reynolds\r\n * v1.5: Set default frames per second to 50... smoother.\r\n *       .start(), .stop() methods for conserving CPU, by Dmitry Vyal\r\n *       options.interpolation = 'bezier' or 'line', by Dmitry Vyal\r\n *       options.maxValue to fix scale, by Dmitry Vyal\r\n * v1.6: minValue/maxValue will always get converted to floats, by Przemek Matylla\r\n * v1.7: options.grid.fillStyle may be a transparent color, by Dmitry A. Shashkin\r\n *       Smooth rescaling, by Kostas Michalopoulos\r\n * v1.8: Set max length to customize number of live points in the dataset with options.maxDataSetLength, by Krishna Narni\r\n * v1.9: Display timestamps along the bottom, by Nick and Stev-io\r\n *       (https://groups.google.com/forum/?fromgroups#!topic/smoothie-charts/-Ywse8FCpKI%5B1-25%5D)\r\n *       Refactored by Krishna Narni, to support timestamp formatting function\r\n * v1.10: Switch to requestAnimationFrame, removed the now obsoleted options.fps, by Gergely Imreh\r\n * v1.11: options.grid.sharpLines option added, by @drewnoakes\r\n *        Addressed warning seen in Firefox when seriesOption.fillStyle undefined, by @drewnoakes\r\n * v1.12: Support for horizontalLines added, by @drewnoakes\r\n *        Support for yRangeFunction callback added, by @drewnoakes\r\n * v1.13: Fixed typo (#32), by @alnikitich\r\n * v1.14: Timer cleared when last TimeSeries removed (#23), by @davidgaleano\r\n *        Fixed diagonal line on chart at start/end of data stream, by @drewnoakes\r\n * v1.15: Support for npm package (#18), by @dominictarr\r\n *        Fixed broken removeTimeSeries function (#24) by @davidgaleano\r\n *        Minor performance and tidying, by @drewnoakes\r\n * v1.16: Bug fix introduced in v1.14 relating to timer creation/clearance (#23), by @drewnoakes\r\n *        TimeSeries.append now deals with out-of-order timestamps, and can merge duplicates, by @zacwitte (#12)\r\n *        Documentation and some local variable renaming for clarity, by @drewnoakes\r\n * v1.17: Allow control over font size (#10), by @drewnoakes\r\n *        Timestamp text won't overlap, by @drewnoakes\r\n * v1.18: Allow control of max/min label precision, by @drewnoakes\r\n *        Added 'borderVisible' chart option, by @drewnoakes\r\n *        Allow drawing series with fill but no stroke (line), by @drewnoakes\r\n * v1.19: Avoid unnecessary repaints, and fixed flicker in old browsers having multiple charts in document (#40), by @asbai\r\n * v1.20: Add SmoothieChart.getTimeSeriesOptions and SmoothieChart.bringToFront functions, by @drewnoakes\r\n * v1.21: Add 'step' interpolation mode, by @drewnoakes\r\n * v1.22: Add support for different pixel ratios. Also add optional y limit formatters, by @copacetic\r\n * v1.23: Fix bug introduced in v1.22 (#44), by @drewnoakes\r\n * v1.24: Fix bug introduced in v1.23, re-adding parseFloat to y-axis formatter defaults, by @siggy_sf\r\n * v1.25: Fix bug seen when adding a data point to TimeSeries which is older than the current data, by @Nking92\r\n *        Draw time labels on top of series, by @comolosabia\r\n *        Add TimeSeries.clear function, by @drewnoakes\r\n * v1.26: Add support for resizing on high device pixel ratio screens, by @copacetic\r\n * v1.27: Fix bug introduced in v1.26 for non whole number devicePixelRatio values, by @zmbush\r\n */\r\n\r\n;(function(exports) {\r\n\r\n  var Util = {\r\n    extend: function() {\r\n      arguments[0] = arguments[0] || {};\r\n      for (var i = 1; i < arguments.length; i++)\r\n      {\r\n        for (var key in arguments[i])\r\n        {\r\n          if (arguments[i].hasOwnProperty(key))\r\n          {\r\n            if (typeof(arguments[i][key]) === 'object') {\r\n              if (arguments[i][key] instanceof Array) {\r\n                arguments[0][key] = arguments[i][key];\r\n              } else {\r\n                arguments[0][key] = Util.extend(arguments[0][key], arguments[i][key]);\r\n              }\r\n            } else {\r\n              arguments[0][key] = arguments[i][key];\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return arguments[0];\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Initialises a new <code>TimeSeries</code> with optional data options.\r\n   *\r\n   * Options are of the form (defaults shown):\r\n   *\r\n   * <pre>\r\n   * {\r\n   *   resetBounds: true,        // enables/disables automatic scaling of the y-axis\r\n   *   resetBoundsInterval: 3000 // the period between scaling calculations, in millis\r\n   * }\r\n   * </pre>\r\n   *\r\n   * Presentation options for TimeSeries are specified as an argument to <code>SmoothieChart.addTimeSeries</code>.\r\n   *\r\n   * @constructor\r\n   */\r\n  function TimeSeries(options) {\r\n    this.options = Util.extend({}, TimeSeries.defaultOptions, options);\r\n    this.clear();\r\n  }\r\n\r\n  TimeSeries.defaultOptions = {\r\n    resetBoundsInterval: 3000,\r\n    resetBounds: true\r\n  };\r\n\r\n  /**\r\n   * Clears all data and state from this TimeSeries object.\r\n   */\r\n  TimeSeries.prototype.clear = function() {\r\n    this.data = [];\r\n    this.maxValue = Number.NaN; // The maximum value ever seen in this TimeSeries.\r\n    this.minValue = Number.NaN; // The minimum value ever seen in this TimeSeries.\r\n  };\r\n\r\n  /**\r\n   * Recalculate the min/max values for this <code>TimeSeries</code> object.\r\n   *\r\n   * This causes the graph to scale itself in the y-axis.\r\n   */\r\n  TimeSeries.prototype.resetBounds = function() {\r\n    if (this.data.length) {\r\n      // Walk through all data points, finding the min/max value\r\n      this.maxValue = this.data[0][1];\r\n      this.minValue = this.data[0][1];\r\n      for (var i = 1; i < this.data.length; i++) {\r\n        var value = this.data[i][1];\r\n        if (value > this.maxValue) {\r\n          this.maxValue = value;\r\n        }\r\n        if (value < this.minValue) {\r\n          this.minValue = value;\r\n        }\r\n      }\r\n    } else {\r\n      // No data exists, so set min/max to NaN\r\n      this.maxValue = Number.NaN;\r\n      this.minValue = Number.NaN;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds a new data point to the <code>TimeSeries</code>, preserving chronological order.\r\n   *\r\n   * @param timestamp the position, in time, of this data point\r\n   * @param value the value of this data point\r\n   * @param sumRepeatedTimeStampValues if <code>timestamp</code> has an exact match in the series, this flag controls\r\n   * whether it is replaced, or the values summed (defaults to false.)\r\n   */\r\n  TimeSeries.prototype.append = function(timestamp, value, sumRepeatedTimeStampValues) {\r\n    // Rewind until we hit an older timestamp\r\n    var i = this.data.length - 1;\r\n    while (i >= 0 && this.data[i][0] > timestamp) {\r\n      i--;\r\n    }\r\n\r\n    if (i === -1) {\r\n      // This new item is the oldest data\r\n      this.data.splice(0, 0, [timestamp, value]);\r\n    } else if (this.data.length > 0 && this.data[i][0] === timestamp) {\r\n      // Update existing values in the array\r\n      if (sumRepeatedTimeStampValues) {\r\n        // Sum this value into the existing 'bucket'\r\n        this.data[i][1] += value;\r\n        value = this.data[i][1];\r\n      } else {\r\n        // Replace the previous value\r\n        this.data[i][1] = value;\r\n      }\r\n    } else if (i < this.data.length - 1) {\r\n      // Splice into the correct position to keep timestamps in order\r\n      this.data.splice(i + 1, 0, [timestamp, value]);\r\n    } else {\r\n      // Add to the end of the array\r\n      this.data.push([timestamp, value]);\r\n    }\r\n\r\n    this.maxValue = isNaN(this.maxValue) ? value : Math.max(this.maxValue, value);\r\n    this.minValue = isNaN(this.minValue) ? value : Math.min(this.minValue, value);\r\n  };\r\n\r\n  TimeSeries.prototype.dropOldData = function(oldestValidTime, maxDataSetLength) {\r\n    // We must always keep one expired data point as we need this to draw the\r\n    // line that comes into the chart from the left, but any points prior to that can be removed.\r\n    var removeCount = 0;\r\n    while (this.data.length - removeCount >= maxDataSetLength && this.data[removeCount + 1][0] < oldestValidTime) {\r\n      removeCount++;\r\n    }\r\n    if (removeCount !== 0) {\r\n      this.data.splice(0, removeCount);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Initialises a new <code>SmoothieChart</code>.\r\n   *\r\n   * Options are optional, and should be of the form below. Just specify the values you\r\n   * need and the rest will be given sensible defaults as shown:\r\n   *\r\n   * <pre>\r\n   * {\r\n   *   minValue: undefined,                      // specify to clamp the lower y-axis to a given value\r\n   *   maxValue: undefined,                      // specify to clamp the upper y-axis to a given value\r\n   *   maxValueScale: 1,                         // allows proportional padding to be added above the chart. for 10% padding, specify 1.1.\r\n   *   yRangeFunction: undefined,                // function({min: , max: }) { return {min: , max: }; }\r\n   *   scaleSmoothing: 0.125,                    // controls the rate at which y-value zoom animation occurs\r\n   *   millisPerPixel: 20,                       // sets the speed at which the chart pans by\r\n   *   enableDpiScaling: true,                   // support rendering at different DPI depending on the device\r\n   *   yMinFormatter: function(min, precision) { // callback function that formats the min y value label\r\n   *     return parseFloat(min).toFixed(precision);\r\n   *   },\r\n   *   yMaxFormatter: function(max, precision) { // callback function that formats the max y value label\r\n   *     return parseFloat(max).toFixed(precision);\r\n   *   },\r\n   *   maxDataSetLength: 2,\r\n   *   interpolation: 'bezier'                   // one of 'bezier', 'linear', or 'step'\r\n   *   timestampFormatter: null,                 // optional function to format time stamps for bottom of chart\r\n   *                                             // you may use SmoothieChart.timeFormatter, or your own: function(date) { return ''; }\r\n   *   horizontalLines: [],                      // [ { value: 0, color: '#ffffff', lineWidth: 1 } ]\r\n   *   grid:\r\n   *   {\r\n   *     fillStyle: '#000000',                   // the background colour of the chart\r\n   *     lineWidth: 1,                           // the pixel width of grid lines\r\n   *     strokeStyle: '#777777',                 // colour of grid lines\r\n   *     millisPerLine: 1000,                    // distance between vertical grid lines\r\n   *     sharpLines: false,                      // controls whether grid lines are 1px sharp, or softened\r\n   *     verticalSections: 2,                    // number of vertical sections marked out by horizontal grid lines\r\n   *     borderVisible: true                     // whether the grid lines trace the border of the chart or not\r\n   *   },\r\n   *   labels\r\n   *   {\r\n   *     disabled: false,                        // enables/disables labels showing the min/max values\r\n   *     fillStyle: '#ffffff',                   // colour for text of labels,\r\n   *     fontSize: 15,\r\n   *     fontFamily: 'sans-serif',\r\n   *     precision: 2\r\n   *   }\r\n   * }\r\n   * </pre>\r\n   *\r\n   * @constructor\r\n   */\r\n  function SmoothieChart(options) {\r\n    this.options = Util.extend({}, SmoothieChart.defaultChartOptions, options);\r\n    this.seriesSet = [];\r\n    this.currentValueRange = 1;\r\n    this.currentVisMinValue = 0;\r\n    this.lastRenderTimeMillis = 0;\r\n  }\r\n\r\n  SmoothieChart.defaultChartOptions = {\r\n    millisPerPixel: 20,\r\n    enableDpiScaling: true,\r\n    yMinFormatter: function(min, precision) {\r\n      return parseFloat(min).toFixed(precision);\r\n    },\r\n    yMaxFormatter: function(max, precision) {\r\n      return parseFloat(max).toFixed(precision);\r\n    },\r\n    maxValueScale: 1,\r\n    interpolation: 'bezier',\r\n    scaleSmoothing: 0.125,\r\n    maxDataSetLength: 2,\r\n    grid: {\r\n      fillStyle: '#000000',\r\n      strokeStyle: '#777777',\r\n      lineWidth: 1,\r\n      sharpLines: false,\r\n      millisPerLine: 1000,\r\n      verticalSections: 2,\r\n      borderVisible: true\r\n    },\r\n    labels: {\r\n      fillStyle: '#ffffff',\r\n      disabled: false,\r\n      fontSize: 10,\r\n      fontFamily: 'monospace',\r\n      precision: 2\r\n    },\r\n    horizontalLines: []\r\n  };\r\n\r\n  // Based on http://inspirit.github.com/jsfeat/js/compatibility.js\r\n  SmoothieChart.AnimateCompatibility = (function() {\r\n    var requestAnimationFrame = function(callback, element) {\r\n          var requestAnimationFrame =\r\n            window.requestAnimationFrame        ||\r\n            window.webkitRequestAnimationFrame  ||\r\n            window.mozRequestAnimationFrame     ||\r\n            window.oRequestAnimationFrame       ||\r\n            window.msRequestAnimationFrame      ||\r\n            function(callback) {\r\n              return window.setTimeout(function() {\r\n                callback(new Date().getTime());\r\n              }, 16);\r\n            };\r\n          return requestAnimationFrame.call(window, callback, element);\r\n        },\r\n        cancelAnimationFrame = function(id) {\r\n          var cancelAnimationFrame =\r\n            window.cancelAnimationFrame ||\r\n            function(id) {\r\n              clearTimeout(id);\r\n            };\r\n          return cancelAnimationFrame.call(window, id);\r\n        };\r\n\r\n    return {\r\n      requestAnimationFrame: requestAnimationFrame,\r\n      cancelAnimationFrame: cancelAnimationFrame\r\n    };\r\n  })();\r\n\r\n  SmoothieChart.defaultSeriesPresentationOptions = {\r\n    lineWidth: 1,\r\n    strokeStyle: '#ffffff'\r\n  };\r\n\r\n  /**\r\n   * Adds a <code>TimeSeries</code> to this chart, with optional presentation options.\r\n   *\r\n   * Presentation options should be of the form (defaults shown):\r\n   *\r\n   * <pre>\r\n   * {\r\n   *   lineWidth: 1,\r\n   *   strokeStyle: '#ffffff',\r\n   *   fillStyle: undefined\r\n   * }\r\n   * </pre>\r\n   */\r\n  SmoothieChart.prototype.addTimeSeries = function(timeSeries, options) {\r\n    this.seriesSet.push({timeSeries: timeSeries, options: Util.extend({}, SmoothieChart.defaultSeriesPresentationOptions, options)});\r\n    if (timeSeries.options.resetBounds && timeSeries.options.resetBoundsInterval > 0) {\r\n      timeSeries.resetBoundsTimerId = setInterval(\r\n        function() {\r\n          timeSeries.resetBounds();\r\n        },\r\n        timeSeries.options.resetBoundsInterval\r\n      );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Removes the specified <code>TimeSeries</code> from the chart.\r\n   */\r\n  SmoothieChart.prototype.removeTimeSeries = function(timeSeries) {\r\n    // Find the correct timeseries to remove, and remove it\r\n    var numSeries = this.seriesSet.length;\r\n    for (var i = 0; i < numSeries; i++) {\r\n      if (this.seriesSet[i].timeSeries === timeSeries) {\r\n        this.seriesSet.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    // If a timer was operating for that timeseries, remove it\r\n    if (timeSeries.resetBoundsTimerId) {\r\n      // Stop resetting the bounds, if we were\r\n      clearInterval(timeSeries.resetBoundsTimerId);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Gets render options for the specified <code>TimeSeries</code>.\r\n   *\r\n   * As you may use a single <code>TimeSeries</code> in multiple charts with different formatting in each usage,\r\n   * these settings are stored in the chart.\r\n   */\r\n  SmoothieChart.prototype.getTimeSeriesOptions = function(timeSeries) {\r\n    // Find the correct timeseries to remove, and remove it\r\n    var numSeries = this.seriesSet.length;\r\n    for (var i = 0; i < numSeries; i++) {\r\n      if (this.seriesSet[i].timeSeries === timeSeries) {\r\n        return this.seriesSet[i].options;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Brings the specified <code>TimeSeries</code> to the top of the chart. It will be rendered last.\r\n   */\r\n  SmoothieChart.prototype.bringToFront = function(timeSeries) {\r\n    // Find the correct timeseries to remove, and remove it\r\n    var numSeries = this.seriesSet.length;\r\n    for (var i = 0; i < numSeries; i++) {\r\n      if (this.seriesSet[i].timeSeries === timeSeries) {\r\n        var set = this.seriesSet.splice(i, 1);\r\n        this.seriesSet.push(set[0]);\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Instructs the <code>SmoothieChart</code> to start rendering to the provided canvas, with specified delay.\r\n   *\r\n   * @param canvas the target canvas element\r\n   * @param delayMillis an amount of time to wait before a data point is shown. This can prevent the end of the series\r\n   * from appearing on screen, with new values flashing into view, at the expense of some latency.\r\n   */\r\n  SmoothieChart.prototype.streamTo = function(canvas, delayMillis) {\r\n    this.canvas = canvas;\r\n    this.delay = delayMillis;\r\n    this.start();\r\n  };\r\n\r\n  /**\r\n   * Make sure the canvas has the optimal resolution for the device's pixel ratio.\r\n   */\r\n  SmoothieChart.prototype.resize = function() {\r\n    // TODO this function doesn't handle the value of enableDpiScaling changing during execution\r\n    if (!this.options.enableDpiScaling || !window || window.devicePixelRatio === 1)\r\n      return;\r\n\r\n    var dpr = window.devicePixelRatio;\r\n    var width = parseInt(this.canvas.getAttribute('width'));\r\n    var height = parseInt(this.canvas.getAttribute('height'));\r\n\r\n    if (!this.originalWidth || (Math.floor(this.originalWidth * dpr) !== width)) {\r\n      this.originalWidth = width;\r\n      this.canvas.setAttribute('width', (Math.floor(width * dpr)).toString());\r\n      this.canvas.style.width = width + 'px';\r\n      this.canvas.getContext('2d').scale(dpr, dpr);\r\n    }\r\n\r\n    if (!this.originalHeight || (Math.floor(this.originalHeight * dpr) !== height)) {\r\n      this.originalHeight = height;\r\n      this.canvas.setAttribute('height', (Math.floor(height * dpr)).toString());\r\n      this.canvas.style.height = height + 'px';\r\n      this.canvas.getContext('2d').scale(dpr, dpr);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Starts the animation of this chart.\r\n   */\r\n  SmoothieChart.prototype.start = function() {\r\n    if (this.frame) {\r\n      // We're already running, so just return\r\n      return;\r\n    }\r\n\r\n    // Renders a frame, and queues the next frame for later rendering\r\n    var animate = function() {\r\n      this.frame = SmoothieChart.AnimateCompatibility.requestAnimationFrame(function() {\r\n        this.render();\r\n        animate();\r\n      }.bind(this));\r\n    }.bind(this);\r\n\r\n    animate();\r\n  };\r\n\r\n  /**\r\n   * Stops the animation of this chart.\r\n   */\r\n  SmoothieChart.prototype.stop = function() {\r\n    if (this.frame) {\r\n      SmoothieChart.AnimateCompatibility.cancelAnimationFrame(this.frame);\r\n      delete this.frame;\r\n    }\r\n  };\r\n\r\n  SmoothieChart.prototype.updateValueRange = function() {\r\n    // Calculate the current scale of the chart, from all time series.\r\n    var chartOptions = this.options,\r\n        chartMaxValue = Number.NaN,\r\n        chartMinValue = Number.NaN;\r\n\r\n    for (var d = 0; d < this.seriesSet.length; d++) {\r\n      // TODO(ndunn): We could calculate / track these values as they stream in.\r\n      var timeSeries = this.seriesSet[d].timeSeries;\r\n      if (!isNaN(timeSeries.maxValue)) {\r\n        chartMaxValue = !isNaN(chartMaxValue) ? Math.max(chartMaxValue, timeSeries.maxValue) : timeSeries.maxValue;\r\n      }\r\n\r\n      if (!isNaN(timeSeries.minValue)) {\r\n        chartMinValue = !isNaN(chartMinValue) ? Math.min(chartMinValue, timeSeries.minValue) : timeSeries.minValue;\r\n      }\r\n    }\r\n\r\n    // Scale the chartMaxValue to add padding at the top if required\r\n    if (chartOptions.maxValue != null) {\r\n      chartMaxValue = chartOptions.maxValue;\r\n    } else {\r\n      chartMaxValue *= chartOptions.maxValueScale;\r\n    }\r\n\r\n    // Set the minimum if we've specified one\r\n    if (chartOptions.minValue != null) {\r\n      chartMinValue = chartOptions.minValue;\r\n    }\r\n\r\n    // If a custom range function is set, call it\r\n    if (this.options.yRangeFunction) {\r\n      var range = this.options.yRangeFunction({min: chartMinValue, max: chartMaxValue});\r\n      chartMinValue = range.min;\r\n      chartMaxValue = range.max;\r\n    }\r\n\r\n    if (!isNaN(chartMaxValue) && !isNaN(chartMinValue)) {\r\n      var targetValueRange = chartMaxValue - chartMinValue;\r\n      var valueRangeDiff = (targetValueRange - this.currentValueRange);\r\n      var minValueDiff = (chartMinValue - this.currentVisMinValue);\r\n      this.isAnimatingScale = Math.abs(valueRangeDiff) > 0.1 || Math.abs(minValueDiff) > 0.1;\r\n      this.currentValueRange += chartOptions.scaleSmoothing * valueRangeDiff;\r\n      this.currentVisMinValue += chartOptions.scaleSmoothing * minValueDiff;\r\n    }\r\n\r\n    this.valueRange = { min: chartMinValue, max: chartMaxValue };\r\n  };\r\n\r\n  SmoothieChart.prototype.render = function(canvas, time) {\r\n    var nowMillis = new Date().getTime();\r\n\r\n    if (!this.isAnimatingScale) {\r\n      // We're not animating. We can use the last render time and the scroll speed to work out whether\r\n      // we actually need to paint anything yet. If not, we can return immediately.\r\n\r\n      // Render at least every 1/6th of a second. The canvas may be resized, which there is\r\n      // no reliable way to detect.\r\n      var maxIdleMillis = Math.min(1000/6, this.options.millisPerPixel);\r\n\r\n      if (nowMillis - this.lastRenderTimeMillis < maxIdleMillis) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.resize();\r\n\r\n    this.lastRenderTimeMillis = nowMillis;\r\n\r\n    canvas = canvas || this.canvas;\r\n    time = time || nowMillis - (this.delay || 0);\r\n\r\n    // Round time down to pixel granularity, so motion appears smoother.\r\n    time -= time % this.options.millisPerPixel;\r\n\r\n    var context = canvas.getContext('2d'),\r\n        chartOptions = this.options,\r\n        dimensions = { top: 0, left: 0, width: canvas.clientWidth, height: canvas.clientHeight },\r\n        // Calculate the threshold time for the oldest data points.\r\n        oldestValidTime = time - (dimensions.width * chartOptions.millisPerPixel),\r\n        valueToYPixel = function(value) {\r\n          var offset = value - this.currentVisMinValue;\r\n          return this.currentValueRange === 0\r\n            ? dimensions.height\r\n            : dimensions.height - (Math.round((offset / this.currentValueRange) * dimensions.height));\r\n        }.bind(this),\r\n        timeToXPixel = function(t) {\r\n          return Math.round(dimensions.width - ((time - t) / chartOptions.millisPerPixel));\r\n        };\r\n\r\n    this.updateValueRange();\r\n\r\n    context.font = chartOptions.labels.fontSize + 'px ' + chartOptions.labels.fontFamily;\r\n\r\n    // Save the state of the canvas context, any transformations applied in this method\r\n    // will get removed from the stack at the end of this method when .restore() is called.\r\n    context.save();\r\n\r\n    // Move the origin.\r\n    context.translate(dimensions.left, dimensions.top);\r\n\r\n    // Create a clipped rectangle - anything we draw will be constrained to this rectangle.\r\n    // This prevents the occasional pixels from curves near the edges overrunning and creating\r\n    // screen cheese (that phrase should need no explanation).\r\n    context.beginPath();\r\n    context.rect(0, 0, dimensions.width, dimensions.height);\r\n    context.clip();\r\n\r\n    // Clear the working area.\r\n    context.save();\r\n    context.fillStyle = chartOptions.grid.fillStyle;\r\n    context.clearRect(0, 0, dimensions.width, dimensions.height);\r\n    context.fillRect(0, 0, dimensions.width, dimensions.height);\r\n    context.restore();\r\n\r\n    // Grid lines...\r\n    context.save();\r\n    context.lineWidth = chartOptions.grid.lineWidth;\r\n    context.strokeStyle = chartOptions.grid.strokeStyle;\r\n    // Vertical (time) dividers.\r\n    if (chartOptions.grid.millisPerLine > 0) {\r\n      context.beginPath();\r\n      for (var t = time - (time % chartOptions.grid.millisPerLine);\r\n           t >= oldestValidTime;\r\n           t -= chartOptions.grid.millisPerLine) {\r\n        var gx = timeToXPixel(t);\r\n        if (chartOptions.grid.sharpLines) {\r\n          gx -= 0.5;\r\n        }\r\n        context.moveTo(gx, 0);\r\n        context.lineTo(gx, dimensions.height);\r\n      }\r\n      context.stroke();\r\n      context.closePath();\r\n    }\r\n\r\n    // Horizontal (value) dividers.\r\n    for (var v = 1; v < chartOptions.grid.verticalSections; v++) {\r\n      var gy = Math.round(v * dimensions.height / chartOptions.grid.verticalSections);\r\n      if (chartOptions.grid.sharpLines) {\r\n        gy -= 0.5;\r\n      }\r\n      context.beginPath();\r\n      context.moveTo(0, gy);\r\n      context.lineTo(dimensions.width, gy);\r\n      context.stroke();\r\n      context.closePath();\r\n    }\r\n    // Bounding rectangle.\r\n    if (chartOptions.grid.borderVisible) {\r\n      context.beginPath();\r\n      context.strokeRect(0, 0, dimensions.width, dimensions.height);\r\n      context.closePath();\r\n    }\r\n    context.restore();\r\n\r\n    // Draw any horizontal lines...\r\n    if (chartOptions.horizontalLines && chartOptions.horizontalLines.length) {\r\n      for (var hl = 0; hl < chartOptions.horizontalLines.length; hl++) {\r\n        var line = chartOptions.horizontalLines[hl],\r\n            hly = Math.round(valueToYPixel(line.value)) - 0.5;\r\n        context.strokeStyle = line.color || '#ffffff';\r\n        context.lineWidth = line.lineWidth || 1;\r\n        context.beginPath();\r\n        context.moveTo(0, hly);\r\n        context.lineTo(dimensions.width, hly);\r\n        context.stroke();\r\n        context.closePath();\r\n      }\r\n    }\r\n\r\n    // For each data set...\r\n    for (var d = 0; d < this.seriesSet.length; d++) {\r\n      context.save();\r\n      var timeSeries = this.seriesSet[d].timeSeries,\r\n          dataSet = timeSeries.data,\r\n          seriesOptions = this.seriesSet[d].options;\r\n\r\n      // Delete old data that's moved off the left of the chart.\r\n      timeSeries.dropOldData(oldestValidTime, chartOptions.maxDataSetLength);\r\n\r\n      // Set style for this dataSet.\r\n      context.lineWidth = seriesOptions.lineWidth;\r\n      context.strokeStyle = seriesOptions.strokeStyle;\r\n      // Draw the line...\r\n      context.beginPath();\r\n      // Retain lastX, lastY for calculating the control points of bezier curves.\r\n      var firstX = 0, lastX = 0, lastY = 0;\r\n      for (var i = 0; i < dataSet.length && dataSet.length !== 1; i++) {\r\n        var x = timeToXPixel(dataSet[i][0]),\r\n            y = valueToYPixel(dataSet[i][1]);\r\n\r\n        if (i === 0) {\r\n          firstX = x;\r\n          context.moveTo(x, y);\r\n        } else {\r\n          switch (chartOptions.interpolation) {\r\n            case \"linear\":\r\n            case \"line\": {\r\n              context.lineTo(x,y);\r\n              break;\r\n            }\r\n            case \"bezier\":\r\n            default: {\r\n              // Great explanation of Bezier curves: http://en.wikipedia.org/wiki/Bezier_curve#Quadratic_curves\r\n              //\r\n              // Assuming A was the last point in the line plotted and B is the new point,\r\n              // we draw a curve with control points P and Q as below.\r\n              //\r\n              // A---P\r\n              //     |\r\n              //     |\r\n              //     |\r\n              //     Q---B\r\n              //\r\n              // Importantly, A and P are at the same y coordinate, as are B and Q. This is\r\n              // so adjacent curves appear to flow as one.\r\n              //\r\n              context.bezierCurveTo( // startPoint (A) is implicit from last iteration of loop\r\n                Math.round((lastX + x) / 2), lastY, // controlPoint1 (P)\r\n                Math.round((lastX + x)) / 2, y, // controlPoint2 (Q)\r\n                x, y); // endPoint (B)\r\n              break;\r\n            }\r\n            case \"step\": {\r\n              context.lineTo(x,lastY);\r\n              context.lineTo(x,y);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        lastX = x; lastY = y;\r\n      }\r\n\r\n      if (dataSet.length > 1) {\r\n        if (seriesOptions.fillStyle) {\r\n          // Close up the fill region.\r\n          context.lineTo(dimensions.width + seriesOptions.lineWidth + 1, lastY);\r\n          context.lineTo(dimensions.width + seriesOptions.lineWidth + 1, dimensions.height + seriesOptions.lineWidth + 1);\r\n          context.lineTo(firstX, dimensions.height + seriesOptions.lineWidth);\r\n          context.fillStyle = seriesOptions.fillStyle;\r\n          context.fill();\r\n        }\r\n\r\n        if (seriesOptions.strokeStyle && seriesOptions.strokeStyle !== 'none') {\r\n          context.stroke();\r\n        }\r\n        context.closePath();\r\n      }\r\n      context.restore();\r\n    }\r\n\r\n    // Draw the axis values on the chart.\r\n    if (!chartOptions.labels.disabled && !isNaN(this.valueRange.min) && !isNaN(this.valueRange.max)) {\r\n      var maxValueString = chartOptions.yMaxFormatter(this.valueRange.max, chartOptions.labels.precision),\r\n          minValueString = chartOptions.yMinFormatter(this.valueRange.min, chartOptions.labels.precision);\r\n      context.fillStyle = chartOptions.labels.fillStyle;\r\n      context.fillText(maxValueString, dimensions.width - context.measureText(maxValueString).width - 2, chartOptions.labels.fontSize);\r\n      context.fillText(minValueString, dimensions.width - context.measureText(minValueString).width - 2, dimensions.height - 2);\r\n    }\r\n\r\n    // Display timestamps along x-axis at the bottom of the chart.\r\n    if (chartOptions.timestampFormatter && chartOptions.grid.millisPerLine > 0) {\r\n      var textUntilX = dimensions.width - context.measureText(minValueString).width + 4;\r\n      for (var t = time - (time % chartOptions.grid.millisPerLine);\r\n           t >= oldestValidTime;\r\n           t -= chartOptions.grid.millisPerLine) {\r\n        var gx = timeToXPixel(t);\r\n        // Only draw the timestamp if it won't overlap with the previously drawn one.\r\n        if (gx < textUntilX) {\r\n          // Formats the timestamp based on user specified formatting function\r\n          // SmoothieChart.timeFormatter function above is one such formatting option\r\n          var tx = new Date(t),\r\n            ts = chartOptions.timestampFormatter(tx),\r\n            tsWidth = context.measureText(ts).width;\r\n          textUntilX = gx - tsWidth - 2;\r\n          context.fillStyle = chartOptions.labels.fillStyle;\r\n          context.fillText(ts, gx - tsWidth, dimensions.height - 2);\r\n        }\r\n      }\r\n    }\r\n\r\n    context.restore(); // See .save() above.\r\n  };\r\n\r\n  // Sample timestamp formatting function\r\n  SmoothieChart.timeFormatter = function(date) {\r\n    function pad2(number) { return (number < 10 ? '0' : '') + number }\r\n    return pad2(date.getHours()) + ':' + pad2(date.getMinutes()) + ':' + pad2(date.getSeconds());\r\n  };\r\n\r\n  exports.TimeSeries = TimeSeries;\r\n  exports.SmoothieChart = SmoothieChart;\r\n\r\n})(typeof exports === 'undefined' ? this : exports);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/smoothie.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Popover.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Popover.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../node_modules/sass-loader/index.js!./Popover.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/components/UIComponents/Popover/Popover.scss\n// module id = 1793\n// module chunks = 45","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../../node_modules/sass-loader/index.js!./IoT.Popover.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../../node_modules/sass-loader/index.js!./IoT.Popover.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/index.js??ref--2-2!../../../../../../node_modules/sass-loader/index.js!./IoT.Popover.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.IoT/IoT.Popover/IoT.Popover.scss\n// module id = 1814\n// module chunks = 45"],"sourceRoot":""}