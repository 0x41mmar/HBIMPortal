{"version":3,"sources":["webpack:///./~/babel-runtime/helpers/get.js?a320******************************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/index.js?d1b9****************","webpack:///./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js?48a7****************","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/index.js?d336","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/Viewing.Extension.ContextMenu.Handler.js?6048","webpack:///./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/Viewing.Extension.ContextMenu.js?a7c9"],"names":["ExtensionBase","viewer","options","_viewer","_options","eventId","eventIdArray","Array","isArray","eventTasks","map","id","resolve","handler","args","removeEventListener","addEventListener","all","format","d","Date","getTime","guid","replace","c","r","Math","random","floor","toString","Composer","Autodesk","Viewing","Extension","ContextMenuHandler","event","status","defaultMenu","newMenu","emit","Extensions","ViewerObjectContextMenu","ContextMenuExtension","onSelection","bind","selection","handlers","contextMenuHandler","on","menu","dbId","dbIdArray","model","menuArgs","forEach","buildMenu","setContextMenu","AGGREGATE_SELECTION_CHANGED_EVENT","console","log","push","selections","length","theExtensionManager","registerExtension","ExtensionId"],"mappings":"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","file":"54.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/helpers/get.js\n// module id = 1022\n// module chunks = 0 10 11 12 13 14 15 16 20 21 22 23 24 25 26 27 28 29 30 31 32 33 35 36 37 42 45 46 47 50 51 54","import ViewerExtensionBase from './Viewer.ExtensionBase'\r\n\r\nexport default ViewerExtensionBase\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/index.js","import EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class ExtensionBase extends\r\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}) {\r\n\r\n    super(viewer, options)\r\n\r\n    this._viewer = viewer\r\n    this.viewer = viewer\r\n\r\n    this._options = options\r\n    this.options = options\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.Base'\r\n  }\r\n\r\n  ///////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  ///////////////////////////////////////////////////////////\r\n  static guid(format = 'xxxxxxxxxx') {\r\n\r\n    var d = new Date().getTime()\r\n\r\n    var guid = format.replace(\r\n      /[xy]/g,\r\n      function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0\r\n        d = Math.floor(d / 16)\r\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\r\n      })\r\n\r\n    return guid\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  load() {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  unload() {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Reload callback\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  reload (options) {\r\n\r\n    return true\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  // Async viewer event\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  viewerEvent (eventId) {\r\n\r\n    const eventIdArray = Array.isArray(eventId)\r\n      ? eventId : [eventId]\r\n\r\n    const eventTasks = eventIdArray.map((id) => {\r\n      return new Promise ((resolve) => {\r\n        const handler = (args) => {\r\n          this.viewer.removeEventListener (\r\n            id, handler)\r\n          resolve (args)\r\n        }\r\n        this.viewer.addEventListener (\r\n          id, handler)\r\n      })\r\n    })\r\n\r\n    return Promise.all(eventTasks)\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js","import './Viewing.Extension.ContextMenu'\r\n\r\nexport default 'Viewing.Extension.ContextMenu'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/index.js","/////////////////////////////////////////////////////////////////////\r\n// Viewing.Extension.ContextMenu\r\n// by Philippe Leefsma, September 2016\r\n//\r\n/////////////////////////////////////////////////////////////////////\r\nimport EventsEmitter from 'EventsEmitter'\r\n\r\nexport default class ContextMenuHandler extends\r\n  EventsEmitter.Composer (\r\n    Autodesk.Viewing.Extensions.ViewerObjectContextMenu) {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}) {\r\n\r\n    super (viewer, options)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  buildMenu (event, status) {\r\n\r\n    const defaultMenu = super.buildMenu(event, status)\r\n\r\n    const newMenu = this.emit(\r\n      'buildMenu',\r\n      defaultMenu)\r\n\r\n    return newMenu || defaultMenu\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/Viewing.Extension.ContextMenu.Handler.js","/////////////////////////////////////////////////////////////////////\r\n// Viewing.Extension.ContextMenu\r\n// by Philippe Leefsma, September 2016\r\n//\r\n/////////////////////////////////////////////////////////////////////\r\nimport ContextMenuHandler from './Viewing.Extension.ContextMenu.Handler'\r\nimport ExtensionBase from 'Viewer.ExtensionBase'\r\n\r\nclass ContextMenuExtension extends ExtensionBase {\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Class constructor\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  constructor (viewer, options = {}) {\r\n\r\n    super (viewer, options)\r\n\r\n    this.onSelection = this.onSelection.bind(this)\r\n\r\n    this.selection = null\r\n\r\n    this.handlers = []\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Extension Id\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  static get ExtensionId() {\r\n\r\n    return 'Viewing.Extension.ContextMenu'\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Load callback\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  load() {\r\n\r\n    this.contextMenuHandler = new ContextMenuHandler(this.viewer)\r\n\r\n    this.contextMenuHandler.on('buildMenu', (menu) => {\r\n\r\n      const dbId = this.selection\r\n        ? this.selection.dbIdArray[0]\r\n        : null\r\n\r\n      const model = this.selection\r\n        ? this.selection.model\r\n        : null\r\n\r\n      const selection = this.selection\r\n\r\n      const menuArgs = {\r\n        selection,\r\n        model,\r\n        dbId,\r\n        menu\r\n      }\r\n\r\n      const newMenu = this.emit('buildMenu', menuArgs)\r\n\r\n      if (newMenu) {\r\n\r\n        return newMenu\r\n      }\r\n\r\n      this.handlers.forEach((handler) => {\r\n\r\n        handler (menuArgs)\r\n      })\r\n\r\n      return this.options.buildMenu\r\n        ? this.options.buildMenu(menu, dbId)\r\n        : menu\r\n    })\r\n\r\n    this.viewer.setContextMenu(this.contextMenuHandler)\r\n\r\n    this.viewer.addEventListener(\r\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n      this.onSelection)\r\n\r\n    console.log('Viewing.Extension.ContextMenu loaded')\r\n\r\n    return true;\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  addHandler (handler) {\r\n\r\n    this.handlers.push (handler)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////\r\n  onSelection (event) {\r\n\r\n    this.selection = event.selections.length\r\n      ? event.selections[0]\r\n      : null\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////////\r\n  // Unload callback\r\n  //\r\n  /////////////////////////////////////////////////////////////////\r\n  unload() {\r\n\r\n    this.viewer.removeEventListener(\r\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\r\n      this.onSelection)\r\n\r\n    const menu =\r\n      new Autodesk.Viewing.Extensions.ViewerObjectContextMenu(\r\n        this.viewer)\r\n\r\n    this.viewer.setContextMenu(menu)\r\n\r\n    console.log('Viewing.Extension.ContextMenu unloaded')\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nAutodesk.Viewing.theExtensionManager.registerExtension(\r\n  ContextMenuExtension.ExtensionId,\r\n  ContextMenuExtension)\r\n\r\n/////////////////////////////////////////////////////////\r\n//\r\n//\r\n/////////////////////////////////////////////////////////\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/viewer.components/Viewer.Extensions.Dynamic/Viewing.Extension.ContextMenu/Viewing.Extension.ContextMenu.js"],"sourceRoot":""}